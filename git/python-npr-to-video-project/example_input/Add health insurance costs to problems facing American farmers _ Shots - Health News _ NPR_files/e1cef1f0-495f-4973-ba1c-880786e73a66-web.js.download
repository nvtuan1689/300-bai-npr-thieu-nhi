/*! @permutive/javascript-sdk v20.61.0 (web) (built 2026-01-01T09:39:50.676Z) */(()=>{"use strict";var __webpack_modules__={5654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},842:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(2169),i=r(8236);function s(e){return(0,n.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(n.gn))}},2945:(e,t,r)=>{r.d(t,{Qt:()=>o,Yt:()=>d,ap:()=>s,gz:()=>l});var n=r(2169),i=r(8614);function s(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function a(e,t,r){return function(n){for(var i=Array(r.length+1),s=0;s<r.length;s++)i[s]=r[s];return i[r.length]=n,0===t?e.apply(null,i):a(e,t-1,i)}}var c={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function u(e){return i.e$.call(c,e)||(c[e]=a(n.bc,e-1,[])),c[e]}function l(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=u(n),s=e.map(t[0],i),o=1;o<n;o++)s=e.ap(s,t[o]);return s}}function d(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var s;return(s={})[e[0]]=t,s[e[1]]=r,s[e[2]]=n,s[e[3]]=i,s}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(s){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=s,o}}}}};default:return a((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},s=0;s<t;s++)i[e[s]]=r[s];return i}),t-1,[])}}(r),s=e.map(t[r[0]],i),o=1;o<n;o++)s=e.ap(s,t[r[o]]);return s}}},9912:(e,t,r)=>{r.d(t,{oA:()=>y,t9:()=>p,DZ:()=>b,Ew:()=>u,f2:()=>l,xH:()=>m,jV:()=>g,uK:()=>w,tV:()=>S,u4:()=>E,DY:()=>f});var n=r(2169),i=(r(6289),r(8614)),s=r(4214);i.r1;var o=function(e){return[e]};s.xP,s.Lx,s.u4,s.OE,s.nq,s.iw,s.YM,s.ZN,s.Eh,i.F4,s.YM,s.Z$,s.VV,s.Fp,s.j0;s.ur;var a=r(7812),c=r(7049);r(3226);a.P5,a.YM,a.Z$;a.cx;function u(e){return a.Ew(e)}var l=a.f2;a.JO,a.qr;var d=function(e){return e.slice()},f=function(e){return function(t){return t.length<=1?d(t):t.slice().sort(e.compare)}};var p=a.t9;function g(e){var t=p(e);return function(r,n){if(void 0===n){var i=g(e);return function(e){return i(e,r)}}return r.filter((function(e){return t(e,n)}))}}a.kp,a.Eq;var h=o,_=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},m=_(n.yR),v=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var s=e(n,t[n]);i.pC(s)&&r.push(s.value)}return r}},b=function(e){return v((function(t,r){return e(r)}))},y=b(n.yR),w=function(e){return I((function(t,r){return e(r)}))},I=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var s=t[i];e(i,s)?n.push(s):r.push(s)}return(0,c.s4)(r,n)}},S=function(e){return k((function(t,r){return e(r)}))},k=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var s=e(i,t[i]);"Left"===s._tag?r.push(s.left):n.push(s.right)}return(0,c.s4)(r,n)}},E=(a.Lx,a.xP,a.u4);a.OE,a.nq,a.iw,a.ZN,a.Eh,a.pR,a.pJ,a.oR,a.yW,a.j0,i.F4},6335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},7144:(e,t,r)=>{r.d(t,{G5:()=>m,dO:()=>g,Pd:()=>w,ak:()=>L,tS:()=>b,Y$:()=>R,g_:()=>U,ij:()=>T,Yo:()=>E,DT:()=>k,fS:()=>C,pF:()=>D,nM:()=>P,t$:()=>a,UI:()=>p,Vn:()=>I,EQ:()=>z,vx:()=>M,F2:()=>c,LF:()=>A,KC:()=>j,i$:()=>q,Y3:()=>O});var n=r(6335),i=r(4906),s=r(2169),o=(r(6289),r(8614)),a=o.t$,c=o.F2,u=function(e,t){return(0,s.zG)(e,p(t))},l=function(e,t){return(0,s.zG)(e,_(t))},d=function(e,t){return(0,s.zG)(e,b(t))},f="Either",p=function(e){return function(t){return P(t)?t:c(e(t.right))}},g={URI:f,map:u},h=c,_=function(e){return function(t){return P(t)?t:P(e)?e:c(t.right(e.right))}},m={URI:f,map:u,ap:l},v=function(e){return function(t){return P(t)?t:e(t.right)}},b=v,y={URI:f,map:u,ap:l,chain:d},w=function(e,t){return function(r){return P(r)?a(e(r.left)):c(t(r.right))}},I=function(e){return function(t){return P(t)?a(e(t.left)):t}},S={URI:f,fromEither:s.yR},k=(0,i.DT)(S),E=(0,i.Yo)(S),P=o.nM,G=(o.tO,function(e,t){return function(r){return P(r)?e(r.left):t(r.right)}}),x=G,z=G,U=z,D=function(e){return function(t){return P(t)?e(t.left):t.right}},C=D,R=(0,i.Y$)(S,y),A=function(e){return P(e)?c(e.left):a(e.right)},M=function(e){return function(t){return P(t)?e(t.left):t}},T=function(e){return function(t){return null==t?a(e):c(t)}},O=function(e,t){try{return c(e())}catch(e){return a(t(e))}},q=x(s.yR,s.yR);function j(e){return e instanceof Error?e:new Error(String(e))}o.F4;var L=(0,n.a)(y);o.Xl},7125:(e,t,r)=>{r.d(t,{EQ:()=>y,F2:()=>a,KQ:()=>f,LF:()=>P,LU:()=>E,LV:()=>w,NG:()=>p,Pd:()=>v,UI:()=>g,Vn:()=>b,ap:()=>h,dQ:()=>k,fS:()=>I,i$:()=>G,ij:()=>d,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>_,vx:()=>S,wp:()=>m});var n=r(2945),i=r(7144),s=r(2169),o=r(6289);function a(e){return(0,s.ls)(i.F2,e.of)}function c(e){return(0,s.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function d(e){return function(t){return(0,s.ls)(i.ij(t),e.of)}}function f(e){var t=d(e);return function(e){var r=t(e);return function(e){return(0,s.ls)(e,r)}}}function p(e){var t=_(e),r=f(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function g(e){return(0,o.UI)(e,i.dO)}function h(e){return(0,n.ap)(e,i.G5)}function _(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function m(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function v(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function b(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function y(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function w(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function I(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function S(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function k(e){var t=S(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function E(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function P(e){return function(t){return e.map(t,i.LF)}}function G(e){return function(t){return e.map(t,i.i$)}}},3689:(e,t,r)=>{r.d(t,{f7:()=>n,n_:()=>i,w4:()=>s});r(2169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},s={equals:function(e,t){return e===t}};s.equals},4906:(e,t,r)=>{r.d(t,{DT:()=>o,Y$:()=>u,Yo:()=>s,fX:()=>c});var n=r(2169),i=r(8614);function s(e){return function(t){return function(r){return e.fromEither(i.Wi(r)?i.t$(t()):i.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function a(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function c(e,t){var r=a(e);return function(e){return function(n){return t.chain(n,r(e))}}}function u(e,t){return function(r,n){return function(s){return t.chain(s,(function(t){return e.fromEither(r(t)?i.F2(t):i.t$(n(t)))}))}}}},7755:(e,t,r)=>{r.d(t,{At:()=>s});var n=r(6335),i=r(2169);function s(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}},6289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function s(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>s,UI:()=>n,YO:()=>i})},4694:(e,t,r)=>{r.d(t,{G5:()=>l,RD:()=>g,UI:()=>a,of:()=>c});var n=r(2169),i=(r(6289),r(8614)),s=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},a=function(e){return function(t){return s(t,e)}},c=n.a9,u="IO",l={URI:u,map:s,ap:o},d=(n.yR,n.yR,i.F4,c(i.Xl)),f=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):d}},p=function(e){return f((function(t,r){return e(r)}))},g=p(n.yR)},9144:(e,t,r)=>{r.d(t,{P:()=>s});var n=r(7144),i=r(2169),s=function(e){return(0,n.Y3)((function(){var t=JSON.stringify(e);if("string"!=typeof t)throw new Error("Converting unsupported structure to JSON");return t}),i.yR)}},8236:(e,t,r)=>{r.d(t,{g1:()=>U,G5:()=>z,Ri:()=>L,xu:()=>Q,dO:()=>P,wp:()=>A,Gk:()=>R,tS:()=>D,fX:()=>re,mU:()=>te,hX:()=>$,DZ:()=>F,xH:()=>ee,g_:()=>X,Uo:()=>Y,ij:()=>ne,KQ:()=>se,DT:()=>f,Eh:()=>S,IS:()=>p,uZ:()=>k,fS:()=>Z,EK:()=>g,lo:()=>T,Wi:()=>H,pC:()=>W,UI:()=>E,EQ:()=>J,aD:()=>V,YP:()=>l,of:()=>G,RD:()=>ue,G:()=>d,FS:()=>oe,Y3:()=>ie,bM:()=>M});var n=r(6335),i=r(4906),s=r(2169),o=(r(6289),r(8614)),a=r(4327),c=r(7049);r(3226);function u(e,t){return function(r){return r?t.of(void 0):e.zero()}}var l=o.YP,d=o.G;function f(e){return function(t){return e(t)?d(t):l}}var p=function(e){return"Right"===e._tag?l:d(e.left)},g=function(e){return"Left"===e._tag?l:d(e.right)},h=function(e,t){return(0,s.zG)(e,E(t))},_=function(e,t){return(0,s.zG)(e,x(t))},m=function(e,t){return(0,s.zG)(e,D(t))},v=function(e,t){return(0,s.zG)(e,$(t))},b=function(e,t){return(0,s.zG)(e,F(t))},y=function(e,t){return(0,s.zG)(e,B(t))},w=function(e,t){return(0,s.zG)(e,N(t))},I="Option",S=function(e){return{equals:function(t,r){return t===r||(H(t)?H(r):!H(r)&&e.equals(t.value,r.value))}}},k=function(e){return{concat:function(t,r){return H(t)?r:H(r)?t:d(e.concat(t.value,r.value))},empty:l}},E=function(e){return function(t){return H(t)?l:d(e(t.value))}},P={URI:I,map:h},G=d,x=function(e){return function(t){return H(t)||H(e)?l:d(t.value(e.value))}},z={URI:I,map:h,ap:_},U={URI:I,map:h,ap:_,of:G},D=function(e){return function(t){return H(t)?l:e(t.value)}},C={URI:I,map:h,ap:_,chain:m},R=function(e){return function(t){return H(t)?e():t}},A=R,M=function(){return l},T=u({URI:I,zero:M},{URI:I,of:G}),O=D(s.yR),q=(0,c.s4)(l,l),j=function(e){return H(e)?q:(0,c.s4)(p(e.value),g(e.value))},L={URI:I,compact:O,separate:j},$=function(e){return function(t){return H(t)?l:e(t.value)?t:l}},F=function(e){return function(t){return H(t)?l:e(t.value)}},B=function(e){return function(t){return(0,c.s4)(v(t,(0,a.ff)(e)),v(t,e))}},N=function(e){return(0,s.ls)(E(e),j)},Q={URI:I,map:h,compact:O,separate:j,filter:v,filterMap:b,partition:y,partitionMap:w},Y=g,K={URI:I,fromEither:Y},W=o.pC,H=function(e){return"None"===e._tag},V=function(e,t){return function(r){return H(r)?e():t(r.value)}},J=V,X=J,Z=function(e){return function(t){return H(t)?e():t.value}},ee=O,te=(0,n.m)(C),re=(0,i.fX)(K,C),ne=function(e){return null==e?l:d(e)},ie=function(e){try{return d(e())}catch(e){return l}},se=function(e){return(0,s.ls)(e,ne)},oe=J(s.r5,s.yR);o.F4;var ae=G(o.Xl),ce=function(e){var t=function(e){return function(t){var r=e(0,o.YM(t));if(H(r))return l;for(var n=[r.value],i=1;i<t.length;i++){var s=e(i,t[i]);if(H(s))return l;n.push(s.value)}return d(n)}}(e);return function(e){return o.Od(e)?t(e):ae}},ue=function(e){return ce((function(t,r){return e(r)}))}(s.yR)},856:(e,t,r)=>{r.d(t,{Fp:()=>c,VV:()=>a,Zt:()=>o,uZ:()=>u});var n=r(3689),i=r(2169),s=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:s(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=(i.W8,function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}}),c=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},u=function(e){var t=a(e),r=c(e);return function(e,n){return function(i){return r(t(i,n),e)}}};n.w4.equals},4327:(e,t,r)=>{r.d(t,{ff:()=>n});r(2169);var n=function(e){return function(t){return!e(t)}}},7812:(e,t,r)=>{r.d(t,{$R:()=>x,DZ:()=>N,EQ:()=>h,Eh:()=>se,Eq:()=>A,Ew:()=>w,G:()=>pe,Hr:()=>_e,JO:()=>k,Lx:()=>V,OE:()=>J,Od:()=>p,P5:()=>m,Su:()=>L,UI:()=>j,YM:()=>v,YO:()=>he,Z$:()=>b,ZN:()=>re,bM:()=>T,bj:()=>G,cS:()=>de,cx:()=>y,dF:()=>S,f2:()=>I,hX:()=>F,hp:()=>P,iw:()=>Z,j0:()=>ge,jG:()=>ne,kp:()=>R,nI:()=>le,nq:()=>X,oA:()=>Q,oR:()=>ue,of:()=>M,oh:()=>$,pJ:()=>ce,pR:()=>oe,qr:()=>E,t9:()=>z,tS:()=>O,u4:()=>H,uK:()=>Y,uZ:()=>ie,vP:()=>ee,xH:()=>q,xP:()=>W,xb:()=>f,yW:()=>fe,zo:()=>U});var n=r(3689),i=r(2169),s=r(6289),o=r(8614),a=r(3052),c=r(856),u=r(4214),l=r(7049),d=(r(3226),function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}),f=function(e){return 0===e.length},p=u.Od,g=(u.Ce,u.ws,u.R3);u.Im;var h=function(e,t){return function(r){return p(r)?t(r):e()}},_=u.dC;function m(e,t){return void 0===t?function(t){return m(e,t)}:_(e,t)?o.YP:o.G(t[e])}var v=function(e){return p(e)?o.G(u.YM(e)):o.YP},b=function(e){return p(e)?o.G(u.Z$(e)):o.YP};var y=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function w(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var I=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};function S(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(t[r]);return o.YP}}var k=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},G=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function x(e,t){return void 0===t?function(t){return x(t,e)}:function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),s=0;s<i;s++)n[s]=r(e[s],t[s]);return n}(e,t,(function(e,t){return[e,t]}))}function z(e){return function(t,r){if(void 0===r){var n=z(e);return function(e){return n(t,e)}}for(var i,s=0;s<r.length;s++)if(i=r[s],e.equals(i,t))return!0;return!1}}var U=function(e){return function(t){return f(t)?e:f(e)?t:t.concat(e)}};var D=function(e,t){return(0,i.zG)(e,j(t))},C=function(e,t,r){return(0,i.zG)(e,H(t,r))},R=function(e,t){return(0,i.zG)(e,ce(t))},A=function(e,t){return(0,i.zG)(e,ue(t))},M=u.of,T=function(){return de},O=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(f(t))return de;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},q=O(i.yR),j=function(e){return function(t){return t.map((function(t){return e(t)}))}},L=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},$=function(e){for(var t=[],r=[],n=0,i=e;n<i.length;n++){var s=i[n];"Left"===s._tag?t.push(s.left):r.push(s.right)}return(0,l.s4)(t,r)},F=function(e){return function(t){return t.filter(e)}},B=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},N=function(e){return B((function(t,r){return e(r)}))},Q=N(i.yR),Y=function(e){return K((function(t,r){return e(r)}))},K=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var s=t[i];e(i,s)?n.push(s):r.push(s)}return(0,l.s4)(r,n)}},W=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},H=function(e,t){return J(e,(function(e,r,n){return t(r,n)}))},V=function(e){var t=W(e);return function(e){return t((function(t,r){return e(r)}))}},J=function(e,t){return function(r){for(var n=r.length,i=e,s=0;s<n;s++)i=t(s,i,r[s]);return i}},X=function(e,t){return Z(e,(function(e,r,n){return t(r,n)}))},Z=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},ee=function(e){return function(t){return C(t,e.of(T()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,g(t))}})),r)}))}},te="ReadonlyArray",re=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},ne=function(){return{concat:function(e,t){return f(e)?t:f(t)?e:e.concat(t)}}},ie=function(){return{concat:ne().concat,empty:de}},se=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},oe=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,i=r.length,s=Math.min(n,i),o=0;o<s;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return a.Df.compare(n,i)}))},ae={URI:te,map:D},ce=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},ue=function(e){return function(t){var r=e(t),n=[],i=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var a=0,c=r;a<c.length;a++){s(c[a])}for(;n.length>0;)s(n.shift());return i}},le=(u.oo,function(e){return f(e)?de:e.slice()}),de=u.cS;function fe(e){return function(t){return t.every(e)}}var pe=function(e){return function(t){return t.some(e)}},ge=function(e){var t=u.j0(e);return function(r){return h((function(){return e.empty}),t(r))}},he=(o.F4,(0,s.YO)(ae)),_e=(0,s.Hr)(ae);u.w6,u.QI,u.Ss},4214:(e,t,r)=>{r.d(t,{Ce:()=>f,Eh:()=>A,Fp:()=>j,Im:()=>p,Lx:()=>G,OE:()=>z,Od:()=>u,QI:()=>F,R3:()=>g,Ss:()=>B,UI:()=>k,VV:()=>q,YM:()=>M,Z$:()=>O,ZN:()=>R,c2:()=>_,cS:()=>c,dC:()=>l,iw:()=>D,j0:()=>$,nI:()=>b,nq:()=>x,of:()=>S,oo:()=>h,u4:()=>P,ur:()=>L,vM:()=>w,w6:()=>v,ws:()=>d,xP:()=>U});var n=r(3689),i=r(2169),s=(r(6289),r(8614)),o=r(1340),a=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},c=s.Xl,u=s.Od,l=function(e,t){return e<0||e>=t.length},d=function(e){return function(t){return a([e],t,!0)}},f=d,p=function(e){return function(t){return a(a([],t,!0),[e],!1)}},g=p,h=function(e,t,r){if(u(r)){var n=s.r1(r);return n.splice(e,0,t),n}return[t]},_=function(e){return u(e)?s.G(e):s.YP},m=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},v=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]},b=function(e){return _(e.slice())};function y(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var w=function(e){return function(t){for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],a=e(o);s.e$.call(r,a)?r[a].push(o):r[a]=[o]}return r}};var I=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},S=s.ri,k=function(e){return E((function(t,r){return e(r)}))},E=function(e){return function(t){for(var r=[e(0,M(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},P=function(e,t){return z(e,(function(e,r,n){return t(r,n)}))},G=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},x=function(e,t){return D(e,(function(e,r,n){return t(r,n)}))},z=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},U=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},D=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},C=s.YM,R=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},A=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},M=(s.F4,C),T=s.Gb,O=function(e){return e[e.length-1]},q=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},j=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},L=function(e){return function(t){return t.reduce(e.concat)}},$=function(e){var t=L(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=T(t);return u(r)?(0,i.zG)(r,I(e),f(M(t))):t}}(e),t)}};function F(e,t){return void 0===t?f(e):(0,i.zG)(t,f(e))}var B=function(e,t){return(0,i.zG)(e,y([t]))}},6450:(e,t,r)=>{r.d(t,{Bu:()=>h,CC:()=>T,DZ:()=>Z,Dv:()=>le,EG:()=>g,EW:()=>B,Eh:()=>ce,G:()=>D,HA:()=>R,Hd:()=>P,I8:()=>q,P5:()=>_,RF:()=>O,RJ:()=>L,SW:()=>Q,Su:()=>v,UI:()=>b,Ub:()=>K,V_:()=>F,XP:()=>d,_Y:()=>$,_r:()=>E,dp:()=>c,dx:()=>f,e$:()=>p,hX:()=>X,jt:()=>G,kp:()=>M,mK:()=>V,mS:()=>j,nn:()=>A,nr:()=>de,nu:()=>N,oA:()=>se,oh:()=>oe,qS:()=>H,ri:()=>S,sq:()=>z,t9:()=>C,tV:()=>te,uK:()=>ee,uZ:()=>ue,vA:()=>W,vP:()=>k,xb:()=>u,yW:()=>U,z7:()=>x,zV:()=>Y});var n=r(3689),i=r(2169),s=r(8614),o=r(7049),a=r(229),c=(r(3226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(s.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(a.Df);var f=function(e,t){return function(r){if(s.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},p=function(e,t){return s.e$.call(t,e)};function g(e){return function(t){if(!s.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function h(e){return function(t,r){if(void 0===r){var n=h(e);return function(e){return n(e,t)}}for(var i in t)if(!s.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function _(e,t){return void 0===t?function(t){return _(e,t)}:s.e$.call(t,e)?s.G(t[e]):s.YP}var m={};function v(e){return function(t){var r={};for(var n in t)s.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function b(e){return v((function(t,r){return e(r)}))}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return y(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,s=r(n),o=s.length,a=0;a<o;a++){var c=s[a];i=t(c,i,n[c])}return i}}}function w(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,s=t(n),o=s.length,a=0;a<o;a++){var c=s[a];i=e.concat(i,r(c,n[c]))}return i}}}}return w(a.Df)(e)}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return I(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,s=r(n),o=s.length-1;o>=0;o--){var a=s[o];i=t(a,n[a],i)}return i}}}var S=function(e,t){var r;return(r={})[e]=t,r};function k(e){return V(a.Df)(e)}function E(e){return function(t){var r={},n={};for(var i in t)if(s.e$.call(t,i)){var a=e(i,t[i]);switch(a._tag){case"Left":r[i]=a.left;break;case"Right":n[i]=a.right}}return(0,o.s4)(r,n)}}function P(e){return function(t){var r={},n={};for(var i in t)if(s.e$.call(t,i)){var a=t[i];e(i,a)?n[i]=a:r[i]=a}return(0,o.s4)(r,n)}}function G(e){return function(t){var r={};for(var n in t)if(s.e$.call(t,n)){var i=e(n,t[n]);s.pC(i)&&(r[n]=i.value)}return r}}function x(e){return function(t){var r={},n=!1;for(var i in t)if(s.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var z=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function U(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function D(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function C(e){return function(t,r){if(void 0===r){var n=C(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var R=function(e,t){return(0,i.zG)(e,b(t))},A=function(e,t){return(0,i.zG)(e,v(t))},M=function(e){var t=re(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},T=function(e){return function(t){var r=ne(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},O=function(e){var t=ie(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},q=function(e,t){return(0,i.zG)(e,X(t))},j=function(e,t){return(0,i.zG)(e,Z(t))},L=function(e,t){return(0,i.zG)(e,ee(t))},$=function(e,t){return(0,i.zG)(e,te(t))},F=function(e){var t=y(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},B=function(e){var t=w(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},N=function(e){var t=I(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},Q=function(e,t){return(0,i.zG)(e,E(t))},Y=function(e,t){return(0,i.zG)(e,P(t))},K=function(e,t){return(0,i.zG)(e,G(t))},W=function(e,t){return(0,i.zG)(e,x(t))},H=function(e){var t=J(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},V=function(e){var t=H(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},J=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(m);for(var s=t.of({}),o=function(r){s=t.ap(t.map(s,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,c=i;a<c.length;a++){o(c[a])}return s}}},X=function(e){return x((function(t,r){return e(r)}))},Z=function(e){return G((function(t,r){return e(r)}))},ee=function(e){return P((function(t,r){return e(r)}))},te=function(e){return E((function(t,r){return e(r)}))};function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=y(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return re(a.Df).apply(void 0,e)}function ne(e){if("compare"in e){var t=w(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return ne(a.Df)(e)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=I(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ie(a.Df).apply(void 0,e)}var se=function(e){var t={};for(var r in e)if(s.e$.call(e,r)){var n=e[r];s.pC(n)&&(t[r]=n.value)}return t},oe=function(e){var t={},r={};for(var n in e)if(s.e$.call(e,n)){var i=e[n];s.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},ae="ReadonlyRecord";function ce(e){var t=h(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function ue(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var i in r)s.e$.call(r,i)&&(n[i]=s.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:m}}var le=function(e){var t,r=(t=e,function(e){return function(r){if(u(r))return e;if(u(e))return r;var n={};for(var i in r)p(i,e)?n[i]=t.concat(r[i],e[i]):n[i]=r[i];for(var i in e)p(i,n)||(n[i]=e[i]);return n}});return{concat:function(e,t){return r(t)(e)}}};a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function de(e,t){return s.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},3643:(e,t,r)=>{r.d(t,{H5:()=>a,Kl:()=>c,Lx:()=>l,Pd:()=>s,Yg:()=>i,li:()=>n,nq:()=>d,pL:()=>o,u4:()=>u});r(2169);function n(e){return e[0]}function i(e){return e[1]}var s=function(e,t){return function(r){return[t(n(r)),e(i(r))]}},o=function(e){return function(t){return[e(n(t)),i(t)]}},a=function(e){return function(t){return[n(t),e(i(t))]}},c=n,u=function(e,t){return function(r){return t(e,n(r))}},l=function(){return function(e){return function(t){return e(n(t))}}},d=function(e,t){return function(r){return t(n(r),e)}}},951:(e,t,r)=>{r.d(t,{UI:()=>a,XP:()=>o});var n=r(6450),i=r(229),s=(r(3226),n.dp,n.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}}),o=s(i.Df);n.dx,n.e$;n.Bu,n.P5,n.Su;var a=n.UI;n.ri;function c(e){return n.vP(e)}n._r;n.jt;n.yW,n.G,n.t9;var u=n.HA,l=(n.nn,n.kp),d=n.CC,f=n.RF,p=(n.I8,n.mS,n.RJ,n._Y,n.V_),g=n.EW,h=n.nu,_=(n.SW,n.zV,n.Ub,n.vA,n.qS),m=(n.mK,function(e){return function(t){var r=s(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var s=t.of({}),o=function(r){s=t.ap(t.map(s,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,c=i;a<c.length;a++){o(c[a])}return s}}});n.hX,n.DZ,n.uK,n.tV;n.oA,n.oh;var v="Record";n.Eh,n.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,n.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},5086:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},1340:(e,t,r)=>{r.d(t,{Z$:()=>u,Fp:()=>a,VV:()=>o,n_:()=>c});var n,i=r(8614),s=r(856),o=function(e){return{concat:s.VV(e)}},a=function(e){return{concat:s.Fp(e)}},c=function(e){return{concat:function(t,r){var n={};for(var s in e)i.e$.call(e,s)&&(n[s]=e[s].concat(t[s],r[s]));return n}}},u=function(){return{concat:function(e,t){return t}}};n=void 0},7049:(e,t,r)=>{r.d(t,{Pd:()=>i,s4:()=>n});r(2169);var n=function(e,t){return{left:e,right:t}},i=function(e,t){return function(r){return n(e(s(r)),t(o(r)))}},s=function(e){return e.left},o=function(e){return e.right}},7226:(e,t,r)=>{r.d(t,{At:()=>G,Hi:()=>w,PM:()=>y,Qt:()=>U,UA:()=>k,UI:()=>g,YO:()=>x,ak:()=>z,ap:()=>h,dO:()=>b,gw:()=>l,mU:()=>E,of:()=>_,pE:()=>M,qA:()=>I,qo:()=>S,tD:()=>u,tS:()=>m,uU:()=>A});var n=r(2945),i=r(6335),s=r(7755),o=r(2169),a=r(6289),c=r(8614),u=function(e){return function(){return Promise.resolve().then(e)}};function l(e){return function(t){return function(){return new Promise((function(r){setTimeout((function(){Promise.resolve().then(t).then(r)}),e)}))}}}var d=function(e,t){return(0,o.zG)(e,g(t))},f=function(e,t){return(0,o.zG)(e,h(t))},p=function(e,t){return(0,o.zG)(e,m(t))},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},h=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},_=function(e){return function(){return Promise.resolve(e)}},m=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},v="Task";var b={URI:v,map:d},y={URI:v,of:_},w={URI:v,map:d,ap:f},I={URI:v,map:d,ap:f,of:_},S={URI:v,map:d,ap:f,chain:p},k={URI:v,map:d,of:_,ap:f,chain:p},E=(o.yR,(0,i.m)(S)),P={URI:v,fromIO:u},G=(0,s.At)(P,S),x=(c.F4,(0,a.YO)(b)),z=(0,i.a)(S),U=(0,n.Qt)(w),D=_(c.Xl),C=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return c.Od(e)?t(e):D}},R=function(e){var t=function(e){return function(t){return function(){return c.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,c.YM(t))).then(c.ri))}}}(e);return function(e){return c.Od(e)?t(e):D}},A=function(e){return C((function(t,r){return e(r)}))},M=function(e){return R((function(t,r){return e(r)}))}},132:(e,t,r)=>{r.d(t,{Do:()=>ee,Qt:()=>ne,ak:()=>re,tS:()=>q,fX:()=>W,At:()=>J,wE:()=>Z,Zl:()=>j,Y$:()=>H,Uo:()=>I,tD:()=>y,fF:()=>w,fS:()=>E,t$:()=>h,Hr:()=>te,UI:()=>A,Vn:()=>T,EQ:()=>S,LV:()=>k,of:()=>$,vx:()=>G,F2:()=>_,Ij:()=>ie,Y3:()=>P});var n=r(2945),i=r(6335),s=r(7125),o=r(4906),a=r(7755),c=r(2169);function u(e,t){return function(r){var n=(0,c.ls)(r,e.fromTask);return function(e){return t.chain(e,n)}}}var l=r(6289),d=r(8614),f=r(7226),p=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},h=s.t$(f.PM),_=s.F2(f.PM),m=s.m8(f.dO),v=s.pk(f.dO),b=(0,c.ls)(f.tD,m),y=(f.tD,b),w=m,I=f.of,S=(f.tD,s.EQ(f.dO)),k=s.LV(f.UA),E=s.fS(f.UA),P=function(e,t){return function(){return p(void 0,void 0,void 0,(function(){var r;return g(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(d.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,d.t$(t(r))];case 3:return[2]}}))}))}},G=(f.dO,f.PM,f.PM,f.UA,s.vx(f.UA)),x=(f.UA,f.UA,f.dO,function(e,t){return(0,c.zG)(e,A(t))}),z=function(e,t){return(0,c.zG)(e,O(t))},U=function(e,t){return(0,c.zG)(e,q(t))},D=function(e,t,r){return(0,c.zG)(e,M(t,r))},C=function(e,t){return(0,c.zG)(e,T(t))},R=function(e,t){return(0,c.zG)(e,L(t))},A=s.UI(f.dO),M=s.Pd(f.dO),T=s.Vn(f.dO),O=s.ap(f.Hi),q=s.tS(f.UA),j=q,L=s.wp(f.UA),$=_,F=h,B="TaskEither";var N={URI:B,map:x},Q={URI:B,map:x,ap:z},Y={URI:B,map:x,ap:z,chain:U},K={URI:B,fromEither:I},W=(0,o.fX)(K,Y),H=(0,o.Y$)(K,Y),V={URI:B,fromIO:y},J=(0,a.At)(V,Y),X={URI:B,fromIO:y,fromTask:w},Z=u(X,Y);var ee=$(d.F4),te=(0,l.Hr)(N),re=(0,i.a)(Y),ne=(0,n.Qt)(Q),ie=(d.Xl,{URI:B,bimap:D,mapLeft:C,map:x,of:$,ap:z,chain:U,alt:R,fromIO:y,fromTask:w,throwError:F})},3226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},2169:(e,t,r)=>{r.d(t,{MZ:()=>i,Q1:()=>u,SK:()=>p,W8:()=>o,a9:()=>s,bc:()=>d,gn:()=>a,ls:()=>l,r5:()=>c,yR:()=>n,zG:()=>f});function n(e){return e}var i=n;function s(e){return function(){return e}}var o=s(!0),a=s(null),c=s(void 0),u=c;function l(e,t,r,n,i,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return s(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(s(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(s(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(s(i(n(r(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function f(e,t,r,n,i,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return s(i(n(r(t(e)))));case 7:return o(s(i(n(r(t(e))))));case 8:return a(o(s(i(n(r(t(e)))))));case 9:return c(a(o(s(i(n(r(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var p=function(e,t){return t}},8614:(e,t,r)=>{r.d(t,{F2:()=>d,F4:()=>m,G:()=>a,Gb:()=>h,Od:()=>p,Wi:()=>i,Xl:()=>_,YM:()=>g,YP:()=>o,e$:()=>v,nM:()=>c,pC:()=>s,r1:()=>b,ri:()=>f,t$:()=>l,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},s=function(e){return"Some"===e._tag},o={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},f=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},h=function(e){return e.slice(1)},_=[],m={},v=Object.prototype.hasOwnProperty,b=function(e){return n([e[0]],e.slice(1),!0)}},3052:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,i.compare},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,pn:()=>o,xb:()=>s});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},s=function(e){return 0===e.length},o=function(e,t){return function(r){return r.endsWith(e,t)}}},6287:(e,t,r)=>{r.r(t),r.d(t,{CleanRoomAddon:()=>o,load:()=>s});var n=r(8559);const i="clean_room",s=e=>{(0,n.Hn)(i)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[i,{}]})};class o{constructor(){}}},5029:(e,t,r)=>{r.r(t),r.d(t,{PrebidAnalyticsAddon:()=>_,load:()=>h});var n=r(5654),i=r(9912),s=r(7144),o=r(2169),a=r(8236),c=r(132),u=r(8683),l=r(7707),d=r(7266),f=r(8230),p=r(8559);const g="prebid_analytics",h=e=>{(0,p.Hn)(g)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[g,{}]})};class _{prefix="[prebid_analytics]";api;sessionManager;permutive;logger;clientContext;viewId;shouldTrackPrebidAuctions;async putOrResetUnprocessed(e){return(0,o.zG)(e,a.g_((()=>c.Y3((()=>this.unprocessedPrebidAuctions.reset()),n.w)),(e=>c.Y3((()=>this.unprocessedPrebidAuctions.put(e)),n.w))),c.vx((e=>(this.reportError(`Unprocessed auctions failed to put. Got ${e}`),c.F2((0,o.Q1)())))),(e=>e()))}unprocessedPrebidAuctions;debouncedPutOrResetUnprocessed=this.setupUnprocessedPrebidAuctions();stagedAuctions={};trackableAuctions={};get allAuctions(){return{...this.stagedAuctions,...this.trackableAuctions}}trackAuctionsInterval=null;constructor(e){this.permutive=e.permutive,this.api=e.api,this.logger=e.logger,this.unprocessedPrebidAuctions=e.unprocessedEvents.PrebidAuctions,this.sessionManager=e.sessionManager,this.clientContext=e.clientContext,this.viewId=e.viewId,this.shouldTrackPrebidAuctions=0===e.config.prebidAuctionsRandomDownsamplingThreshold||(0,l.CX)(e.userId.get())>e.config.prebidAuctionsRandomDownsamplingThreshold,this.shouldTrackPrebidAuctions?(0,o.zG)(e.pbjs,u.UI(a.EQ((()=>{this.logInfo("Waiting for PrebidJS to start PrebidAuctions tracking...")}),(e=>this.startPrebidAuctions(e))))):this.logDebug("Skipping tracking prebid auctions due to downsampling",{downsampling_threshold:e.config.prebidAuctionsRandomDownsamplingThreshold})}async startPrebidAuctions(e){await this.trackUnprocessedPrebidAuctions(),this.logDebug("Starting PrebidAuctions tracking",{prebid:e});const t=(0,f.zi)(e),r=e=>0===e.bidsReceived.length&&0===e.noBids.length?null:(0,o.zG)(this.mapToStagedAuctions(e),s.tS((()=>s.Y3((()=>e.bidsReceived.forEach((e=>{var r;("rendered"===(r=e).status||"targetingSet"===r.status)&&this.setBidToWon(t,e)}))),(e=>{const t=`Failed to process auction. Got ${(0,n.w)(e)}`;return this.reportError(t),(0,n.w)(t)})))));e.onEvent("auctionEnd",(e=>{r(e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const a=r=>{const n=(0,l.qh)(r);this.logDebug("Processing setTargeting event",{adUnitCodes:n});const a=s.DT((e=>{let[t,r]=e;return!!t&&!!r.hb_adid}),(()=>new Error("Missing targeting data"))),c=(0,o.ls)(a,s.tS((t=>{let[r,{hb_adid:n}]=t;return(0,o.zG)(e.getAllPrebidWinningBids(),(0,i.Ew)((e=>e.adId===n&&e.adUnitCode===r)),s.Yo((()=>new Error("Prebid winning bid does not exist"))))})),s.UI((e=>{this.setBidToWon(t,e)})));return n.forEach(c)};e.onEvent("setTargeting",(e=>{a(e),this.storeAuctionsAsUnprocessed(this.allAuctions)})),e.onEvent("bidWon",(e=>{this.setBidToWon(t,e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const c=(e,r)=>{this.logDebug("Processing render event",{isRendered:e,props:r}),r.bid&&(e&&this.setBidToRendered(t,r.bid),this.promoteAuctionToTrackable(r.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};e.onEvent("adRenderSucceeded",(e=>{c(!0,e)})),e.onEvent("adRenderFailed",(e=>{c(!1,e)})),e.getEvents().forEach((e=>"auctionEnd"===e.eventType?r(e.args):"setTargeting"===e.eventType?a(e.args):"bidWon"===e.eventType?this.setBidToWon(t,e.args):"adRenderSucceeded"===e.eventType?c(!0,e.args):"adRenderFailed"===e.eventType?c(!1,e.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,l.aT)((async()=>{this.trackAuctionsInterval=null;const e=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},await this.trackPrebidAuctions(e,{useBeacon:!0}),await this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))}trackUnprocessedPrebidAuctions(){return(0,o.zG)(c.Y3((async()=>(0,o.zG)(await this.unprocessedPrebidAuctions.getIfPresent(),a.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(e=>{let{props:t,...r}=e;return this.logDebug("Found unprocessed PrebidAuctions",{props:t,unprocessedData:r}),this.shouldTrackPrebidAuctions?Promise.all([this.permutive.track("PrebidAuctions",t,{unprocessedData:r}),this.unprocessedPrebidAuctions.reset()]).then((()=>this.logDebug("Tracked auctions",{unprocessedData:r}))):(this.logDebug("Skipping tracking unprocessed PrebidAuctions",{unprocessedData:r}),this.unprocessedPrebidAuctions.reset())})))),(e=>{const t=`Failed to track unprocessed PrebidAuctions. Got ${(0,n.w)(e)}`;return this.reportError(t),(0,n.w)(t)})),(e=>e()))}setupUnprocessedPrebidAuctions(){const e=new d.b(1e3,2500),t=this.putOrResetUnprocessed.bind(this);return e.schedule(t)}async storeAuctionsAsUnprocessed(e){let{debounced:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logDebug("Store auctions as unprocessed",{auctionsToStore:e,debounced:t});const r=c.Y3((async()=>{const t=(0,l.qh)(e??{}).map((e=>{let[t,r]=e;return{...r,auction_id:t}})),r=await this.clientContext.getClientAsync();return(0,o.zG)(t,a.DT((e=>e.length>0)),a.UI((e=>({client:r,props:this.makePrebidAuctionProperties({auctions:e}),viewId:this.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}),n.w);return(0,o.zG)(r,c.EQ((e=>{this.reportError(`Failed to process auctions: ${e}`)}),(e=>{const r=this.debouncedPutOrResetUnprocessed(e);return t?r:Promise.all([this.putOrResetUnprocessed(e),r])})),(e=>e()))}mapBidProperties(e,t){return{ad_id:t.adId,ad_unit_code:t.adUnitCode,advertiser_domains:(0,f.Cg)(t),advertiser_id:(e=>{const t=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||e?.meta?.buyerId||e?.meta?.advertiserId;return t?`${t}`:void 0})(t),advertiser_name:(e=>{const t=e.meta?.clickUrl||e.adomain?.[0]||e.meta?.advertiserName;return t?`${t}`:void 0})(t),bid_available:"string"==typeof t.statusMessage&&t.statusMessage.indexOf("empty")<0,bidder:t.bidder,bidder_timeout:(0,l.rH)(e.bidderTimeout),brand_id:(e=>{const t=e.meta?.brandId;return t?`${t}`:void 0})(t),brand_name:(e=>e.meta?.brandName)(t),cpm:(0,f.Qd)(t),creative_id:`${t.creativeId}`,deal_id:(0,f.$7)(t),dsp_id:(0,f.cs)(t),hb_pb:t.adserverTargeting?.hb_pb,height:(0,l.rH)(t.height),request_timestamp:t.requestTimestamp,response_timestamp:t.responseTimestamp,time_to_respond:t.timeToRespond,width:(0,l.rH)(t.width)}}collectAdUnitCodes(e){const t=new Set;return e.reduce(((e,r)=>{let{adUnitCode:n}=r;return!n||t.has(n)||(t.add(n),e.push({ad_unit_code:n})),e}),[])}mapToStagedAuctions(e){return s.Y3((()=>{const{auctionId:t,bidsReceived:r,noBids:n}=e,i=this.collectAdUnitCodes(r),s=this.collectAdUnitCodes(n);return this.stagedAuctions[t]={bids:i,no_bids:s},this.logDebug("Added auction",this.stagedAuctions[t]),this.stagedAuctions[t]}),(e=>{const t=`Failed to map auction. Got ${(0,n.w)(e)}`;return this.reportError(t),(0,n.w)(t)}))}findAuction(e){return(0,o.zG)(this.getStagedAuction(e.auctionId),s.vx((()=>this.getTrackableAuction(e.auctionId))),s.vx((()=>this.mapToStagedAuctions({auctionId:e.auctionId,bidsReceived:[e],bidderRequests:[],noBids:[]}))))}setBidByOperation(e,t,r){const a=e=>e.hasOwnProperty("ad_id"),c=(r,c)=>{const u=e=>e.ad_id===r.adId,l=e=>e.ad_unit_code===r.adUnitCode,[d,f]=(0,o.zG)(c,(0,i.uK)((e=>a(e)&&u(e)&&l(e))),(e=>[e.left,e.right]));this.logDebug(`Bids for ${t}`,{nonMatching:d,matching:f});const p=(0,o.ls)(s.DT((e=>1===e.length),(()=>new Error("No matching bids"))),s.UI((e=>{let[r]=e;return this.logDebug(`Found bid for ${t}`,{found:r}),{found:r,others:d}}))),g=s.DT((e=>e.length<=1),(()=>new Error("Ad ID is not unique"))),h=(0,o.ls)(p,s.vx((()=>s.Y3((()=>{const n=this.mapBidProperties(e,r),i=d.filter((e=>!(!l(e)||!a(e))||!l(e)));return this.logDebug(`Creating bid for ${t}`,{created:n,others:i}),{found:n,others:i}}),(e=>(0,n.w)(`Failed to create bid. Got ${(0,n.w)(e)}`))))));return(0,o.zG)(f,g,s.tS(h))};return(0,o.ls)((e=>(0,o.zG)(this.findAuction(e),s.tS((i=>(0,o.zG)(c(e,i.bids),s.tS((e=>{let{found:t,others:i}=e;return s.Y3((()=>({updated:r(t),others:i})),n.w)})),s.UI((e=>{let{updated:r,others:n}=e;const s=[r,...n];i.bids=s,this.logDebug(`Bid operation ${t} successful`,r,s)}))))))),s.Vn((e=>{const r=`Failed bid operation ${t}. Got ${(0,n.w)(e)}`;return this.reportError(r),(0,n.w)(r)})))}setBidToWon(e,t){return this.setBidByOperation(e,"setWon",(e=>({...e,winning_bid:!0})))(t)}setBidToRendered(e,t){return this.setBidByOperation(e,"setRendered",(e=>({...e,winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(t)}promoteAuctionToTrackable(e){let{auctionId:t}=e;const r=this.stagedAuctions[t];if(r){if(this.trackableAuctions[t])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[t]});this.trackableAuctions[t]=r,delete this.stagedAuctions[t],this.logDebug("Auction promoted to trackable",{auctionId:t,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,l.PQ)((async()=>{if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const e=this.trackableAuctions;this.trackableAuctions={},await this.trackPrebidAuctions(e),await this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}),{timeout:5e3})}async trackPrebidAuctions(e,t){const r=(0,l.qh)(e).map((e=>{let[t,r]=e;return{...r,auction_id:t}}));r.length?(await this.permutive.track("PrebidAuctions",this.makePrebidAuctionProperties({auctions:r}),t),this.logDebug("Tracked auctions",{auctions:r})):this.logDebug("No auctions to track")}makePrebidAuctionProperties(e){return{aggregations:e,isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"}}getStagedAuction(e){return(0,o.zG)(this.stagedAuctions[e],s.DT(Boolean,(()=>new Error("Staged auction not found"))),s.Vn((t=>(this.logError(t,{auctionId:e}),t))))}getTrackableAuction(e){return(0,o.zG)(this.trackableAuctions[e],s.DT(Boolean,(()=>new Error("Trackable auction not found"))),s.Vn((t=>(this.logError(t,{auctionId:e}),t))))}reportError(e){return this.api.reportError(`${this.prefix} ${e}`)}logInfo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(this.prefix,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}},3994:(e,t,r)=>{r.r(t),r.d(t,{SspAddon:()=>I,filterCohortsUsedInTargeting:()=>b,load:()=>w,realService:()=>v,sspService:()=>_,stubService:()=>m});var n=r(8683),i=r(8559),s=r(2169),o=r(7812),a=r(7313),c=r(514),u=r(8236),l=r(132),d=r(2161),f=r(281),p=r(2945),g=r(229),h=r(7707);const _=v;function m(e,t,r,i,s){return a.of({cohorts:u.YP,externalData:{[S]:n.a9(u.YP)}})}function v(e,t,r,_,m){const v=(0,i.Hn)(y),w=v("ssps",o.cS),I=v("all_cohort_mapping",{}),k=w.includes("google_pps"),E=v("affinity_enabled",!1);return(0,s.zG)(m.consent,a.KD([[e=>!e,a.of(d.of(u.YP))],a.K4((i=>{let{stopped:a}=i;_.debug("[ssp] Addon started, affinity enabled: ",E);const c=(0,s.zG)(m.cohorts,d.UI((0,s.ls)(o.hX((e=>e in I)),o.tS((e=>I[e]))))),f=(0,s.zG)(n.vP(m.url,a),n.UI((e=>{let[t,r]=e;return(0,s.zG)(t,u.hX((()=>E&&!r)))})),n.UI(u.UI((r=>l.Y3((()=>e.req({method:"GET",url:t.getEndpointUrl("/standard-audiences/v1/affinity",u.YP,[["url",r]]),withCredentials:!1,dataType:"json"})),String)))),n.UI(u.UI(l.Vn((0,h.bw)((e=>r(`Failed to fetch affinity cohorts: ${e}`)))))),n.UI(u.UI(l.UI((e=>e.affinity_values)))),n.UI(u.fS((()=>l.of(o.bM())))),n.VS(d.oF(o.bM())));return(0,s.zG)((0,p.gz)(d.G5)(c,f),d.UI(o.xH),d.UI((e=>[...new Set(e)])),d.UI(u.G))}))]),a.UI(n.xH),a.UI((e=>({cohorts:(0,s.zG)(e,d.UI(u.fS((()=>o.bM()))),c.zh((e=>e),(e=>"dfp"===e.id&&k?u.G(b):u.YP)),u.G),externalData:{[S]:(0,s.zG)(f.Vh(e),n.UI(u.Uo),n.UI(u.xH),n.UI(u.UI(b)),n.D8(u.Eh(o.Eh(g.Eq))),n.UI(u.UI((e=>({ssps:w,cohorts:e})))))}}))))}const b=e=>[...new Set(e.map((e=>e.replace(/-ac$/,"").replace(/-aw$/,"").replace(/-c$/,""))))],y="ssp",w=e=>{(0,i.Hn)(y)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[y,{}]})};class I{constructor(e){}}const S="_pssps"},1844:(e,t,r)=>{r.d(t,{GL:()=>a,HJ:()=>c,N1:()=>d,NC:()=>n,RP:()=>i,SF:()=>f,UM:()=>u,ho:()=>g,iE:()=>p,t_:()=>l});const n=performance.now(),i=(new Date).getTime();let s=[],o=!1;const a=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&s.length<1e4&&s.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},l=e=>new Promise(((t,r)=>e.then(a(t),a(r)))),d=e=>()=>l(e()),f=e=>{const t=d(e);return()=>new Promise((e=>c((()=>e(t())))))},p=()=>{const e=s;return s=[],e},g=e=>{o=e}},4680:(e,t,r)=>{r.d(t,{G5:()=>d,OZ:()=>u,S3:()=>c,dO:()=>l,of:()=>o});var n=r(7226),i=(r(1844),r(3643));const s="Eventual",o=e=>[e,n.of(e)],a=e=>i.Pd((t=>n.ap(e[1])(t)),(t=>t(e[0]))),c=i.li,u=i.Yg,l={URI:s,map:(e,t)=>(e=>i.Pd(n.UI(e),e))(t)(e)},d={URI:s,map:l.map,ap:(e,t)=>a(t)(e)};l.map},2161:(e,t,r)=>{r.d(t,{G5:()=>m,oF:()=>h,UI:()=>p,of:()=>f});var n=r(2945),i=r(6289),s=r(8683),o=r(7125),a=r(7144),c=r(4680);const u=e=>c.of(a.F2(e));c.dO,c.G5;var l=r(281);const d="RefEventualEither",f=e=>s.a9(u(e)),p=i.UI(l.dO,a.dO),g=n.ap(l.G5,a.G5),h=e=>l.fF(a.F2(e)),_={URI:d,map:(e,t)=>p(t)(e)},m={URI:d,map:_.map,ap:(e,t)=>g(t)(e)}},281:(e,t,r)=>{r.d(t,{G5:()=>h,UI:()=>d,Vh:()=>p,dO:()=>g,fF:()=>u,of:()=>l});var n=r(8683),i=r(4680),s=r(2169),o=r(7226),a=r(8236);const c="RefEventual",u=(i.of,e=>t=>{const r=t();return(0,s.zG)(n.fF((()=>r)),n.UI(a.fS((()=>e))),n.UI((e=>(0,s.bc)(e,(()=>r)))))}),l=e=>n.a9(i.of(e)),d=e=>t=>n.vP((0,s.zG)(t,n.UI(i.S3),n.UI(e)),(0,s.zG)(t,n.UI(i.OZ),n.UI(o.UI(e)))),f=e=>t=>n.vP((0,s.zG)(n.vP((0,s.zG)(e,n.UI(i.S3)),(0,s.zG)(t,n.UI(i.S3))),n.UI((e=>{let[t,r]=e;return r(t)}))),(0,s.zG)(n.vP((0,s.zG)(e,n.UI(i.OZ)),(0,s.zG)(t,n.UI(i.OZ))),n.UI((e=>{let[t,r]=e;return o.ap(t)(r)})))),p=n.UI(i.S3),g=(i.OZ,{URI:c,map:(e,t)=>d(t)(e)}),h={URI:c,map:g.map,ap:(e,t)=>f(t)(e)};g.map},8683:(e,t,r)=>{r.d(t,{ap:()=>y,a9:()=>m,Ue:()=>g,gS:()=>h,D8:()=>U,VS:()=>w,xH:()=>I,En:()=>_,p4:()=>z,fF:()=>G,UI:()=>b,u4:()=>S,Rp:()=>k,vP:()=>E,bw:()=>D,yY:()=>x,YP:()=>v});var n=r(5654),i=r(7144),s=r(2169),o=r(8236),a=r(7812),c=r(7707);function u(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const s=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,s];return()=>{r=r.filter((e=>e!==s))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function d(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,s]=f(n(),(e=>"might_change"!==e&&t())),o=()=>s(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":s("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=u(e),s={state:e,onStateChange:i},o=l("Disallowed recursion in Branch.",(e=>{if("final"===s.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{t?.(e),s.state=e,n(e)}finally{"final"===e&&r()}}));return[s,o]}var p=r(4694);function g(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,s]=C(t,e);return[i,e=>r((()=>s(e))),n]}function h(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,s]=g(r());return[n,n=>{t=e.concat(t,n),i(r())},s]}function _(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,i)=>(0,s.zG)(r,b(p.UI((e=>{const r=t.concat(n[i],e);return n=n.map(((r,n)=>n===i?t.empty:t.concat(r,e))),r}))))))}}function m(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function v(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function b(e,t){if(t){const[r,n]=C(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>b(e,t)}const y=e=>w((t=>b(t)(e)));function w(e,t){return t?I(b(e,t)):t=>I(b(e,t))}function I(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,s]=f(n),o=e=>t=>{switch(t){case"final":s(e().state);break;case"might_change":s("might_change");break;case"nominal":"might_change"===e().state?s("might_change"):s("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const a=o((()=>e));let c=r.onStateChange(a);return[i,e=>{r=e,c(),c=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,i]=C(t,e.current.current);let s=e.current.onChange(i);return e.onChange((e=>{s(),s=e.onChange(i),r(e.branch),i(e.current)})),n}function S(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return b((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}function k(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return b((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return b((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function E(){if(0===arguments.length||R(arguments.length<=0?void 0:arguments[0]))return P(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,s.zG)(Object.values(e),(e=>P(...e)),b((0,s.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return m([]);if(1===t.length)return b((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,c.vg)("branch")),s=()=>{n&&(n=!1,u(t.map((e=>e.current))))},o=d(i,s),[a,u]=C(o,t.map((e=>e.current)));return a}function G(e){const[t,r,n]=g(o.YP);return e().then((0,s.ls)(o.G,r,n)),t}const x=e=>()=>o.pC(e.current)?Promise.resolve(e.current.value):new Promise((t=>{const r=(0,s.zG)(e,v(o.UI((e=>{r(),t(e)}))))}));function z(e){const[t,r,a]=g(o.YP);return e.then(i.F2).catch((0,s.ls)(n.w,i.t$)).then((0,s.ls)(o.G,r,a)),t}function U(e){const t=e.hasOwnProperty("equals")?e.equals:e;return S(((e,r)=>t(e,r)?e:r))}function D(e){return t=>(v(e)(t),t)}function C(e,t){if("final"===e.state)return[m(t),()=>{}];const r=u(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function R(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},7313:(e,t,r)=>{r.d(t,{Hr:()=>h,K4:()=>c,KD:()=>_,UI:()=>d,ak:()=>g,bw:()=>f,dQ:()=>u,of:()=>l,vP:()=>p});var n=r(8683),i=r(2169),s=r(7707),o=r(6450),a=r(8236);const c=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),u=i.yR,l=(0,i.ls)(i.a9,c),d=e=>t=>(0,i.ls)(t,(0,s.rO)({value:e})),f=e=>t=>(0,i.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function p(e){return t=>{let{previousState:r,...s}=t;const a=b(r)?r:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:a[e],...s}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function g(e,t){return r=>(0,i.ls)((0,s.rO)({previousState:v}),(s=>{const o=r(s),a=t(o.value)({...s,previousState:s.previousState[e]});return{value:(0,i.zG)([o.value,a.value],(t=>{let[r,n]=t;if(!b(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,a.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!b(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const h=(e,t)=>d((r=>({...r,[e]:t(r)})));const _=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],o=[...t.map((e=>{let[t,r]=e;return[t,(0,i.a9)(r)]})),(0,i.a9)(r)];return a=(0,s.lo)(o),(0,i.ls)(n.UI(a),m);var a};function m(e){const t=(0,i.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:s,stopped:o,...c}=r;return(0,i.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[u,l]=r;return(0,i.zG)(e,a.UI((e=>e.state.current)),a.fS((()=>s)),(e=>u({previousState:e,stopped:(0,i.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...c})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function v(e){return b(e)?e:{}}function b(e){return"object"==typeof e&&null!==e}},8180:(e,t,r)=>{r(9607)},3075:(e,t,r)=>{r.d(t,{lg:()=>h,Bt:()=>m});var n=r(9912),i=r(2169),s=r(8236),o=r(229),a=r(7707);var c=r(7144);class u{userId;network;api;logger;tcf;constructor(e,t,r,n,i){this.userId=e,this.network=t,this.api=r,this.logger=n,this.tcf=i}tag="appnexus";ttlInSeconds=86400;usedForThirdPartyData=!0;invalidAliases=["","0","-1"];logPrefix="identities[appnexus]:";async getId(){if((0,a.G6)(navigator.userAgent))return this.logger.debug(this.logPrefix,"skipped for Safari"),{type:"skipped"};const e=await this.tcf.getStatusOrAbortOnTimeout(2e3),t=(0,i.zG)(this.getGDPRParams(e),c.fS((()=>"")),(e=>`https://ib.adnxs.com/getuidj${e.length>0?`?${e}`:""}`));try{this.logger.debug(this.logPrefix,"start HTTP request");const e=await this.api.appnexus(t);return this.logger.debug(this.logPrefix,"end HTTP request"),{type:"attempted",result:(0,i.zG)(s.Y3((()=>e.uid)),s.tS(s.ij),s.hX((e=>this.isValidAlias(e))))}}catch(e){return this.logger.warn(this.logPrefix,"Failed to fetch id",e),{type:"attempted",result:s.YP}}}getGDPRParams(e){return c.Y3((()=>{if("missing"===e.type||"loaded"===e.type&&!e.data.gdprApplies)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===e.type?e.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{config;network;api;userId;logger;url;resetUrl;constructor(e,t,r,n,i){this.config=e,this.network=t,this.api=r,this.userId=n,this.logger=i,this.url=`https://e1cef1f0-495f-4973-ba1c-880786e73a66.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}tag="pxid";ttlInSeconds=86400;usedForThirdPartyData=!1;getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,a.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,a.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var d=r(8683),f=r(6450),p=r(5086);const g=p.ff((e=>void 0===e));class h{metrics;trace;permutiveData;identityProviderEnv;logger;ref;setReady;thirdParty;rawRef;identityMapRef;setIdentityMap;providers={};static emailSHA256Regex=/^[a-f0-9]{64}$/;constructor(e,t,r,n,c){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=c;const u=this.getCachedIdentitiesAndMigrateIfRequired(),[l,p]=d.Ue(u);this.identityMapRef=l,this.setIdentityMap=p,l.onChange((0,i.ls)(f.z7((e=>!_.has(e))),(0,a.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.rawRef=(0,i.zG)(l,d.UI((0,i.ls)(f.UI((e=>e.value)),f.hX(g))),d.D8(f.Eh(o.Eq)));const[h,m]=d.Ue(!1);this.ref=(0,i.zG)(d.vP(h,this.rawRef),d.UI((e=>{let[t,r]=e;return(0,i.zG)(r,(0,s.DT)((()=>t)))}))),this.setReady=()=>{e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"identity_ready",time_origin:"sdk_init"}),m(!0)},this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>{return t=e.config,r=e.network,n=e.api,i=e.userId,o=e.logger,(0,s.G)(new l(t,r,n,i,o));var t,r,n,i,o}},{load:e=>{return t=e.userId,r=e.network,n=e.api,i=e.logger,o=e.tcf,s.G(new u(t,r,n,i,o));var t,r,n,i,o}},{load:e=>(e.cookies,e.messages,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],o=(0,n.oA)(r.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,a.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,pxid:1,appnexus:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:i}]=e;return{tag:t,...r?{id:r}:{},...n?{expiry:n}:{},...void 0!==i?{priority:i}:{}}})),i=r.filter((e=>((e,t)=>!!e.id&&!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),a=r.filter((e=>((e,t)=>!!e.id&&!!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,n.DZ)((e=>(0,s.ij)(e.priority)))(i),u=c.length>0?Math.max(...c):0,l=i.map((e=>void 0!==e.priority?{...e,priority:e.priority}:{...e,priority:u+1})),d=a.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+v}:{tag:e.tag,id:e.id,priority:u+b}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>"string"==typeof e.id&&"string"==typeof e.tag,s=e=>"email_sha256"!==e.tag||h.emailSHA256Regex.test(e.id);return"string"==typeof e?(a=e).length>0?{left:[],right:[{id:a,tag:"default"}]}:{left:[t],right:[]}:Array.isArray(e)?(o=e,(0,i.zG)(o,n.tV((0,i.ls)(c.DT(r,(()=>t)),c.Y$(s,(()=>"Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")))))):{left:[t],right:[]};var o,a}extractIdentifyFromQueue(e){let{global:t}=e;const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),n=(e,i)=>{if(e<0)return i;const s=t.q.splice(e,1)[0],o=this.parseCustomerDefinedIdentities(s.arguments[0]);return n(r(),{left:i.left.concat(o.left),right:i.right.concat(o.right)})},{left:i,right:s}=n(r(),{left:[],right:[]});return i.forEach((e=>this.logger.warn("Invalid identity provided during init",e))),s}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:r,id:n,expiry:i,priority:s}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]={...n?{value:n}:{},...i?{expiry:i}:{},...void 0!==s?{priority:s}:{}},e}),{}),r=this.rawRef.current;this.setIdentityMap({...this.identities,...t});const n=this.rawRef.current;return{identifyRequestRequired:()=>!f.xb(n)&&!f.Eh(o.Eq).equals(r,n)}}async reset(){this.setIdentityMap({}),await Promise.all(Object.values(this.providers).map((e=>e.reset())))}getFilteredIdentities(e){return(0,a.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:s}]=e;return(0,i.bc)(t,{id:r,...n?{expiry:n}:{},...void 0!==s?{priority:s}:{}})})))}shouldAskForNewIdentity(e){const t=(0,s.ij)(this.identities?.[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(t)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,s.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,s.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,a.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!_.has(t)}))))(this.permutiveData.getData("identities")||{})}}const _=new Set(["public","email","email_md5","ip_address"]),m=(e,t,r,i,s)=>{const a=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!w[e]||(0,n.jV)(o.Eq)(t,r).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":a,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,n.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":a,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},d=u[e]||l[t];return!!d&&d(s,r,i)},v=2,b=3,y={},w={}},2335:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},6834:(e,t,r)=>{r.d(t,{u6:()=>s});var n=r(7313);r(8683),r(7707),r(229);const i={prebid:{onReady:()=>({})}},s=e=>n.of(i)},1497:(e,t,r)=>{r.d(t,{CL:()=>a,EW:()=>c,PH:()=>o,eV:()=>i,jH:()=>u,t2:()=>s});var n=r(8559);const i=(0,n.MU)("track_form_submission",!0),s=((0,n.MU)("track_pageview_complete",!0),(0,n.MU)("track_pageview_engagement",!0)),o=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),a=(0,n.$S)("track_slot_rendered",!0),c=(0,n.$S)("track_slot_viewable",!1),u=(0,n.$S)("track_targeting_keys",!1)},159:(e,t,r)=>{r.d(t,{v:()=>o});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,s,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=s,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(8559);const s={dfp:{dfp:[114964,155496,130690,148310,148566,148309,115376,172118,148860,153501,115391,148980,128007,147711,130226,137185,148976,115389,115052,128016,130692,137184,153499,115386,115077,148422,128012,155857,115396,128003,174011,130220,166706,153486,130684,115385,115375,148311,148423,128006,148312,115064,132127,128018,147710,115055,148975,115056,128008,130228,128014,115078,148972,128631,128013,136100,114962,148864,114963,115206,115054,153484,130221,128004,128488,148973,130683,122797,130215,128010,174010,153500,114954,115395,107958,153458,151166,148567,130694,130216,148313,128489,115390,130689,139765,148425,130218,131559,114957,131557,128011,130217,148565,148424,115397,148979,131558,147712,115051,130688,130691,153505,115379,153502,115203,130222,153905,155142,128002,155497,114956,114948,115205,139767,115394,174012,115398,115063,127892,165230,137195,148978,147709,115377,115392,130687,115204,128009,148977,128633,115053,115380,155141,115378,137194,148981,122798,130682,130693,130219,130227,153485,128001,148564,115393,128017,128015,128632,114965,153504,153506,130223,137193,147708,148563,139766,175948,177390,179312,179313,179314,179315,179316,179317,179322,179320,179323,183713,183714,183723,183909,183931,183935,185734,185735,185736,185737,185738,185739,185740,185741,185742,185743,185744,185745,185746,185747,185748,185749,185750,185751,185752,185753,185754,185755,185756,185757,185758,185759,185760,185761,185762,185763,185764,185765,185766,185767,187163,187343,187995,188028,188130,188131,193394,193435,194009,194011,194385,213221,197117,239975,239440,240543,240900,240953,241455,242474],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],adswizz_keyvalue:[],curation_platforms:{115203:["dovi"],115204:["dovi"],115389:["dovi"],115393:["dovi"],128002:["dovi"],128011:["dovi"],153499:["dovi"],240543:["cyfk"],adv:["adv"],caay:["caay","caay"],bzre:["bzre"],bzyb:["bzyb"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return s[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},8559:(e,t,r)=>{r.d(t,{$S:()=>o,Hn:()=>i,MU:()=>s});const n={standard_cohorts:{auto_init:!0,standard_audiences:{affinity_enabled:!0},activationConfigs:[]},contextual_data:{auto_init:!0,activationConfigs:[]},ix__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"ix",type:"curation_platform",activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["appnexus","ix","msft","openx","pubmatic"],activationConfigs:[]},piano:{auto_init:!1,activationConfigs:[]},prebid_analytics:{auto_init:!0,event_sampling_config:{prebid_auctions:{probability_threshold:.9}},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"9442",activationConfigs:[]},secure_signals:{auto_init:!0,activation_method:"google_secure_signals",type:"curation_platform",public_key:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCr9hacCVXLRXBpawZHZd+7u/Cvl/lyVoPxavJ2P6DWR0YW5j3gtjALyf7YXnHN6grWSTvylg7XdCPLED7yEyFa1qU8WL3SJ7T1lqL57BvK9lRzW2kitgZ+lRPMNRCjBD0mNCgfty/luM5E2YWgQx2E6NxgZFAm4GqC8m/HLTx5MQIDAQAB",activationConfigs:[]},contextual:{auto_init:!0,script_deployed:!0,activationConfigs:[]},publishers:{auto_init:!1,add_alchemy_taxonomy:!0,add_alchemy_entities:!1,activationConfigs:[]},geoip:{auto_init:!1,activationConfigs:[]},pubmatic:{auto_init:!0,dpid:"1158",activationConfigs:[{id:"d354ef5a-3c2c-4a58-8fc7-084580a67634",short_id:"183909",tt:"EveryTime",sc:183909,c:{},wc:{dpid:"1158"}},{id:"bfc7082e-e033-4609-b07d-73870abc6539",short_id:"153504",tt:"EveryTime",sc:153504,c:{},wc:{dpid:"1158"}}]},clean_room:{auto_init:!0,default_config:{},api_version:"v4",pass_cohorts_to_prebid:!0,cohort_ssp_config:[["brrd",["6301116389"]],["brrp",["6301116392"]],["bsjo",["6353064435"]],["bska",["6363477062"]],["byfi",["6755217812"]],["bykc",["6759626139","6763023740"]]],activationConfigs:[]},google_pps__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"google_pps",type:"curation_platform",activationConfigs:[]},google_ss__curation_platform:{auto_init:!0,activation_method:"google_secure_signals",type:"curation_platform",activationConfigs:[]},ssp:{auto_init:!0,ssps:["ix","pubmatic","google_pps","appnexus","openx"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},all_cohort_mapping:{1e7:["bgyz"],10000001:["bhgp"],10000002:["bhhc"],10000003:["bhhg"],10000004:["bhhk"],10000005:["bhhp"],10000006:["bhhv"],10000007:["bhhy"],10000008:["bhie"],10000010:["bhis"],10000011:["bhiz"],10000012:["bhji"],10000013:["bhjq"],10000014:["bhka"],10000015:["bhkl"],10000016:["bhkr"],10000017:["bhky"],10000018:["bhlg"],10000019:["bhli"],10000020:["bhlo"],10000021:["bhlp"],10000022:["bhnd"],10000023:["bhnl"],10000024:["bhnp"],10000025:["bhnw"],10000026:["bhoj"],10000035:["bgzb"],10000036:["bhgq"],10000037:["bhgs"],10000038:["bhgw"],10000039:["bhgy"],10000040:["bhgz"],10000041:["bhhe"],10000042:["bhhh"],10000043:["bhhw"],10000044:["bhhx"],10000045:["bhhz"],10000046:["bhia"],10000047:["bhif"],10000048:["bhig"],10000049:["bhii"],10000050:["bhij"],10000051:["bhik"],10000052:["bhim"],10000053:["bhip"],10000054:["bhit"],10000055:["bhiu"],10000056:["bhiv"],10000057:["bhiy"],10000058:["bhjm"],10000059:["bhjr"],10000060:["bhjs"],10000061:["bhjw"],10000062:["bhjx"],10000063:["bhkm"],10000064:["bhir"],10000065:["bhko"],10000066:["bhkp"],10000067:["bhkq"],10000068:["bhkz"],10000069:["bhla"],10000070:["bhlb"],10000071:["bhle"],10000072:["bhlf"],10000073:["bhlq"],10000074:["bhlt"],10000075:["bhlu"],10000076:["bhlw"],10000077:["bhlx"],10000078:["bhly"],10000079:["bhmb"],10000080:["bhmi"],10000081:["bhmj"],10000082:["bhml"],10000083:["bhmp"],10000084:["bhmr"],10000085:["bhmw"],10000086:["bhmz"],10000087:["bhne"],10000088:["bhnf"],10000089:["bhni"],10000090:["bhnn"],10000324:["bhhj"],10000325:["bhhi"],10000327:["bhku"],10000328:["bhkt"],10000329:["bhkw"],10000330:["bhkv"],10000687:["bgzc"],10000688:["bgza"],10000689:["bhha"],10000690:["bhgt"],10000691:["bhgx"],10000692:["bhgv"],10000693:["bhgr"],10000694:["bhgu"],10000695:["bhhb"],10000696:["bhhd"],10000697:["bhhf"],10000698:["bhhl"],10000699:["bhho"],10000700:["bhhm"],10000701:["bhhn"],10000702:["bhhq"],10000703:["bhht"],10000704:["bhhu"],10000705:["bhhs"],10000706:["bhhr"],10000707:["bhib"],10000708:["bhid"],10000709:["bhic"],10000710:["bhio"],10000711:["bhin"],10000712:["bhil"],10000713:["bhiq"],10000714:["bhih"],10000715:["bhiw"],10000716:["bhix"],10000717:["bhja"],10000718:["bhjc"],10000719:["bhjd"],10000720:["bhje"],10000721:["bhjf"],10000722:["bhjb"],10000723:["bhjg"],10000724:["bhjh"],10000725:["bhjo"],10000726:["bhjk"],10000727:["bhjn"],10000728:["bhjj"],10000729:["bhjl"],10000730:["bhjy"],10000731:["bhju"],10000732:["bhjv"],10000733:["bhjz"],10000734:["bhjt"],10000735:["bhkj"],10000736:["bhkk"],10000737:["bhki"],10000738:["bhkd"],10000739:["bhkc"],10000740:["bhkf"],10000741:["bhkh"],10000742:["bhkb"],10000743:["bhkg"],10000744:["bhke"],10000745:["bhjp"],10000746:["bhkn"],10000747:["bhkx"],10000748:["bhks"],10000749:["bhld"],10000750:["bhlc"],10000751:["bhlh"],10000752:["bhlk"],10000753:["bhlj"],10000754:["bhll"],10000755:["bhlm"],10000756:["bhlv"],10000757:["bhna"],10000758:["bhmv"],10000759:["bhmt"],10000760:["bhmy"],10000761:["bhmc"],10000762:["bhmo"],10000763:["bhls"],10000764:["bhmq"],10000765:["bhme"],10000766:["bhmh"],10000767:["bhlz"],10000768:["bhlr"],10000769:["bhnb"],10000770:["bhmk"],10000771:["bhmu"],10000772:["bhmx"],10000773:["bhmg"],10000774:["bhmd"],10000775:["bhmf"],10000776:["bhnc"],10000777:["bhmn"],10000778:["bhmm"],10000779:["bhma"],10000780:["bhms"],10000781:["bhng"],10000782:["bhnj"],10000783:["bhnh"],10000784:["bhnk"],10000785:["bhno"],10000786:["bhnm"],10000787:["bhnu"],10000788:["bhnv"],10000789:["bhns"],10000790:["bhnt"],10000791:["bhnq"],10000792:["bhnr"],10000793:["bhob"],10000794:["bhny"],10000795:["bhod"],10000796:["bhoh"],10000797:["bhog"],10000798:["bhnz"],10000799:["bhoa"],10000800:["bhoe"],10000801:["bhnx"],10000802:["bhoc"],10000803:["bhof"]},affinity_enabled:!0,activationConfigs:[]},pubmatic__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"pubmatic",type:"curation_platform",activationConfigs:[]},xandr__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"appnexus",type:"curation_platform",activationConfigs:[]},openx__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"openx",type:"curation_platform",activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},privacy_sandbox_topics:{auto_init:!0,prebid:!0,topics_iframe_url:"https://cdn.permutive.app/topics.html",activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>t?.[e]??r},s=i("web"),o=i("dfp");i("facebook_pixel_v2")},6051:(e,t,r)=>{r.d(t,{J:()=>c});var n=r(2169),i=r(8236),s=r(5265);const o=e=>t=>class extends t{key=(()=>e)();put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,n.zG)(class{db;constructor(e){this.db=Promise.resolve((0,s.E)(e.namespace,e.logger,e.consent))}},o(e));class c extends(a("permutive-unprocessed-pba")){constructor(e){super(e)}}},750:(e,t,r)=>{r.d(t,{LP:()=>s,dG:()=>n,eP:()=>i});const n=4096,i=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,s="Cookie is missing required parameters."},7943:(e,t,r)=>{r.d(t,{Eq:()=>d,X:()=>f,b:()=>l});var n=r(8683),i=r(7313),s=r(3689),o=r(229),a=r(3052),c=r(2169),u=r(8236);const l=()=>({country:void 0,continent:void 0,environment:"",events_count:0,os:"",sample_rate:0,sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0,user_agent:""}),d=s.n_({country:{equals:(e,t)=>e===t},continent:{equals:(e,t)=>e===t},environment:o.Eq,events_count:a.Eq,os:o.Eq,sample_rate:a.Eq,sdk_version:o.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq,user_agent:o.Eq}),f=e=>{const t=g(e.userId),r=(0,c.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),g),s=String(Math.random()),o=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),a={environment:"web",events_count:0,os:p(window.navigator.userAgent||""),sample_rate:e.sampleRate,sdk_version:"v20.61.0"+o,segments_count:0,user_agent:window.navigator.userAgent||""};return(0,c.zG)(i.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(s)),session_view_count:r(e.viewId)}),i.UI((0,c.ls)((t=>n.vP({...t,continent:(0,c.zG)(e.geoInfo,n.UI(u.tS((e=>u.ij(e.continent)))),n.UI(u.FS)),country:(0,c.zG)(e.geoInfo,n.UI(u.tS((e=>u.ij(e.country)))),n.UI(u.FS))})),n.UI((e=>({...a,...e}))))))},p=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},g=e=>t=>i.dQ((r=>{let{previousState:i}=r;const u=(0,c.zG)(n.vP(e,t),n.Rp(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(s.n_({scope:o.Eq,lastValue:o.Eq,count:a.Eq})));return{state:u,value:(0,c.zG)(u,n.UI((e=>e.count)))}}))},6999:(e,t,r)=>{r.d(t,{p:()=>f});var n=r(5654),i=r(2169),s=r(7707),o=r(7943),a=r(8683),c=r(7812),u=r(132),l=r(7226),d=r(1844);const f=e=>{let t=e.context.current;(0,i.zG)(e.context,a.D8(o.Eq),a.Rp((0,i.bc)(o.b(),o.b()),((e,t)=>{let[,r]=e;return(0,i.bc)(r,t)})),(e=>e.onChange((e=>{let[r,n]=e;o.Eq.equals({...r,continent:void 0,country:void 0},{...n,continent:void 0,country:void 0})||p({beacon:!1}),t=n}))));const r="[Metrics Reporter]";let f=!0;const p=async s=>{let{beacon:o}=s;const a=t,d=(0,i.zG)(u.of(e.metrics.consume()),u.Y$((()=>f),(()=>{})),u.tS(c.EQ((()=>u.of(void 0)),(t=>u.Y3((()=>(async(t,r)=>{if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})(o,{context:a,items:t})),(i=>{f=!1,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.logger.error(r,...n)}(`Failed to publish metrics ${(0,n.w)(i).message}`,t)}))))),l.UI(i.Q1));return d()},g=()=>{(0,d.HJ)((()=>p({beacon:!1}).finally((()=>g()))),5e3)};g(),(0,s.Bf)((()=>p({beacon:!0})),{capture:!1})}},2644:(e,t,r)=>{r.d(t,{u:()=>n});class n{trace;metrics;messages;_isRealtime=!1;_isReady=!1;constructor(e,t,r){this.trace=e,this.metrics=t,this.messages=r}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){const t=performance.now();this._isRealtime=!0,this.trace.measureSinceInit("sdk_realtime").finish(),this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{},t),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_realtime",time_origin:"sdk_init"},t),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){const e=performance.now();this._isReady=!0,this.trace.measureSinceInit("sdk_ready").finish(),this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{},e),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_ready",time_origin:"sdk_init"},e),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},4782:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(2169),i=r(951);class s{config;localStorage;logger;permutiveData;cookies;externalData;constructor(e,t,r,n,i,s){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.cookies=i,this.externalData=s}async reset(){return this.logger.log("Resetting State"),(0,n.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,i.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-prebid-id":!0,"permutive-events-cache":!0,_pssps:!0,_ppsts:!0,_pamzn_ids:!0,_padswizz:!0,_lr_env:!0,_lr_env_exp:!0,_lr_pairId:!0,_lr_pairId_exp:!0,_lr_atsDirect:!0,_lr_atsDirect_exp:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataMiscKey),this.localStorage.delete(this.config.permutiveDataQueriesKey)])),n.Q1)}}},9468:(e,t,r)=>{r.d(t,{u:()=>n});class n{permutiveData;permutiveReset;userId;viewId;logger;constructor(e,t,r,n,i){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.logger=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.logger.warn("getStateSizeInBytes needs to be updated to reflect new event persistence"),this.permutiveData.getDataSize()}reset(){return this.permutiveReset.reset()}}},42:(e,t,r)=>{r.d(t,{W:()=>n});class n{ref;constructor(e){this.ref=e}get(){return this.ref.current}}},5265:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(7455);const i=(e,t,r)=>{const i=window.localStorage;return(0,n.rK)(i,"[Local Storage]",e,t,r)}},6843:(e,t,r)=>{r.d(t,{u:()=>i});r(7626);var n=r(7455);const i=(e,t,r)=>{const i=window.sessionStorage;return(0,n.rK)(i,"[Session Storage]",e,t,r)}},7455:(e,t,r)=>{r.d(t,{oP:()=>c,rK:()=>d});var n=r(5654),i=r(842),s=r(7144),o=r(2169),a=r(7106);class c{storage;namespace;constructor(e,t){this.storage=e,this.namespace=t}async put(e,t){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}async get(e){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,i.A)(r)}async delete(e){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}async deleteStore(){}}const u=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(()=>(0,a.v)(super.put.bind(this),i,(()=>!r.current)))()}},l=e=>{const{logger:t,prefix:r,storage:i}=e;return e=>class extends e{isSupported=null;isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),n.w),(0,o.zG)(this.isSupported,s.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}async put(e,t){return(0,o.zG)(this.isStorageSupported(),s.EQ((e=>{throw e}),(()=>super.put(e,t))))}async get(e){return(0,o.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>super.get(e))))}async delete(e){return(0,o.zG)(this.isStorageSupported(),s.EQ(o.Q1,(()=>super.delete(e))))}async deleteStore(){return(0,o.zG)(this.isStorageSupported(),s.EQ(o.Q1,(()=>super.deleteStore())))}}},d=(e,t,r,n,i)=>new((0,o.zG)(c,l({logger:n,prefix:t,storage:e}),u({logger:n,consent:i,prefix:t})))(e,r)},9607:(e,t,r)=>{r.d(t,{SD:()=>f});var n=r(8236),i=r(7144),s=r(7812),o=r(6450),a=r(2169),c=r(8683),u=r(7707);const l={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468},d="[TCF]",f=(e,t)=>{const[r,f,g]=(0,a.zG)(c.Ue(n.YP),(e=>{let[r,...i]=e;return[(0,a.zG)(r,c.bw(n.UI((e=>{t.debug(d,`Status "${e.type}"`,e)})))),...i]})),h=e.__tcfapi;if(h){const e=new Set(["tcloaded","useractioncomplete"]);h("addEventListener",2,((r,i)=>{i?"loaded"===r.cmpStatus&&e.has(r.eventStatus)&&(t.debug(d,"TCF API loaded",r),f(n.G({type:"loaded",data:r}))):(t.warn(d,"TCF API failed to register event listener"),f(n.G({type:"aborted"})),g())}))}else t.debug(d,"TCF API missing from the page"),f(n.G({type:"missing"})),g();const[_,m]=(0,a.zG)(c.gS(s.uZ()),(e=>{let[t,r]=e;return[t,(0,a.ls)(s.of,r)]}));return(0,a.zG)(c.vP(r,_),c.bw((e=>{let[r,s]=e;return(0,a.zG)(r,n.UI((e=>{const r=s();switch(t.debug(d,`Processing ${r.length} listeners`,r),e.type){case"missing":r.forEach((r=>{let[n,i]=r;t.debug(d,`Invoking ${n} as TCF API missing`),i(e)}));break;case"aborted":r.forEach((e=>{let[r]=e;t.debug(d,`Invoking ${r} skipped as TCF API aborted`)}));break;case"loaded":r.forEach((r=>{let[s,c]=r;(0,a.zG)(p(e.data),n.EQ((()=>{t.debug(d,`Invoking ${s} as GDPR does not apply`),c(e)}),(r=>(0,a.zG)((0,a.zG)(s,i.EQ((e=>n.G(e)),(e=>(0,a.zG)(l,o.P5(e))))),n.tS((e=>(0,a.zG)(r,o.P5(e.toString())))),n.UI((r=>{r?(t.debug(d,`${s} has consent`,{vendor:s}),c(e)):t.debug(d,`${s} does not have consent`,{vendor:s})}))))))}))}})))}))),{registerVendorOnValidConsent:(e,t)=>m([(0,a.zG)(e,i.DT((e=>"string"==typeof e),(()=>e))),t]),getStatusOrAbortOnTimeout:e=>new Promise((t=>{const i=setTimeout((()=>t({type:"aborted"})),e);(0,a.zG)(r,c.UI(n.UI((e=>{clearTimeout(i),t(e)}))))})).then((0,u.bw)((e=>t.debug(d,"TCF status resolved as",{status:e})))),tcfApiStatusRef:r}},p=e=>e.gdprApplies?n.G(e.vendor.consents):n.YP},7806:(e,t,r)=>{r.d(t,{C:()=>a});var n=r(9912),i=r(2169);r(962),r(6834);const s=(o=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,1591))}],[],[],[],[],[],[{name:"clean_room",import:Promise.resolve().then(r.bind(r,6287))}],[{name:"prebid_analytics",import:Promise.resolve().then(r.bind(r,5029))}],[],[],[],[],[],[],[{name:"gam_log",import:Promise.resolve().then(r.bind(r,8884))}],[],[],[],[{name:"piano",import:Promise.resolve().then(r.bind(r,9772))}],[],[],[{name:"publishers",import:Promise.resolve().then(r.bind(r,2521))}],[{name:"pubmatic",import:Promise.resolve().then(r.bind(r,6295))}],[],[{name:"rubicon_ssp",import:Promise.resolve().then(r.bind(r,3904))}],[],[],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,1133))}],[],[],[{name:"ssp",import:Promise.resolve().then(r.bind(r,3994))}],[],[],[]],(0,i.zG)((0,n.xH)(o),(0,n.u4)({},((e,t)=>({...e,[t.name]:t.import})))));var o;const a=e=>{const t=Object.entries(s).map((async t=>{let[r,n]=t;return e.logger.log(`Loading addon ${r}`),(await n).load(e)}));return Promise.all(t)}},3717:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(7707);function i(){return(0,n.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1})}},9326:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>I,getCachedDFPSegments:()=>y});var n=r(5654),i=r(7144),s=r(2169),o=r(8236),a=r(7812),c=r(8683),u=r(8559),l=r(7707),d=r(3717);const f="_pdfps";r(750);var p=r(9912),g=r(229);let h=!1;let _=null;const m=(e,t)=>{const{logger:r}=t;(0,s.zG)(e,o.UI((e=>{!0!==h&&e.pubadsReady&&(_??=n=>{let{slot:i}=n;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,s.zG)(o(),(0,g.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;h||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),h=!0,r.debug("DFP has exceeded targeting limit"))})(t),_&&e.pubads().removeEventListener("slotRenderEnded",_),_=null)},e.pubads().addEventListener("slotRenderEnded",_))})))},v=(e,t,r,n,i)=>{const{logger:a}=t;m(e,t);(0,s.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:s}=e.pubads(),o=t("permutive")||[],c=t("prmtvctx")||[],u=(0,p.uK)((e=>i.has(e))),{left:l}=u(o),{left:d}=u(c),f=n.concat(l).concat("rts");if(a.debug("DFP setTargeting for 'permutive'",f),s("permutive",f),r.contextualCohorts){const e=r.contextualCohorts.concat(d).concat("rts");a.debug("DFP setTargeting for 'prmtvctx'",e),s("prmtvctx",e)}}))})(e))))};var b=r(1591);const y=e=>e.getExternalJsonData(f)||[],w=(e,t,r,i,s)=>{const{logger:o,externalData:a,api:c}=t;let l=r.map(String).concat(i.cloudCohorts);o.debug("DFP is updating with targeting values",l),v(e,t,i,l,s);try{a.setExternalJsonData(f,l)}catch(e){const t=(0,n.w)(e),r="DFP failed to set data. Got:";o.error(r,t),c.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,u.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:f,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(l)),o.debug("DFP live segments updated to",r),r},I=async e=>{const t={segments:{liveSegments:[],cloudCohorts:[],eligibleSegments:{}},getGAMKeyValues:()=>({permutive:""})};const{api:r,logger:n,activationManager:u,messages:p,externalData:g,nextGenOutput:h,userId:_,cookies:m}=e,v=await(0,d.t)();o.Wi(v)&&n.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(v,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));t.getGAMKeyValues=()=>{const n={...(0,s.zG)((0,b.generateProjectSpecificKVs)(e),i.Vn((e=>{var t;return t=e,r.reportError(`[DFP] ${t}`,_.get()),e})),i.fS((()=>({})))),permutive:t.segments.liveSegments.join(",")};return t.segments.contextualCohorts&&(n.prmtvctx=t.segments.contextualCohorts.join(",")),n};const y=new Set("rts");t.segments.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(u),Object.values(t.segments.eligibleSegments).forEach((e=>{y.add(String(e))}));const I=(0,s.zG)(h.queryLanguageCohorts.all,c.UI((e=>{return n.debug("DFP received QL segments",{qlSegments:e}),r=e,i=t.segments.eligibleSegments,r.filter((e=>e in i)).map((e=>i[e]));var r,i})),c.D8(l.cO)),S=(0,s.zG)(h.activations.dfp??c.a9(a.cS),c.UI((e=>e||a.cS))),k=h.activations.dfp_contextual??c.a9(void 0);return(0,s.zG)(c.vP(S,(0,s.zG)(k,c.UI((e=>e||[])))),c.UI(a.xH),c.Rp(a.bM(),((e,t)=>[...new Set([...e,...t])])),c.bw((e=>e.forEach((e=>y.add(e)))))),(0,s.zG)(c.vP(I,S,k),c.YP((0,l.Z_)(r,_,(r=>{let[i,s,o]=r;n.debug("DFP received updated cohorts",{filteredQlSegments:i,cloudCohorts:s,contextualCohorts:o}),t.segments.cloudCohorts=s,o&&(t.segments.contextualCohorts=o),t.segments.liveSegments=w(v,e,i,t.segments,y)})))),n.debug("DFP initialised with segments",t.segments),(0,s.zG)(v,o.UI((e=>{e.secureSignalProviders=e.secureSignalProviders||[],e.secureSignalProviders.push({id:"permutive-secure-signal",collectorFunction:c.yY(h.addons.secureSignal)})}))),p.on("permutive:reset",(0,l.Z_)(r,_,(()=>{n.debug("DFP received 'permutive:reset' event"),g.removeExternalData(f),m.deleteCookie(f)}))),p.emit("permutive:dfp:ready"),t}},1591:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>G,load:()=>f});var n=r(5654),i=r(7144),s=r(8236),o=r(2169),a=r(1497),c=r(8559),u=r(7707),l=r(9326);const d={},f=e=>{(0,c.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd.push((()=>p(e)))},p=e=>{b(e.permutive),googletag.cmd.push((()=>{y(e.permutive),w(e.permutive)})),window.addEventListener("message",h(e.permutive),!1),e.permutive.ready((0,u.Z_)(e.api,e.userId,(()=>S(e.metrics))),"realtime");k(e.externalData);(0,o.zG)(G(e),i.tS((e=>i.Y3((()=>(0,u.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get()))))},g=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:i}=e;return{advertiser_id:(0,u.rH)(t),campaign_id:(0,u.rH)(r),line_item_id:(0,u.rH)(n),creative_id:(0,u.rH)(i)}},h=e=>t=>{try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:n,creative_id:i,advertiser_id:s,order_id:o,line_item_id:a}=r?.data??{},c=g({lineItemId:a,advertiserId:s,campaignId:o,creativeId:i});let u;Object.keys(d).some((e=>{const{slot:t,creative_id:r}=d[e];if(t?.ad_unit_path===n&&r===c.creative_id)return u=d[e],!0})),u=u??{...c,is_empty:!1},_(e,u)}catch{}},_=(e,t)=>{a.PH&&t&&e.track("SlotClicked",t)},m={},v=(e,t,r)=>{d[t]=r,I(e,r),m[t]&&m[t](),m[t]=P(e,t)},b=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n={...g(r),is_empty:!1,service_name:"publisher_ads",slot:E(t)},i=t.getSlotElementId();v(e,i,n)}))},y=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r={...g(t),is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)};if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();v(e,n,r)}))},w=e=>{a.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const i=r.getResponseInformation();if(!i)return;const s={...g(i),service_name:n,slot:E(r)};e.track("SlotViewable",s)}))},I=(e,t)=>{if(!a.CL)return;var r;r={...t,rendered_timestamp:Date.now()},e.track("SlotRendered",r)},S=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},k=e=>{const t=(0,l.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return a.jH?{...t,...(()=>{const t={},r=[];let n=[];const i=(e,i)=>{const s="slot"===e?e=>t[e]=1:()=>{},o=i.getTargetingKeys();n=o;for(let o=0;o<n.length;o++){const a=n[o];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=i.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(s(a),r.push({key:a,value:c}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:r}})()}:t},P=(e,t)=>{let r=[];const n=()=>(0,o.zG)((0,o.bc)((0,o.zG)(s.Y3((()=>document.getElementById(t))),s.tS(s.ij),s.tS(s.KQ((e=>e.querySelector("iframe"))))),s.ij(document.activeElement)),s.RD,s.UI((r=>{let[n,i]=r;"hidden"===document.visibilityState&&n===i&&_(e,d[t])})));return document.addEventListener("visibilitychange",n),r.push((()=>document.removeEventListener("visibilitychange",n))),()=>{r.forEach((e=>e())),r=[]}},G=e=>{let{userId:t,viewId:r}=e;return i.Y3((()=>({})),n.w)}},8884:(e,t,r)=>{r.r(t),r.d(t,{GamLogAddon:()=>a,load:()=>o});var n=r(8236),i=r(8559),s=r(3717);const o=e=>{(0,i.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["gam_log",{}]})};class a{options;constructor(e){this.options=e,this.setTargeting({puid:e.userId.get(),prmtvvid:e.viewId.get(),prmtvsid:e.sessionManager.getSessionId(),prmtvwid:"e1cef1f0-495f-4973-ba1c-880786e73a66"})}async setTargeting(e){n.g_((()=>this.options.logger.error("[GAM Log]: unable to find google tag script on the page")),(t=>{t.cmd.push((()=>Object.entries(e).forEach((e=>{let[r,n]=e;return t.pubads().setTargeting(r,n)}))))}))(await(0,s.t)())}}},9772:(e,t,r)=>{r.r(t),r.d(t,{load:()=>i});var n=r(7707);const i=e=>{{const t=t=>{const{permutive:r}=e,i={loginRequired:function(e){r.track("PianoLoginRequired",{template_id:e.templateId,offer_id:e.offerId,term_id:e.termId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId},start_screen:e.startScreen},{useBeacon:!0})},showTemplate:function(e){const t=e.activeMeters?JSON.parse(e.activeMeters):[];r.track("PianoShowTemplate",{template_id:e.templateId,offer_id:e.offerId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId},meters:t.map((e=>({name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})))})},showOffer:function(e){r.track("PianoShowOffer",{template_id:e.templateId,offer_id:e.offerId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId}})},startCheckout:function(e){r.track("PianoCheckoutStart",{template_id:e.templateId,offer_id:e.offerId,term_id:e.termId,container_selector:e.containerSelector,experience:{id:e.experienceId},iframe_id:e.iframeId})},checkoutComplete:function(e){r.track("PianoCheckoutComplete",{user_id:e.uid,term_id:e.termId,term_conversion_id:e.termConversionId,resource_id:e.rid,charge_amount:e.chargeAmount,charge_currency:e.chargeCurrency,started_at:"string"==typeof e.startedAt?new Date(e.startedAt).toISOString():void 0,expires_at:"number"!=typeof e.expires||Number.isNaN(e.expires)?void 0:new Date(1e3*e.expires).toISOString()},{useBeacon:!0})},checkoutClose:function(e){r.track("PianoCheckoutClose",{state:e.state})},meterActive:function(e){r.track("PianoMeterActive",{name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})},meterExpired:function(e){r.track("PianoMeterExpired",{name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})}}[t]||function(){};return(0,n.Z_)(e.api,e.userId,i)},r=function(){window.tp=window.tp||[];["loginRequired","showTemplate","showOffer","startCheckout","checkoutComplete","checkoutClose","meterActive","meterExpired"].forEach((function(e){window.tp.push(["addHandler",e,t(e)])}))};(0,n.Z_)(e.api,e.userId,(function(){window.__permutive=window.__permutive||{},window.__permutive.pianoEvents=window.__permutive.pianoEvents||[],window.__permutive.pianoEvents.forEach((function(e){t(e.name)(e.e)})),r()}))()}}},2521:(e,t,r)=>{r.r(t),r.d(t,{PublishersAddon:()=>a,load:()=>o});var n=r(8559),i=r(7707),s=r(1844);const o=()=>{};class a{permutive;options;cancelTimer;totalCompletion=0;dirtyState;addAlchemyTaxonomy;documentId;eventInterval;article;addAlchemyEntities;constructor(e){this.permutive=e.permutive,this.options=e,this.eventInterval=e.eventInterval||5,this.documentId=e.documentId||null,this.article=e.article||null;const t=(0,n.Hn)("publishers");this.addAlchemyTaxonomy=t("add_alchemy_taxonomy",!1),this.addAlchemyEntities=t("add_alchemy_entities",!1),this.sendPageviewEvent();{this.dirtyState=!1;const t=()=>{this.dirtyState=!0};(e.dirtyEvents||["mousemove","click","scroll"]).map((function(e){window.addEventListener(e,t)}))}this.cancelTimer=(0,s.UM)(this.sendEngagementEvent(this.eventInterval,this.getCompletion),1e3*this.eventInterval)}reset(e){this.options.pageviewState.setState((0,i.rO)({viewId:i.k$})),this.documentId=e.documentId||null,this.article=e.article||null,this.totalCompletion=0,this.cancelTimer(),this.sendPageviewEvent(),this.cancelTimer=(0,s.UM)(this.sendEngagementEvent(this.eventInterval,this.getCompletion),1e3*this.eventInterval)}sendPageviewEvent(){let e;const t={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"};null!==this.documentId&&(t.$document=this.documentId,(this.addAlchemyTaxonomy||this.addAlchemyEntities)&&(e={},this.addAlchemyTaxonomy&&(e.taxonomy_labels="$alchemy_taxonomy_labels"),this.addAlchemyEntities&&(e.entity_names="$alchemy_entity_names"),t.alchemy=e)),null!==this.article&&(t.article=this.article,(this.addAlchemyTaxonomy||this.addAlchemyEntities)&&(e={},this.addAlchemyTaxonomy&&(e.taxonomy_labels="$alchemy_taxonomy_labels"),this.addAlchemyEntities&&(e.entity_names="$alchemy_entity_names"),t.article.alchemy=e)),this.permutive.track("Pageview",t)}getCompletion(){const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e}sendEngagementEvent(e,t){const r=this;return(0,i.Z_)(this.options.api,this.options.userId,(()=>{if(r.dirtyState){const n={engaged_time:e};{const e=Math.max(r.totalCompletion,t());n.completion=e-r.totalCompletion,r.totalCompletion=e,r.dirtyState=!1}this.permutive.track("PageviewEngagement",n)}}))}}},6295:(e,t,r)=>{r.r(t),r.d(t,{PubMaticAddon:()=>u,load:()=>a});var n=r(8559),i=r(7707),s=r(7144),o=r(2169);const a=e=>{(0,n.Hn)("pubmatic")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["pubmatic",{}]})},c="[pubmatic]";class u{options;activations;liveDpidsToSegments;eligibleSegments;defaultDpid;constructor(e){const t=this;this.options=e;const r=(0,n.Hn)("pubmatic");this.defaultDpid=r("dpid",""),this.eligibleSegments={},this.liveDpidsToSegments={},this.activations=this.options.activationManager.getActivations("pubmatic");for(let e=0;e<this.activations.length;e++){const t=this.activations[e],r=t.getSegmentCode(),n=t.getConfig().dpid||this.defaultDpid;this.eligibleSegments[r]=this.eligibleSegments[r]||[],this.eligibleSegments[r].push(n)}const s=e.nextGenOutput.queryLanguageCohorts.all,o=this.options.permutiveData.getData("pubmatic");e.logger.log(c,"Initialised with",{defaultDpid:this.defaultDpid,activations:this.activations,eligibleSegments:this.eligibleSegments,lastUpdated:o}),void 0===o?this.updateIfNecessary(s.current):(this.liveDpidsToSegments=this.dpidsToSegments(s.current),this.options.logger.debug(c,"Updated liveDpidsToSegments to",this.liveDpidsToSegments)),s.onChange((0,i.Z_)(e.api,e.userId,(e=>t.updateIfNecessary(e))))}updateIfNecessary(e){const t=this.dpidsToSegments(e);this.options.logger.debug(c,"Updating if necessary",{dpidsToSegmentsMapping:t});for(const e in t)this.options.logger.debug(c,`Checking dpid ${e}`,{dpidsToSegmentsMapping:t}),t.hasOwnProperty(e)&&this.embedPixel(e,t[e]);this.options.state.setPermutiveData("pubmatic",(new Date).toISOString()),this.liveDpidsToSegments=t,this.options.logger.debug(c,"Updated liveDpidsToSegments to",this.liveDpidsToSegments)}embedPixel(e,t){const r=!(0,i.cO)(t,this.liveDpidsToSegments[e]);if(this.options.logger.debug(c,"Should embed pixel",r,{segments:t,dpidSegments:this.liveDpidsToSegments[e]}),r){const r="https:"===location.protocol?"https:":"http:",n=encodeURIComponent(r+"//aud.pubmatic.com/AdServer/Artemis?uidtype=0&dpid="+e+"&segid="+t.join(","));this.options.logger.debug(c,`Embedding pixel for dpid ${e}`,{segments:t}),(0,o.zG)(this.addGDPRParams(),s.UI((e=>{const t=`${r}//image6.pubmatic.com/AdServer/UCookieSetPug`;(new Image).src=`${t}?${e}&rd=${n}`,this.options.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:"GET",request_path:t,request_content_length:n.length}})})),s.fS((e=>{this.options.api.reportError(`[pubmatic] Failed to create pixel. ${e}`,this.options.userId.get())})))}}addGDPRParams(){return s.Y3((()=>{if("missing"===this.options.tcfStatus.type)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===this.options.tcfStatus.type?this.options.tcfStatus.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}dpidsToSegments(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];if(null!=this.eligibleSegments[n]){const e=this.eligibleSegments[n];for(let r=0;r<e.length;r++){const i=e[r];t[i]=t[i]||[],t[i].push(n)}}}return t}}},3904:(e,t,r)=>{r.r(t),r.d(t,{RubiconSspAddon:()=>c,load:()=>a});var n=r(2169),i=r(7707),s=r(8683);const o="_prubicons",a=e=>{e.q.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class c{options;liveSegments=[];eligibleSegments={};constructor(e){this.options=e,this.liveSegments=e.externalData.getExternalJsonData(o)||[];const t=this.options.activationManager.getSpecializedActivations("rubicon_ssp");for(let e=0;e<t.length;e++)this.eligibleSegments[t[e]]=!0;(0,n.zG)(e.nextGenOutput.queryLanguageCohorts.all,s.YP((e=>this.updateIfNecessary(e))))}updateIfNecessary(e){const t=this.filterSegments(e);(0,i.cO)(t,this.liveSegments)||this.options.externalData.setExternalJsonData(o,t),this.liveSegments=t}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}},1133:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>I,load:()=>w});var n=r(5654),i=r(7144),s=r(2169),o=r(3052),a=r(8236),c=r(856),u=r(1497),l=r(8559),d=r(7707);const f=(0,l.MU)("add_alchemy_entities",!1),p=(0,l.MU)("add_alchemy_taxonomy",!1);function g(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{...e&&p?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{},...e&&f?{entity_names:"$alchemy_entity_names"}:{},classifications_watson:{taxonomy_labels:"$taxonomy_labels"},privacy_sandbox_topics_v2:"$privacy_sandbox_topics_v2"}}function h(e,t,r,n){const i={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",..._(),...e,...t};r.track("Pageview",i).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function _(){return{}}var m=r(1844);const v=["mousemove","click","scroll"],b=["email","tel","submit","reset","button","file","password","radio","checkbox"],y=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],w=e=>{(0,l.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class I{permutive;options;api;clientContext;logger;dirtyState=!1;cancelEngagementTimer=()=>{};totalCompletion=0;totalEngagedTime=0;pageEngagementDetected;cleanupPageEngagementDetection=(()=>s.Q1)();constructor(e){this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.options.customProperties.setCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0}).bind(this),h(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),u.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:{method:t.method||"GET",properties:this.serializeForm(t),..."string"==typeof t.id?{id:t.id}:{},...t.name&&"string"==typeof t.name?{name:t.name}:{},...t.action&&"string"==typeof t.action?{action:t.action}:{}}};this.permutive.track("FormSubmission",r)}}async trackEngagementInterval(e){const t=this.updateState(e);!function(e,t,r,n,i,s){const o={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t,...i,completion:r,total_completion:n};s.track("PageviewEngagement",o)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive)}async reset(e){this.disablePageEngagementDetection(),this.dirtyState=!1;const t=this.updateWebOptions(e);this.options.pageviewState.setState(((e,r)=>({viewId:t.context?.view_id??(0,d.k$)(),watsonEnabled:t.watson?.enabled??r.watsonEnabled}))),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.setCustomProps(this.options.page||{}),this.enablePageEngagementDetection(),h(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),u.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==b.indexOf(e.type.toLowerCase())||-1!==y.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,m.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,a.G)(t):t.parentElement?e(t.parentElement)?(0,a.G)(t.parentElement):r(t.parentElement):a.YP;u.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,s.ls)(a.DT(this.canTrackPermutiveEvent("FormSubmission")),a.UI((0,d.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,l.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,s.ls)(a.DT(this.canTrackPermutiveEvent("LinkClick")),a.UI((e=>({event:e,anchor:(0,s.zG)(e.target,a.ij,a.tS(a.DT(t)),a.tS(r))}))),a.DZ((e=>{let{event:t,anchor:r}=e;return a.pC(r)?a.G({event:t,anchor:r.value}):a.YP})),a.UI((e=>{let{event:t,anchor:r}=e;return S(this.permutive,r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,i.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(o.Df)(0,1)),n.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,n.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||v}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>(0,s.zG)(this.options?.filterPermutiveEvent?.[e],a.DT((e=>"function"==typeof e)),a.tS((0,s.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,n.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,d.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),a.Uo)),a.fS((()=>!0)))}updateWebOptions(e){(0,d.Kn)(e)||(e={}),e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent,"context"in e&&!(0,d.Kn)(e.context)&&delete e.context;const t={addPageEngagementDetection:void 0,context:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options={...this.options,...t,...e}}}const S=(e,t,r)=>{if(window.location.href&&t.href){const n=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:n},{useBeacon:r})}}},9869:(e,t,r)=>{r.d(t,{a:()=>n});class n{messages;handlers={};messageQueue={};constructor(e){this.messages=e;window.addEventListener?.("message",(e=>{"permutive"===e?.data?.origin&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){window.postMessage?.({origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(this.messageQueue[e.data.type]??=[]).push(e)}}}},1514:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>i});class n extends Error{static errorName="NetworkRequestFailedError";name=(()=>n.errorName)();constructor(){super(n.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class i extends Error{static errorName="NetworkRequestTimeoutError";name=(()=>i.errorName)();constructor(){super(i.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}},9671:(e,t,r)=>{r.d(t,{F:()=>d});var n=r(5654),i=r(2169),s=r(8236),o=r(7812),a=r(9449),c=r(1514),u=r(4694);class l{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>s.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.webClient=o}async reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=(0,n.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=(0,i.zG)(this.webClient,u.UI(s.fS((()=>({domain:self.location?.hostname??"",referrer:"document"in self?self.document?.referrer:"",url:self.location?.href??"",user_agent:navigator?.userAgent??""})))),u.UI((e=>{const n={error_message:l?.message?.toString()??"",stack_trace:l?.stack?.split("\n")},i=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.61.0",ql_runtime_version:"v14.1.0",timestamp:r,domain:e.domain,url:(0,a.bk)(e.url),referrer:(0,a.bk)(e.referrer),user_agent:e.user_agent,error_message:n.error_message??String(l),stack_trace:n.stack_trace,...i}}))),f=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),p=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,i.zG)([c.o,c.s],o.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=d();return f(e).catch((0,i.ls)(n.w,(e=>this.logError(e))))}),(async e=>p(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}class d extends l{identifyPromise;identify(e,t,r){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",s.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:r},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[],ahoCorasickLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/e1cef1f0-495f-4973-ba1c-880786e73a66-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.req(r).then((r=>(0,i.zG)(e.stopTimer(t,n),(e=>r))))}}},2049:(e,t,r)=>{r.d(t,{E:()=>b});var n=r(7144),i=r(2169),s=r(1514),o=r(1844),a=r(8236),c=r(8614),u=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag};function d(e){return{_tag:"Left",left:e}}function f(e){return{_tag:"Right",right:e}}function p(e,t){return{_tag:"Both",left:e,right:t}}var g=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},h=g;h(f,d,(function(e,t){return p(t,e)}));var _=f,m="These",v=(i.yR,i.yR,c.Xl,r(7707));class b{metrics;logger;constructor(e,t){this.metrics=t,this.logger=e.withPrefix("network")}req(e){return this.logger.withPrefix("request").debug(e.method,e.url,..."POST"===e.method?[{payload:e.payload}]:[]),this.reqImpl(e).then((e=>(0,i.MZ)(e))).then((t=>(this.logger.withPrefix("response").debug(e.method,e.url,{response:t}),t)),(t=>{throw this.logger.withPrefix("response").error(e.method,e.url,t),t}))}reqWithBeacon(e){let{url:t,payload:r}=e;const n=JSON.stringify(r),i=navigator?.sendBeacon?.(t,JSON.stringify(r))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!i,request:{method:"POST",url:t,content_length:n.length}}),i}reqImpl(e){const t="arraybuffer",{url:r,dataType:u,contentType:l,method:d,withCredentials:g,timeout:h}=e;return new Promise(((_,m)=>{const b=new XMLHttpRequest,y="POST"===e.method?"string"==typeof(w=e.payload)?w:JSON.stringify(w):null;var w;const I=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:d,url:r,content_length:y?.length??0},response:e});b.onload=(0,o.GL)((()=>{return(0,i.zG)(b.status,n.DT((e=>e<400),(()=>{const e="text"===b.responseType||""===b.responseType?b.responseText:"Couldn't access response text";return`Failed ajax request. Status code was ${b.status}. ${e}`})),n.tS((()=>"json"===u?b.responseText?n.Y3((()=>JSON.parse(b.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(b.responseText)}. Got ${e}`)):n.F2(null):"text"===u?n.F2(b.responseText):n.F2(b.response))),(0,v.bw)((0,i.ls)(a.IS,(e={content_length:"text"===b.responseType||""===b.responseType?b.responseText?.length??0:b.responseType===t?b.response.byteLength:0,response_time_ms:self.performance.now()-S,status_code:b.status},function(t){return c.Wi(t)?f(e):p(t.value,e)}),I)),n.EQ(m,_));var e})),b.onerror=(0,o.GL)((()=>{I(n.t$("network error")),m(new s.o)})),b.ontimeout=(0,o.GL)((()=>{I(n.t$("timeout")),m(new s.s)})),b.open(d,r,!0),l&&b.setRequestHeader("content-type",l),b.timeout=h||b.timeout,b.withCredentials=g||b.withCredentials,b.responseType="binary"===u?t:b.responseType;const S=self.performance.now();b.send(y)}))}trackRequestMetrics(e){if(!this.metrics?.isEnabled())return;const t=new URL(e.request.url).pathname;if(t.includes("metrics"))return;const r=r=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:t,request_content_length:e.request.content_length,...r}});var n;!0===e.is_beacon?r({is_beacon:!0,is_error:e.is_error}):(0,i.zG)((n=e.response,u(n)?c.YP:(l(n),c.G(n.right))),a.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!l(e.response),...t})),r)}}},2591:(e,t,r)=>{r.r(t),r.d(t,{startMaster:()=>ue});var n=r(8683),i=r(2169),s=r(7313),o=r(8236),a=r(7812),c=r(7707),u=r(4694),l=r(6450),d=r(2945),f=r(4327),p=r(4214);var g=r(7226),h=r(6335),_=r(6289),m=r(7049);function v(e,t){return function(r){return e.map(r,t.compact)}}function b(e,t,r){var n=v(e,t),s=(0,_.UI)(e,r);return function(e){return m.s4(n((0,i.zG)(e,s(o.IS))),n((0,i.zG)(e,s(o.EK))))}}function y(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function w(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function I(e,t){var r=y(e,t);return function(e){var t=r((0,f.ff)(e)),n=r(e);return function(e){return(0,m.s4)(t(e),n(e))}}}function S(e,t){var r=w(e,t);return function(e){return function(t){return(0,m.s4)((0,i.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,i.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var k=r(8614);function E(e){return(0,i.ls)(o.G,e.of)}function P(e){return(0,i.a9)(e.of(o.YP))}function G(e){return function(t){return e.map(t,o.G)}}function x(e){return(0,i.ls)(o.ij,e.of)}function z(e){var t=x(e);return function(e){return(0,i.ls)(e,t)}}function U(e){var t=L(e),r=z(e);return function(e){return t(r(e))}}function D(e){return function(t){return(0,i.ls)(t,e.of)}}function C(e){var t=L(e),r=D(e);return function(e){return t(r(e))}}function R(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function A(e){return(0,i.ls)(o.Uo,e.of)}function M(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function T(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function O(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function q(e){return(0,_.UI)(e,o.dO)}function j(e){return(0,d.ap)(e,o.G5)}function L(e){var t=P(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function $(e){var t=E(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var F=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},B=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},N=E(g.PM),Q=(g.PM,g.of,g.PM,g.dO,g.UI(o.Uo)),Y=(g.dO,g.qo,g.UA,g.PM,function(e){return function(){return F(void 0,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e().then(k.G)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,k.YP];case 3:return[2]}}))}))}}),K=(g.PM,g.UA,g.PM,g.UA,q(g.dO)),W=j(g.Hi),H=N,V=L(g.UA),J=(g.UA,g.PM,g.dO,o.Ri,g.dO,o.Ri,o.dO,g.dO,o.xu,g.dO,o.xu,g.dO,o.xu,g.dO,o.xu,function(e,t){return(0,i.zG)(e,K(t))}),X=function(e,t){return(0,i.zG)(e,W(t))},Z=function(e,t){return(0,i.zG)(e,V(t))},ee="TaskOption",te={URI:ee,map:J},re={URI:ee,map:J,ap:X,chain:Z},ne=(k.F4,(0,_.YO)(te)),ie=(0,h.a)(re),se=(k.Xl,r(1844)),oe=r(3643);const ae=(e,t)=>{const[r,s]=n.gS(a.uZ());return(0,i.zG)(t,n.UI(u.UI((t=>{a.Od(t)&&e.all().then((e=>(0,i.zG)(t,a.UI((0,oe.H5)((()=>e))),s)))}))),n.UI((e=>e()))),r},ce=(e,t)=>{let r=!1;return n.UI(u.UI((0,c.bw)((n=>{r||(r=(0,i.zG)(n,a.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))};function ue(e){let{eventsCacheFactory:t,metrics:h,trace:_,migratedStateMaps:m,worker:v,...b}=e;return e=>s.dQ((0,i.ls)((0,c.rO)({previousState:le}),(s=>{let{stopped:c,previousState:y}=s;(0,i.zG)(c,n.YP((e=>e&&v.stop()))),v.send({...b,migratedStateMaps:y.stateMigrated?{external:o.YP,internal:o.YP}:m(),previousState:y.workerState}),_.measureSinceInit("post_worker_config_duration").finish(),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_config",time_origin:"sdk_init"},performance.now());const w=_.startSpan("worker_config_response_duration"),I=v.next();I.then((()=>{w.finish(),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_received_worker_config_response",time_origin:"sdk_init"},performance.now())}));const S=((e,t)=>{const s=(0,i.zG)((()=>t),g.UI((e=>o.lo(!e))),V((()=>Q(e()))),ne("eventsCache"),ie("eventsCacheService",(()=>(0,i.zG)((0,se.N1)(Y((()=>Promise.resolve().then(r.bind(r,2400))))),K((e=>e.eventCacheService)))))),c=s();return e=>{let{priorCachedEventsRequests:t,...r}=e;return e=>{let{previousState:s,stopped:l}=e;const d=n.a9(u.of(a.bM())),[f,p]=n.Ue({eventsToPublish:n.a9(u.of(a.bM())),priorCachedEventsResponses:d,state:n.a9(s)});return c.then(o.EQ((()=>p({eventsToPublish:r.eventsToPublish,priorCachedEventsResponses:d,state:n.a9(void 0)})),(e=>{let{eventsCache:n,eventsCacheService:i}=e;const{state:o,value:{newEvents:a}}=i({eventsCache:n,newEvents:r.eventsToPublish})({previousState:s,stopped:l});p({eventsToPublish:a,priorCachedEventsResponses:ae(n,t),state:o})}))),{state:(0,i.zG)(f,n.VS((e=>e.state))),value:(0,i.bc)((0,i.zG)(f,n.VS((e=>e.priorCachedEventsResponses))),{...r,eventsToPublish:(0,i.zG)(f,n.VS((e=>e.eventsToPublish)))})}}}})(t,I.then((e=>e.eventsCachedInWorker)));return(0,i.zG)((()=>v.read()),function(e,t){const r=e=>(0,i.zG)(e,l.Hd((e=>e in t)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return s=>{const{buffers:o,nonBuffers:a}=r(e),[c,u]=n.Ue({...a,...(0,i.zG)(o,l.Su((e=>()=>{const r=o[e];return o[e]=t[e].empty,r})))});return(async()=>{for(;;){const e=(0,i.zG)(await s(),p.UI(r),p.ur({concat:(e,r)=>({nonBuffers:{...e.nonBuffers,...r.nonBuffers},buffers:(()=>{const n={...e.buffers};for(const e in r.buffers)n[e]=e in n?t[e].concat(n[e],r.buffers[e]):r.buffers[e];return n})()})})),n=(0,i.zG)(e.buffers,l.Su(((e,r)=>(o[e]=t[e].concat(o[e],r),()=>{const r=o[e];return o[e]=t[e].empty,r}))));u({...c.current,...e.nonBuffers,...n})}})(),(0,i.zG)(e,l.Su((e=>(0,i.zG)(c,n.UI((t=>t[e]))))))}}({activations:y.activations,cohorts:y.cohorts,context:{},eventsToPublish:a.cS,eventsToPublishOnPageUnload:a.cS,externalData:{},geoIP:o.YP,metrics:a.cS,priorCachedEventsRequests:a.cS,realtime:!1,state:y.workerState,transitionsSinceInit:{segmentsEntered:a.cS,segmentsExited:a.cS},workerStateFlushed:!1,stateMigratedThisInitialisation:!1,secureSignal:o.YP},{eventsToPublish:a.uZ(),metrics:a.uZ(),priorCachedEventsRequests:a.uZ()}),(e=>{let{metrics:t,...r}=e;return t.onChange((e=>e().forEach((e=>h.track(e))))),r}),(t=>{let{workerStateFlushed:r,stateMigratedThisInitialisation:s,activations:p,cohorts:g,state:_,secureSignal:m,...b}=t;const{value:[w,I],state:k}=S(b)({stopped:c,previousState:y.masterEventsCache});return function(e,t,r){const s=(0,i.zG)(n.vP(t),n.UI((0,i.ls)(l.UI((e=>"function"==typeof e?e:u.of(e))),(0,d.Yt)(u.G5))));let a=s.current();e(a),(0,i.zG)(s,n.YP((t=>{const n=t(),s=(0,i.zG)(n,l.z7(((e,t)=>t!==a[e]&&!r[e]?.isEmpty(t))),o.DT((0,f.ff)(l.xb)));o.pC(s)&&(a={...a,...s.value},e(s.value))})))}(v.send,{consent:e.consent,contextualCohorts:e.contextualCohorts,enrichmentReplacementMap:e.enrichmentReplacementMap,eventSourceId:e.eventSourceId,identities:e.identities,userId:e.userId,userIdIsNewlyGenerated:e.userIdIsNewlyGenerated,newEvents:(0,i.zG)(e.newEvents,ce(h,"pageview_sent_to_worker")),sessionId:e.sessionId,viewId:e.viewId,webClient:e.webClient,pageviewState:e.pageviewState,priorCachedEventsResponses:w},{newEvents:{isEmpty:a.xb},priorCachedEventsResponses:{isEmpty:a.xb}}),h.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_input",time_origin:"sdk_init"},performance.now()),{state:n.vP({activations:p,cohorts:g,masterEventsCache:k,workerState:_,stateMigrated:(0,i.zG)(n.vP(r,s),n.Rp(y.stateMigrated,((e,t)=>{let[r,n]=t;return e||r&&n})))}),value:{...I,stateMigratedThisInitialisation:s,activations:p,cohorts:{all:n.UI((e=>e.all),g),ql:n.UI((e=>e.ql),g),qlCustom:n.UI((e=>e.qlCustom),g),qlStandard:n.UI((e=>e.qlStandard),g)},secureSignal:m}}}))})))}const le=e=>he(e)?{activations:de(e.activations),cohorts:pe(e.cohorts),masterEventsCache:e.masterEventsCache,workerState:e.workerState,stateMigrated:!!e.stateMigrated}:{activations:de(null),cohorts:pe(null),masterEventsCache:null,workerState:null,stateMigrated:!1},de=e=>he(e)?{dfp:ge(e.dfp),dfp_contextual:void 0,xandr_ssp:ge(e.xandr_ssp),xandr_ssp_contextual:void 0,adswizz_keyvalue:ge(e.adswizz_keyvalue),adswizz_keyvalue_contextual:void 0}:fe(),fe=()=>({dfp:a.cS,dfp_contextual:void 0,xandr_ssp:a.cS,xandr_ssp_contextual:void 0,adswizz_keyvalue:a.cS,adswizz_keyvalue_contextual:void 0}),pe=e=>he(e)?{all:ge(e.all),ql:ge(e.ql),qlCustom:ge(e.qlCustom),qlStandard:ge(e.qlStandard)}:_e(),ge=e=>Array.isArray(e)?e:a.cS,he=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),_e=()=>({all:a.cS,ql:a.cS,qlCustom:a.cS,qlStandard:a.cS})},6970:(e,t,r)=>{r.r(t),r.d(t,{runNextGenFeatures:()=>Tt});var n=r(2169),i=r(8683),s=r(7313),o=r(1844),a=r(8236),c=r(7707);function u(e){let{messages:t}=e;const[r,n]=i.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function l(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=i.Ue(e());return(0,o.UM)((()=>r(e())),1e3),t}function d(){const[e,t]=i.Ue(!1);return(0,c.aT)((()=>t(!0)),navigator.userAgent),e}var f=r(7812),p=r(5654),g=r(7144),h=r(4214),_=r(5086),m=r(6450),v=r(7049),b=r(1340),y=r(8559),w=r(9144),I=r(8230);const S="[Prebid Monitoring]",k=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},E=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_ortb2_count_total",labels:t,value:1})},P=Math.random()<.05?function(e,t){const r=G(e);return s.K4((()=>(0,n.zG)(t,i.UI((0,n.ls)(a.DT((e=>e.consent)),a.UI((e=>e.prebidJS)))),i.D8(a.Eh((0,c.Or)())),i.bw((0,n.ls)(a.tS((e=>e.completedChecks?e.mainPair:a.YP)),a.UI((t=>k(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),i.UI(a.UI((e=>(0,n.zG)(e.mainPair,a.UI((t=>[t,...e.otherPairs])),a.fS((()=>e.otherPairs)))))),i.Rp(new Set,((t,i)=>(0,n.zG)(i,a.UI(f.hX((e=>!t.has(e.windowPropertyKey)))),a.hX(f.Od),(0,c.bw)(a.EQ((()=>e.logger.debug(S,"Nothing to report")),(t=>e.logger.debug(S,"Reporting",t)))),a.fS((()=>[])),f.UI((t=>(0,n.zG)((t=>(0,n.zG)(g.Y3((function(){const{pbjs:r,windowPropertyKey:i}=t;e.logger.log(S,`Reporting on "${i}"`,t);const s=x(r);e.logger.debug(S,`Version ${r.version} parsed as`,s);const o=(0,I.zi)(r);e.logger.debug(S,"Read config",o);const a=(0,n.zG)(o.realTimeData?.dataProviders??[],f.Ew((e=>"permutive"===e.name)));e.logger.debug(S,"Read data provider config",a);const c=r.installedModules||[];return e.logger.debug(S,"Read initial installed modules",c),{pbjs:r,config:o,dataProviderConfig:a,installedModules:c,version:s,windowPropertyKey:i}}),p.w),g.ak("bidders",(e=>r.sspBidders(e))),g.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),g.ak("consent",(e=>r.consent(e))),g.ak("prebidConfig",(e=>r.prebidConfig(e))),g.ak("targeting",(e=>r.targeting(e)))))(t),g.Pd((r=>e.reportError(`${S} Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),f.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))}:function(){return s.K4((()=>({reportedKeys:i.a9(new Set)})))};const G=e=>({sspBidders:t=>g.Y3((()=>{(0,y.Hn)("prebid")("data_provider_config",{ac_bidders:[]});const r=[],i=(0,n.zG)(t.dataProviderConfig,a.UI((e=>e?.params?.acBidders??[])),a.fS((()=>[]))),s=[...new Set([...r,...i])];s.forEach((r=>{((e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})})(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})}));const o=[...new Set(["appnexus","ix","msft","openx","pubmatic",...s])];return e.logger.debug(S,"Determined ssp bidders as",{sspBidders:o,acBidders:s,dynamicBidders:r,staticBidders:i}),{sspBidders:o,acBidders:s,dynamicBidders:r,readBidders:i}}),p.w),consent:t=>g.Y3((()=>{const r=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&k(e,{prebid_key:r,flag:"prebid_has_consent_management"});const n=t.installedModules.includes("gdprEnforcement");n&&k(e,{prebid_key:r,flag:"prebid_gdpr_enforcement_module"});const i=t.config?.consentManagement?.gdpr?.rules?.find((e=>"storage"===e?.purpose))?.vendorExceptions?.includes("permutive")||!1;return i&&k(e,{prebid_key:r,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:n,addedAsStorageException:i}}),p.w),prebidConfig:t=>g.Y3((()=>{const r=t.windowPropertyKey,i=[t.version.major,t.version.minor,t.version.patch].join("."),s=(0,n.zG)(t.dataProviderConfig,a.UI((e=>({waitForIt:e.waitForIt,params:e.params})))),u=(0,n.zG)(a.ij(t.config.realTimeData?.dataProviders?.find((e=>"jwplayer"===e.name))),a.UI((e=>({waitForIt:e.waitForIt})))),l=e=>e.enabled?a.G({bidders:e.bidders||[],aliases:e.extPrebid?.aliases||{}}):a.YP,d=b.n_({bidders:f.jG(),aliases:m.Dv(b.Z$())}),p=(0,n.zG)(a.ij(t.config.s2sConfig),a.tS((e=>Array.isArray(e)?(0,n.zG)(f.DZ(l)(e),h.c2,a.UI(h.ur(d))):l(e))),a.UI((e=>({bidders:e.bidders.join(","),aliases:e.aliases}))),a.tS((0,n.ls)(w.P,a.Uo)),a.FS),g=(0,n.zG)(a.ij(t.config.realTimeData),a.UI((e=>({auctionDelay:e.auctionDelay,permutive:a.FS(s),jwplayer:a.FS(u)}))),a.tS((0,n.ls)(w.P,a.Uo)),a.FS),_=(0,n.zG)((0,w.P)((()=>{if(t.config.consentManagement&&(0,c.Kn)(t.config.consentManagement)){const e=t.config.consentManagement?.gdpr;if(e){const t=(e?.rules||[]).filter((e=>"storage"===e?.purpose));return{gdpr:{cmpApi:e?.cmpApi,rules:t}}}return{}}})()),a.Uo,a.FS);(0,o.HJ)((()=>{((e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_config_count_total",labels:t,value:1})})(e,{prebid_key:r,version:i,installed_modules:t.pbjs.installedModules.join(","),rtd_config:g,s2s_config:p,consent_management:_})}),5e3)}),p.w),permutiveRTDProvider:t=>g.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&k(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),p.w),targeting:t=>{const r=e=>{const t=(()=>{const t=new Set((e.bids||[]).flatMap((e=>(0,c.Kn)(e.mediaTypes)?Object.keys(e.mediaTypes):[])));return Array.from(t).join(",")})(),r=e.ortb2?.user;if(!r)return{has_ortb2_user:!1,media_types:t,user_keywords:"",user_ext_data:"",user_data:""};const n=new Set(["adv","cur"]),i=e=>{const t={everyones:new Set,complete:!1};return{key:e,addIfEveryone:e=>{n.has(e)&&t.everyones.add(e)},isComplete:()=>t.everyones.size===n.size,serialize:()=>t.everyones.size>0?`${e}=${Array.from(t.everyones).sort().join(",")}`:""}},s=i("p_standard"),o=i("p_standard_aud"),a=i("p_standard"),u=i("permutive.com");r.keywords?.split(",").some((e=>{const[t,r]=e.split("=");return t===s.key?s.addIfEveryone(r):t===o.key&&o.addIfEveryone(r),o.isComplete()&&s.isComplete()}));const l=r.ext?.data?.[a.key];Array.isArray(l)&&l.some((e=>(a.addIfEveryone(e),a.isComplete())));const d=r.data?.find((e=>e.name===u.key))?.segment?.map((e=>e.id));return Array.isArray(d)&&d.some((e=>(u.addIfEveryone(e),u.isComplete()))),{has_ortb2_user:!0,media_types:t,user_keywords:[s.serialize(),o.serialize()].filter(Boolean).join("&"),user_data:u.serialize(),user_ext_data:a.serialize()}},i=(0,n.ls)(f.UI((e=>[e,null])),m.sq),s=(t,i)=>(0,n.zG)(t,(0,c.bw)((t=>e.logger.debug(S,`Processing ${t.length} bidder request(s)`,t))),f.hX((e=>i.hasOwnProperty(e.bidderCode)&&null===i[e.bidderCode])),h.vM((e=>e.bidderCode)),m.DZ(f.f2((e=>(0,n.zG)(a.ij(e),a.UI(r))))),(0,c.bw)((t=>e.logger.debug(S,"Bidders targeting method's updated",t)))),o=r=>{e.logger.debug(S,"Bidders found with no targeting method",r);let o=i(r);const a=r=>(0,n.zG)(s([r],o),(0,c.bw)((e=>{o={...o,...e}})),(0,c.bw)(m.Su(((r,n)=>E(e,{prebid_key:t.windowPropertyKey,prebid_bidder:r,...n})))),(0,c.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(S,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",a))})));t.pbjs.onEvent("bidRequested",a)};return g.Y3((()=>{const r=(0,n.zG)(t.pbjs.getEvents(),f.DZ((0,n.ls)(a.DT((e=>"bidRequested"===e.eventType)),a.UI((0,c.vg)("args")))));return(0,n.zG)(t.bidders.sspBidders,a.DT(f.Od),a.EQ((()=>e.logger.debug(S,"No bidders for targeting")),(0,n.ls)(i,(e=>({...e,...s(r,e)})),m.uK(_.ff((e=>null===e))),v.Pd((0,n.ls)(m.XP,a.DT(f.Od),a.UI(o)),m.Su(((r,n)=>E(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,...n})))))))}),p.w)}}),x=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},z="[monitoring][video_player]";function U(){return function(){const e={name:"brightcove",detect:()=>!!(window?.bc&&"object"==typeof window.bc||window?.brightcove&&"object"==typeof window.brightcove)};return[{name:"jwplayer",detect:()=>!(!window?.jwplayer||"function"!=typeof window.jwplayer||"function"!=typeof window.jwplayer().getConfig)},{name:"kaltura",detect:()=>!!(window?.KalturaPlayer&&"object"==typeof window.KalturaPlayer||window?.kWidget&&"object"==typeof window.kWidget)},e,{name:"videojs",detect:()=>!e.detect()&&!(!window?.videojs||"function"!=typeof window.videojs)}]}().reduce(((e,t)=>({...e,[t.name]:{name:t.name,result:t.detect()}})),{})}function D(e){return{data:e,error:void 0}}function C(e){return{data:void 0,error:e}}function R(e){return void 0===e.error}function A(){return{parse:e=>"string"==typeof e?D(e):C("Expected value to be a string, got "+typeof e)}}function M(e){return{parse:t=>{if(!(0,c.Kn)(t))return C("Expected value to be an object, got "+typeof t);return Object.keys(e).reduce(((r,n)=>{if(!R(r))return r;const i=e[n].parse(t[n]);return R(i)?D({...r.data,[n]:i.data}):i}),D({}))}}}function T(e){return{parse:t=>void 0===t?D(void 0):e.parse(t)}}function O(e){return{parse:t=>{if(!Array.isArray(t))return C("Expected an array, got "+typeof t);const r=t.map((t=>e.parse(t))),n=r.filter((e=>!R(e)));return n.length>0?n[0]:D(r.map((e=>e.data)))}}}function q(e,t){return{parse:r=>{const n=e.parse(r);if(R(n))return n;return t.parse(r)}}}function j(e){const t=window?.jwplayer?.()?.getConfig?.(),r=M({advertising:T(M({client:T(A()),bids:T(M({bidders:T(O(M({name:T(A())}))),settings:T(M({mediationLayerAdServer:T(A())}))})),schedule:T(q(A(),O(M({tag:T(A())}))))}))}).parse(t);return R(r)?r.data:(e.warn("JW Player properties could not be parsed",r.error),null)}function L(e,t){const{metrics:r}=e,o=e.logger.withPrefix(z);return r.isEnabled()&&Math.random()<.8?s.K4((()=>{(0,n.zG)(t.consent,i.UI((e=>{if(e){!function(e){e.track({name:"sdk_video_player_count_total",labels:{},value:1})}(r),U();const e=U();if(function(e,t,r){const n=Object.keys(e).filter((t=>e[t]?.result));r.debug("Currently detected video players:",n),Object.values(e).forEach((e=>{e.result&&t.track({name:"sdk_video_player_sdk_exists_count_total",labels:{video_player:e.name},value:1})}))}(e,r,o),e.jwplayer?.result){const e=j(o);try{!function(e,t,r){if(!e)return r.warn("JW Player properties could not be parsed"),void t.track({name:"sdk_video_player_properties_parse_error_count_total",labels:{video_player:"jwplayer"},value:1});if(e.advertising&&(e.advertising.bids||e.advertising.schedule)){const i=e.advertising,s=i.client||void 0;r.debug("JW Player advertising configuration detected");const o=i.bids?.settings?.mediationLayerAdServer||void 0,c=(0,n.zG)(i.bids?.bidders,a.ij,a.UI((e=>e.filter((e=>e.name&&e.name.trim().length>0)).map((e=>e.name?.trim().slice(0,20))).join(","))),a.FS),u=(0,n.zG)(i.schedule,a.ij,a.UI((e=>"string"==typeof e?[e]:e.map((e=>e.tag)))),a.FS),l=u?.map((e=>e.trim().slice(0,40))).join(",");r.debug("JW Player advertising configuration found"),t.track({name:"sdk_video_player_jwplayer_advertising_count_total",labels:{client:s,schedule_tags:l,mediation_ad_server:o,bidders:c},value:1})}else r.debug("No JW Player advertising configuration detected"),t.track({name:"sdk_video_player_jwplayer_advertising_not_found_count_total",labels:{},value:1})}(e,r,o)}catch(e){o.error("Error tracking JW Player properties",e)}}o.debug(z,"Video player monitoring completed")}else o.debug(z,"No consent given, not tracking")})))})):(o.debug("Video player monitoring disabled or user not sampled"),s.K4((()=>{})))}const $=function(e,t){const r=(0,n.zG)(t.pbjs,i.VS((0,n.ls)(a.tS(a.KQ((e=>e.getUserIdsAsync?.().then((()=>e.getUserIdsAsEids?.()??[]))))),a.UI(i.p4),a.fS((()=>i.a9(a.YP))))),i.UI(a.tS(a.Uo)),i.bw(a.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),a.YP))))),o=(0,n.zG)(t.pbjs,i.UI(a.tS(a.KQ((e=>e.getUserIdsAsEids?.())))));return s.K4((()=>(0,n.zG)(i.vP(r,o),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,a.wp((()=>r)))})),i.UI((0,n.ls)(a.UI(f.DZ((e=>"string"==typeof e.uids?.[0]?.id?a.G((0,n.bc)(e.source,{id:e.uids[0].id})):a.YP))),a.tS(h.c2),a.UI(m.sq))),i.bw((t=>{a.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};const F=function(e){let{externalData:t}=e;return s.K4((()=>{t.removeExternalData(B)}))};const B="_pfws",N=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]);class Q{events;listeners;static highVolumeEvents=(()=>{const e=new Set([...N]);return e.delete("Reaction"),e})();constructor(){this.events=[],this.listeners=[]}newEvent(e,t){Q.highVolumeEvents.has(e.name)||this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,i=r.name.test&&r.name.test(e.name),s=n||i;if(s)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}s&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var Y=r(4694),K=r(2945);var W=r(3643),H=r(132),V=r(7226);const J="[Event Upload]",X=(e,t,r,a)=>s.dQ((s=>{let{stopped:u,previousState:l}=s;Array.isArray(l)&&(0,n.zG)(l,f.UI((0,W.H5)((0,c.rO)({event:(0,c.rO)({time:oe})}))),ne(e))();const d=new Set([...N]),[p,{appendUntrackedEvents:h,appendUploadResults:_}]=(0,n.zG)((()=>{const[e,t]=i.gS(f.uZ()),[r,s]=i.gS(f.uZ());return(0,n.bc)({uploadResults:e,untrackedEvents:r},{appendUploadResults:t,appendUntrackedEvents:s})})(),(0,W.pL)((0,n.ls)((function(e){const[t,r]=(0,n.zG)(e.uploadResults,ie(f.bj));return{...e,uploadResults:t,erroredEventsAsJSON:r}}),(function(e){const[t,r]=(0,n.zG)(e.erroredEventsAsJSON,ie(f.UI((0,W.H5)((0,c.rO)({event:(0,c.rO)({time:e=>new Date(e)})})))));return{...e,erroredEventsAsJSON:t,erroredEvents:r}}),(function(e){let{uploadResults:t,untrackedEvents:r,...s}=e;const o=(0,n.zG)(t,i.UI(Y.UI((0,n.ls)(f.hp,f.UI((0,W.H5)((0,c.rO)({time:e=>new Date(e)}))))))),a=(0,n.zG)(i.vP(o,r),i.UI(Y.RD),i.UI(Y.UI((e=>{let[t,r]=e;return r.concat(t)}))));return{...s,successEvents:a}}),(function(e){const[t,r]=(0,n.zG)(e.successEvents,ie(f.UI((0,W.H5)((0,c.rO)({time:e=>e.toISOString()})))));return{...e,successEvents:t,successEventsAsJSON:r}})))),[m,v]=i.Ue(0),[b,y]=i.Ue(0),w=(0,n.zG)(t,i.UI(Y.UI((e=>(0,n.zG)(e,f.uK((e=>{let[,t]=e;return!d.has(t.event.name)})),(e=>{let{left:t,right:r}=e;return(0,n.zG)(t,f.UI((0,W.H5)((e=>e.event))),h),r}))))),i.UI(Y.UI((e=>(e.length>0&&((0,o.HJ)((()=>v(m.current+e.length)),500),(0,o.HJ)((()=>y(b.current+e.length)),5e3)),e))))),I=e=>t=>(0,n.zG)(e,f.hX((e=>{let[r]=e;return!t.closeEventsProcessed.includes(r)})),f.zo(t.queue)),S=(0,n.zG)(i.vP(m,b,w,r,u,a),i.Rp({closeEventsProcessed:f.cS,noQueueItemsProcessed:0,queue:f.cS},((t,r)=>{let[i,s,o,a,u,l]=r;return u?t:(0,n.zG)(t,(0,c.rO)({queue:f.zo(o())}),(t=>l?(0,n.zG)(t,(t=>r=>(0,n.zG)(r,I(t),re(e),(0,c.rO)({right:(0,c.bw)((0,n.ls)(f.UI((0,n.ls)((0,W.H5)((0,c.rO)({time:e=>e.toISOString()})),g.F2)),_))}),(e=>{let{left:t,right:i}=e;return(0,n.zG)(r,(0,c.rO)({closeEventsProcessed:(0,n.zG)(i,f.UI(W.li),f.zo),queue:(0,n.zG)(t.map(W.li),(e=>new Set(e)),(e=>f.hX((t=>{let[r]=t;return e.has(r)})))),noQueueItemsProcessed:e=>e+r.queue.length}))})))(a)):s>t.noQueueItemsProcessed||i===t.noQueueItemsProcessed+t.queue.length?(t=>((0,n.zG)(t.queue,ne(e),V.UI(_))(),{closeEventsProcessed:t.closeEventsProcessed,noQueueItemsProcessed:t.noQueueItemsProcessed+t.queue.length,queue:f.cS}))(t):t))}))),k=(0,n.zG)(r,i.UI(I),i.ap(S),i.D8(f.Eh({equals:(e,t)=>e[0]===t[0]})),i.UI(f.UI((0,W.H5)((0,c.rO)({event:(0,c.rO)({time:se})})))));return{state:k,value:p}})),Z=(e,t)=>e.permutiveUrls.getEndpointUrl("/batch/events",a.G(e.config.apiVersion),[["enrich",JSON.stringify(t.requiresEnrichment)],["sdkp",JSON.stringify(t.sdkProcessed)]]),ee=e=>(0,n.zG)(e.events,f.UI((0,n.ls)(W.Yg,(e=>e.event)))),te=(0,n.ls)(h.vM((e=>{let[t,r]=e;return`${r.requiresEnrichment}${r.sdkProcessed}`})),(e=>Object.values(e)),f.UI((e=>({requiresEnrichment:e[0][1].requiresEnrichment,events:e,sdkProcessed:e[0][1].sdkProcessed})))),re=e=>(0,n.ls)(te,f.YO("request"),f.Hr("success",(t=>{let{request:r}=t;return e.logger.debug(J,"Uploading via beacon",r),e.permutiveApi.reqWithBeacon({url:Z(e,r),payload:ee(r)})})),f.tS((e=>(0,n.zG)(e.request.events,f.UI((t=>{let[r,{event:i}]=t;return e.success?g.F2((0,n.bc)(r,i)):g.t$((0,n.bc)(r,i))}))))),f.UI((0,c.bw)(g.EQ((t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_success_count_total",labels:{event_name:r.name},value:1})})))),f.oh),ne=e=>t=>(0,n.zG)(te(t),V.uU((t=>(0,n.zG)(t,(e=>t=>(e.logger.debug(J,"Uploading",t),H.Y3((()=>e.permutiveApi.req({payload:ee(t),url:Z(e,t),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>(e.reportError(`Error sending events batch. Got ${g.KC(t)}`),t)))))(e),H.UI(f.UI((e=>e.body))),H.EQ((e=>(0,n.zG)(t.events,f.UI((()=>g.t$(e))))),f.UI(g.F2)),V.UI(f.$R(t.events))))),V.UI(f.tS(f.UI((t=>{let[r,[i,{event:s}]]=t;return(0,n.zG)(r,g.EQ((e=>g.t$((0,n.bc)(i,{event:{...s,time:s.time.toISOString()},error:e}))),(e=>"request_id"in e?g.t$((0,n.bc)(i,{event:{...s,time:s.time.toISOString()},error:e})):g.F2((0,n.bc)(i,{...s,id:e.id,time:e.time})))),(0,c.bw)(g.EQ((t=>{let[,{event:r}]=t;return e.metrics.trackCounter({name:"sdk_event_upload_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_upload_success_count_total",labels:{event_name:r.name},value:1})}))))}))))),ie=e=>t=>(0,n.zG)(t,i.En(2,f.uZ()),(0,W.H5)(i.UI(Y.UI(e)))),se=e=>oe(e).toISOString(),oe=e=>{if(null==e)return new Date;if(ae(e))return e;const t=new Date(e);return ae(t)?t:new Date},ae=e=>isFinite(e)&&e instanceof Date,ce=(e,t,r,o)=>(0,n.zG)(s.K4((()=>{const[e,t]=i.Ue(i.a9(Y.of([])));return{eventsToPublishBufferRef:i.xH(e),publishEvents:r=>{(0,n.zG)(i.vP(e.current,r),i.UI(Y.RD),i.UI(Y.UI(f.xH)),t)}}})),s.ak("eventUpload",(t=>{let{eventsToPublishBufferRef:n}=t;return X(e,n,r,o)})),s.ak("eventHandler",(e=>{let{eventUpload:t}=e;return r=t.successEventsAsJSON,o=t.erroredEventsAsJSON,s.K4((()=>{const e=new Q;return(0,n.zG)(r,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,r]=t;return e.newEvent(r,null)}))))),(0,n.zG)(o,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,{event:r,error:n}]=t;return e.newEvent(r,n)}))))),{eventHandlerAfterUpload:e}}));var r,o})),s.ak("eventResolver",(e=>{let{eventUpload:r}=e;return((e,t,r,o)=>s.K4((()=>{(0,n.zG)(i.vP({unresolvedEvents:t,erroredEvents:o,successEvents:r}),i.UI((0,K.Yt)(Y.G5)),i.Rp({},((e,t)=>{const r=t();return(0,n.zG)(r.unresolvedEvents,a.DT(f.Od),a.UI((0,n.ls)(m.sq,(t=>({...e,...t})))),a.fS((()=>e)),(e=>(0,n.zG)(r.successEvents,f.u4(e,((e,t)=>{let[r,i]=t;return(0,n.zG)(m.P5(r,e),a.UI((t=>(t.succeed(i),m.EG(r)(e)))),a.fS((()=>e)))})))),(e=>(0,n.zG)(r.erroredEvents,f.u4(e,((e,t)=>{let[r,{event:i,error:s}]=t;return(0,n.zG)(m.P5(r,e),a.UI((t=>(t.fail(`Failed to track ${i.name}. ${"error"in s?s.error.message:s.message}`),m.EG(r)(e)))),a.fS((()=>e)))})))))})))})))(0,t,r.successEvents,r.erroredEvents)})),s.UI((e=>{let{publishEvents:t,eventHandler:r}=e;return{eventHandlerAfterUpload:r.eventHandlerAfterUpload,publishEvents:t}}))),ue="_pnativo",le=function(e){let{externalData:t}=e;return s.K4((()=>{t.removeExternalData(ue)}))};var de,fe,pe,ge,he,_e=-1,me=function(e){addEventListener("pageshow",(function(t){t.persisted&&(_e=t.timeStamp,e(t))}),!0)},ve=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},be=function(){var e=ve();return e&&e.activationStart||0},ye=function(e,t){var r=ve(),n="navigate";return _e>=0?n="back-forward-cache":r&&(document.prerendering||be()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},we=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},Ie=function(e,t,r,n){var i,s;return function(o){t.value>=0&&(o||n)&&((s=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},Se=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ke=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},Ee=function(e){var t=!1;return function(){t||(e(),t=!0)}},Pe=-1,Ge=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},xe=function(e){"hidden"===document.visibilityState&&Pe>-1&&(Pe="visibilitychange"===e.type?e.timeStamp:0,Ue())},ze=function(){addEventListener("visibilitychange",xe,!0),addEventListener("prerenderingchange",xe,!0)},Ue=function(){removeEventListener("visibilitychange",xe,!0),removeEventListener("prerenderingchange",xe,!0)},De=function(){return Pe<0&&(Pe=Ge(),ze(),me((function(){setTimeout((function(){Pe=Ge(),ze()}),0)}))),{get firstHiddenTime(){return Pe}}},Ce=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Re=[1800,3e3],Ae=[.1,.25],Me=function(e,t){t=t||{},function(e,t){t=t||{},Ce((function(){var r,n=De(),i=ye("FCP"),s=we("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-be(),0),i.entries.push(e),r(!0)))}))}));s&&(r=Ie(e,i,Re,t.reportAllChanges),me((function(n){i=ye("FCP"),r=Ie(e,i,Re,t.reportAllChanges),Se((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))}(Ee((function(){var r,n=ye("CLS",0),i=0,s=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];i&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,s.push(e)):(i=e.value,s=[e])}})),i>n.value&&(n.value=i,n.entries=s,r())},a=we("layout-shift",o);a&&(r=Ie(e,n,Ae,t.reportAllChanges),ke((function(){o(a.takeRecords()),r(!0)})),me((function(){i=0,n=ye("CLS",0),r=Ie(e,n,Ae,t.reportAllChanges),Se((function(){return r()}))})),setTimeout(r,0))})))},Te=0,Oe=1/0,qe=0,je=function(e){e.forEach((function(e){e.interactionId&&(Oe=Math.min(Oe,e.interactionId),qe=Math.max(qe,e.interactionId),Te=qe?(qe-Oe)/7+1:0)}))},Le=function(){return de?Te:performance.interactionCount||0},$e=function(){"interactionCount"in performance||de||(de=we("event",je,{type:"event",buffered:!0,durationThreshold:0}))},Fe=[],Be=new Map,Ne=0,Qe=[],Ye=function(e){if(Qe.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Fe[Fe.length-1],r=Be.get(e.interactionId);if(r||Fe.length<10||e.duration>t.latency){if(r)e.duration>r.latency?(r.entries=[e],r.latency=e.duration):e.duration===r.latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Be.set(n.id,n),Fe.push(n)}Fe.sort((function(e,t){return t.latency-e.latency})),Fe.length>10&&Fe.splice(10).forEach((function(e){return Be.delete(e.id)}))}}},Ke=function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=Ee(e),"hidden"===document.visibilityState?e():(r=t(e),ke(e)),r},We=[200,500],He=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Ce((function(){var r;$e();var n,i=ye("INP"),s=function(e){Ke((function(){e.forEach(Ye);var t=function(){var e=Math.min(Fe.length-1,Math.floor((Le()-Ne)/50));return Fe[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,n())}))},o=we("event",s,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40});n=Ie(e,i,We,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),ke((function(){s(o.takeRecords()),n(!0)})),me((function(){Ne=Le(),Fe.length=0,Be.clear(),i=ye("INP"),n=Ie(e,i,We,t.reportAllChanges)})))})))},Ve=[2500,4e3],Je={},Xe={passive:!0,capture:!0},Ze=new Date,et=function(e,t){fe||(fe=t,pe=e,ge=new Date,nt(removeEventListener),tt())},tt=function(){if(pe>=0&&pe<ge-Ze){var e={entryType:"first-input",name:fe.type,target:fe.target,cancelable:fe.cancelable,startTime:fe.timeStamp,processingStart:fe.timeStamp+pe};he.forEach((function(t){t(e)})),he=[]}},rt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){et(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,Xe),removeEventListener("pointercancel",n,Xe)};addEventListener("pointerup",r,Xe),addEventListener("pointercancel",n,Xe)}(t,e):et(t,e)}},nt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,rt,Xe)}))},it=[100,300];const st=function(e){let t=0;const r=r=>{if(0===t)return;const n=ot(r);n&&e.metrics.track({name:`sdk_web_vitals_${n.suffix}`,labels:{},value:n.value})},o=(0,c.HP)((()=>{Me(r),function(e,t){t=t||{},Ce((function(){var r,n=De(),i=ye("LCP"),s=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-be(),0),i.entries=[e],r())}))},o=we("largest-contentful-paint",s);if(o){r=Ie(e,i,Ve,t.reportAllChanges);var a=Ee((function(){Je[i.id]||(s(o.takeRecords()),o.disconnect(),Je[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Ke(a)}),!0)})),ke(a),me((function(n){i=ye("LCP"),r=Ie(e,i,Ve,t.reportAllChanges),Se((function(){i.value=performance.now()-n.timeStamp,Je[i.id]=!0,r(!0)}))}))}}))}(r),function(e,t){t=t||{},Ce((function(){var r,n=De(),i=ye("FID"),s=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},o=function(e){e.forEach(s)},a=we("first-input",o);r=Ie(e,i,it,t.reportAllChanges),a&&(ke(Ee((function(){o(a.takeRecords()),a.disconnect()}))),me((function(){var n;i=ye("FID"),r=Ie(e,i,it,t.reportAllChanges),he=[],pe=-1,fe=null,nt(addEventListener),n=s,he.push(n),tt()})))}))}(r),He(r)}));return s.K4((r=>{let{stopped:s}=r;t++,(0,n.zG)(s,i.YP((e=>{e&&t--}))),e.metrics.isEnabled()&&o()}))};const ot=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var at=r(946);const ct=(e,t)=>{const{activationManager:r,externalData:o,metrics:a,permutiveData:c}=e;return(0,n.zG)(s.of({}),s.ak("psegs",(()=>((e,t)=>s.K4((r=>{let{stopped:s}=r;const o="_psegs";(0,n.zG)(i.vP(t,s),i.YP((t=>{let[r,i]=t;i||(0,n.zG)(r,f.EQ((()=>e.removeExternalData(o)),(t=>e.setExternalJsonData(o,t))))})))})))(e.externalData,t.qlSegments))),s.ak("webVitals",(()=>st(e))),s.ak("nativo",(()=>le({activationManager:r,externalData:o,metrics:a,queryLanguageCohorts:t.qlSegments,...t}))),s.ak("twitterPixel",(()=>(0,at.eJ)({activationManager:r,metrics:a,permutiveData:c,queryLanguageCohorts:t.qlSegments,...t}))),s.ak("prebidJS",(()=>(0,I.dN)(e))))};var ut=r(7943);const lt=()=>{const[e,t]=i.gS(f.uZ());return{trackEvent:e=>{let r,n,{event:i,useBeacon:s}=e;const o=new Promise(((e,t)=>{r=e,n=t}));return t([{localId:(0,c.k$)(),event:i,fail:n,succeed:r,useBeacon:s}]),o},trackedEvents:e}};var dt=r(951);const ft="_ppsts",pt=function(e,t,r){return s.dQ((s=>{let{previousState:o}=s;const u=(0,n.ls)(a.UI((e=>e.topics)),a.hX((e=>Object.keys(e).length>0)),a.UI(vt),a.EQ((()=>e.externalData.removeExternalData(ft)),(t=>e.externalData.setExternalJsonData(ft,t))));return(0,n.zG)(i.vP({consent:r,sessionId:t}),i.Rp((l=o,(0,n.zG)(l,a.DT((e=>Boolean(e&&"object"==typeof e))),a.UI((0,c.rO)({topics:e=>i.a9(a.of(e))})))),((t,r)=>(0,n.zG)(r,a.DT((e=>{let{consent:t}=e;return t})),a.UI((r=>{let{sessionId:s}=r;return(0,n.zG)(t,a.hX((e=>e.sessionId===s)),a.fS((()=>({sessionId:s,topics:i.fF(gt(e))}))))}))))),i.VS(a.EQ((()=>i.a9(a.YP)),(e=>(0,n.zG)(e.topics,i.UI(a.UI((t=>({topics:t,sessionId:e.sessionId})))))))),i.bw(u),(e=>({state:(0,n.zG)(e,i.UI(a.FS)),value:{replacementMap:(0,n.zG)(e,i.UI(a.EQ((()=>({$privacy_sandbox_topics_v2:[]})),(e=>({$privacy_sandbox_topics_v2:e.topics[2]??[]})))),i.UI(a.G))}})));var l}))};const gt=e=>(0,n.zG)(H.Do,H.Hr("span",(()=>e.trace.startSpan("topics_data_retrieval"))),H.ak("message",(()=>H.Y3(ht,(e=>e)))),H.At((e=>{let{span:t}=e;return t.finish})),H.EQ((t=>(e.api.reportError(`Error while registering the topics enricher: got ${t}`),{})),(e=>{let{message:t}=e;return _t(t.value??[])}))),ht=()=>{if(!("browsingTopics"in document))return Promise.resolve({value:void 0});const e="https://cdn.permutive.app/topics.html",t=new URL(e).origin,r=document.createElement("iframe");r.src=e,r.style.display="none",r.browsingtopics=!0;const n=(0,o.t_)(new Promise(((e,n)=>{window.addEventListener("message",(i=>{i.source===r.contentWindow&&i.origin===t&&(i.data.error?n(i.data.error):e(i.data))}))})));return document.body.appendChild(r),n},_t=e=>(0,n.zG)(e,h.vM((e=>e.taxonomyVersion)),dt.UI((e=>e.map((e=>e.topic))))),mt={1:"600",2:"601"},vt=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return r in mt&&(e[mt[r]]=n),e}),{});var bt=r(6834),yt=r(9607);r(514),r(4680);var wt=r(229);const It=e=>{let{logger:t,viewId:r}=e;const[s,o]=i.gS(a.uZ((0,b.Z$)())),c=(0,n.zG)(i.vP(r,s),i.UI((e=>{let[t,r]=e;return r()}))),u=(0,n.zG)(r,i.VS((()=>(0,n.zG)(kt,V.tD,V.gw(500),i.fF))));return{contextualAddon:a.G((0,n.ls)(St,a.UI((e=>o(a.G(e)))))),response:(0,n.zG)(i.vP(c,u),i.UI((e=>{let[r,i]=e;return(0,n.zG)(r,a.Gk((()=>(a.pC(i)&&t.warn("[contextual]","data not provided within 500ms, using:",i.value),i))))})))}},St=e=>a.G(e),kt=()=>({activations:{},cohorts:[],contextual_data:{classifications:{}},requires_segmentation:!1}),Et=e=>({enrichedEvents:(0,n.zG)(e.events,i.UI(Y.UI(f.UI(Gt)))),replacementMap:(0,n.zG)(e.contextualData,i.UI(a.UI((e=>({[xt]:e})))))}),Pt=["Pageview","PageviewEngagement"],Gt=e=>Pt.includes(e.event.name)?{...e,event:{...e.event,properties:{...e.event.properties,contextual:xt}}}:e,xt="$contextual",zt=e=>{const[t,r]=(0,n.zG)(e.events,i.En(2,f.uZ())),s=(0,n.zG)(Ut(e.viewId,r),i.UI(a.UI((e=>e.properties)))),{contextualAddon:o,response:c}=(u={...e,pageviewProperties:s},It(u));var u;const l=i.D8(a.Eh(f.Eh(wt.Eq))),d=(0,n.zG)(c,i.UI(a.UI((e=>e.contextual_data))),i.D8({equals:(e,t)=>JSON.stringify(e)===JSON.stringify(t)})),{enrichedEvents:p,replacementMap:g}=(e=>Et(e))({events:t,contextualData:d});return{activations:{gam:(0,n.zG)(c,i.UI(a.UI((e=>e.activations?.target_dfp??[]))),l),xandr:(0,n.zG)(c,i.UI(a.UI((e=>e.activations?.appnexus_adserver??[]))),l),adswizz_keyvalue:(0,n.zG)(c,i.UI(a.UI((e=>e.activations?.adswizz_keyvalue??[]))),l)},cohorts:(0,n.zG)(c,i.UI(a.UI((e=>e.cohorts??[]))),l),contextualAddon:o,data:d,enrichedEvents:p,replacementMap:g}},Ut=(e,t)=>{const r=(0,n.zG)(t,i.UI((e=>(0,n.zG)(e(),f.dF((e=>"Pageview"===e.event.name))))),i.u4(((e,t)=>(0,n.zG)(t,a.wp((()=>e))))),i.UI(a.UI((e=>e.event))));return(0,n.zG)(i.vP(e,r),i.UI((e=>{let[t,r]=e;return(0,n.zG)(r,a.hX((e=>e.view_id===t)))})))},Dt=e=>{const t=e=>{if("number"==typeof e&&!Number.isNaN(e))return e;throw new Error("Received unexpected "+(Number.isNaN(e)?"NaN":"type "+typeof e))},r=e=>Math.max(0,t(e)/1e3);return{compressed:!!e.decodedBodySize&&e.decodedBodySize!==e.encodedBodySize,decoded_body_size:t(e.decodedBodySize),dns_lookup_duration:r(e.domainLookupEnd-e.domainLookupStart),encoded_body_size:t(e.encodedBodySize),fetch_duration:r(e.responseEnd-e.fetchStart),fetch_end:r(e.responseEnd),fetch_start:r(e.fetchStart),redirect_duration:r(e.redirectEnd-e.redirectStart),request_duration:r(e.responseStart-e.requestStart),retrieved:Ct(e),service_worker_duration:r(0===e.workerStart?0:e.fetchStart-e.workerStart),start_time:r(e.startTime),tcp_handshake_duration:r(e.connectEnd-e.connectStart),total_duration:r(e.duration),tls_negotiation:r(e.requestStart-e.secureConnectionStart),transfer_duration:r(e.responseEnd-e.requestStart),transfer_size:t(e.transferSize)}},Ct=e=>0===e.transferSize?"cache":e.transferSize>e.encodedBodySize?"network":"revalidate";a.YP,i.a9(a.YP),i.a9([]),i.a9([]),i.a9([]),i.a9(ut.b()),i.a9(a.YP),i.a9({segmentsEntered:[],segmentsExited:[]}),i.a9(!1),i.a9((e=>{let{event:t}=e;return Promise.resolve(t)})),new Q,i.a9(a.YP),i.a9(!1);function Rt(e,t,r){const{addonsLoaded:u,consent:l,currentTimestampSecs:d,enabledAddons:p,identities:_,sdkVariant:m,sessionId:v,userId:b,userIdIsNewlyGenerated:y,viewId:w,pageviewState:I}=t,[S,k]=(0,n.zG)(i.Ue(i.a9(f.cS)),(e=>{let[t,r]=e;return[i.xH(t),r]})),E=a.ij(e.permutiveData.getData("event-source-id")),G=(0,n.zG)(b,i.Rp(-1,(e=>e+1)),i.UI((t=>(0,n.zG)(E,a.hX((()=>0===t)),a.fS((()=>{const t=(0,c.k$)();return e.permutiveData.setData("event-source-id",t),t}))))));return(0,n.zG)(s.vP({computeTimeMetrics:(x=e.metrics,s.K4((e=>{let{stopped:t}=e;const r=(0,o.HJ)((()=>{(0,n.zG)((0,o.iE)(),(0,c.bw)((()=>(0,o.ho)(!1))),f.UI((e=>{let[t,r]=e;return(r-t)/1e3})),(e=>{x.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),x.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,n.zG)(e,f.hX((e=>e>.05)),f.UI((e=>e-.05)),f.u4(0,((e,t)=>e+t))),labels:{}}),x.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);(0,n.zG)(t,i.YP((e=>e&&r())))}))),privacySandboxTopics:pt(e,v,l)}),s.UI((t=>{const{reset:r,trackEvent:s,trackedEvents:o}=((e,t)=>{const[r,s]=i.Ue(0),o=(0,n.zG)(i.vP(r,t),i.UI((()=>[]))),a=(0,n.zG)(i.vP(o,e),i.D8(((e,t)=>{let[,r]=e,[,n]=t;return r===n})),i.UI((e=>{let[t]=e;const r=lt();return t.forEach(r.trackEvent),r})));return{reset:()=>s(r.current+1),trackEvent:(0,n.zG)(i.vP(a,o),i.UI((e=>{let[t,r]=e;return e=>(r.push(e),t.trackEvent(e))}))),trackedEvents:(0,n.zG)(a,i.VS((e=>e.trackedEvents)))}})(b,w),{enrichedEvents:a,...c}=(e=>zt(e))({consent:l,events:o,logger:e.logger,pageUrl:(0,n.zG)((()=>e.clientContext.getClientAsync()),V.UI((e=>e.url))),permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,viewId:w}),[u,d,p]=(0,n.zG)(a,i.En(3,f.uZ()));return{...t,contextual:c,reset:r,trackEvent:s,unresolvedEvents:(0,n.zG)(u,i.UI(Y.UI(f.UI((e=>(0,n.bc)(e.localId,{fail:e.fail,succeed:e.succeed})))))),eventsToProcessLocally:(0,n.zG)(d,i.UI(Y.UI(f.hX((e=>!e.useBeacon))))),eventsToUploadViaBeacon:(0,n.zG)(p,i.UI(Y.UI(f.hX((e=>e.useBeacon)))))}})),s.ak("eventPublication",(r=>{let{unresolvedEvents:n}=r;return ce(e,n,S,t.sdkClosing)})),s.Hr("enrichmentReplacementMap",(e=>{let{contextual:t,privacySandboxTopics:r}=e;return(0,n.zG)(i.vP(t.replacementMap,r.replacementMap),i.UI((e=>{let[t,r]=e;return(0,K.gz)(a.g1)(t,r)})),i.UI(a.UI((e=>{let[t,r]=e;return{...t,...r}}))))})),s.ak("core",(o=>{let{contextual:c,enrichmentReplacementMap:u,eventPublication:p,eventsToProcessLocally:g}=o;return(0,n.zG)(r({contextualCohorts:(0,n.zG)(i.vP(c.cohorts,c.activations.gam,c.activations.xandr,c.activations.adswizz_keyvalue),i.UI(a.RD),i.UI(a.UI((e=>{let[t,r,n,i]=e;return{all:t,gam:r,xandrSsp:n,adswizz_keyvalue:i}})))),consent:l,currentTimestampSecs:d,enrichmentReplacementMap:u,eventSourceId:G,identities:_,newEvents:(0,n.zG)(g,i.UI(Y.UI(f.UI((e=>(0,n.bc)(e.localId,e.event)))))),sessionId:v,userId:b,userIdIsNewlyGenerated:y,viewId:w,webClient:t.webClient,pageviewState:I}),s.bw((e=>{let{eventsToPublish:t}=e;return(0,n.zG)(t,i.UI(Y.UI(At)),p.publishEvents)})),s.bw((e=>{let{eventsToPublishOnPageUnload:t}=e;return(0,n.zG)(t,i.UI(At),k)})),s.bw((t=>{let{externalData:r}=t;return(0,n.zG)(r,i.UI((t=>(0,n.zG)(Object.entries(t),f.UI((t=>{let[r,i]=t;return(0,n.zG)(i,a.EQ((()=>e.externalData.removeExternalData(r)),(t=>e.externalData.setExternalJsonData(r,t))))}))))))})),s.bw((t=>{let{context:r}=t;return(0,n.zG)(r,i.UI((t=>{const r=Object.entries(t);e.clientContext.updateContext(...r)})))})))})),s.bw((e=>{let{core:r,eventPublication:s,eventsToUploadViaBeacon:o}=e;return(0,n.zG)(i.vP({cohorts:r.cohorts.all,eventsIO:o,segments:r.cohorts.ql,sessionId:v,userId:b,viewId:w,webClient:t.webClient}),i.UI((e=>{let{webClient:t,...r}=e;return(0,n.zG)(t,a.UI((e=>({...r,webClient:e}))))})),i.UI(a.EQ((()=>Y.of(f.bM())),(e=>{let{cohorts:t,eventsIO:r,segments:i,sessionId:s,userId:o,viewId:a,webClient:c}=e;return(0,n.zG)(r,Y.UI(f.UI((e=>{let{event:r,localId:u}=e;return(0,n.bc)(u,{requiresEnrichment:!0,sdkProcessed:!1,event:{user_id:o,name:r.name,segments:i,cohorts:t,properties:{...r.properties,client:{...c,...r.properties.client??{}}},session_id:s,time:new Date,view_id:a}})}))))}))),s.publishEvents)})),s.ak("metricContext",(e=>{let{core:r}=e;return(0,n.zG)(r.geoIP,i.UI(a.tS((e=>a.ij(e.geo_info)))),(e=>ut.X({geoInfo:e,sampleRate:t.metricSampleRate,sdkVariant:m,sessionId:v,userId:b,viewId:w})))})),s.ak("sdkql",(t=>{let{core:r}=t;return ct(e,{addonsLoaded:u,consent:l,initdAddons:p,qlSegments:r.cohorts.ql})})),s.ak("strategicPartnerships",(t=>{let{sdkql:r}=t;return((e,t)=>s.vP({prebid_identifiers:$(e,t)}))(e,{pbjs:(0,n.zG)(r.prebidJS,i.UI((e=>(0,n.zG)(e.mainPair,a.UI((e=>e.pbjs))))))})})),s.ak("mediaAndEntertainment",(t=>{let{core:r}=t;return((e,t)=>(0,n.zG)(s.vP({freewheel:F({activationManager:e.activationManager,externalData:e.externalData,...t})}),s.UI((0,n.a9)({}))))(e,{addonsLoaded:u,consent:l,initdAddons:p,queryLanguageCohorts:r.cohorts.ql})})),s.ak("advertisers",(t=>{let{sdkql:r}=t;return((e,t)=>(0,n.zG)(s.of(t),s.ak("prebidMonitoring",(t=>{let{consent:r,prebidJS:n}=t;return P(e,i.vP({consent:r,prebidJS:n}))})),s.ak("videoPlayerMonitoring",(t=>{let{consent:r}=t;return L(e,{consent:r})})),s.UI(n.Q1)))(e,{consent:l,prebidJS:r.prebidJS})})),s.ak("identityManager",(t=>{let{core:r}=t;return(0,bt.u6)({...e,consent:l,tcfApiStatus:(0,yt.SD)(window,e.logger).tcfApiStatusRef,currentTimestampSecs:d,geoIP:r.geoIP},_)})),s.bw((function(){(0,n.zG)((0,K.gz)(a.G5)(e.performance,(0,n.zG)(t.currentScript,a.UI((e=>e.src)),a.hX((e=>"string"==typeof e)))),a.UI((r=>{let[i,s]=r;var o;(o={consent:t.consent,logger:e.logger,metrics:e.metrics,name:s,performance:i}).consent.current&&o.metrics.isEnabled()&&(0,n.zG)(h.nI(o.performance.getEntriesByName(o.name,"resource")),a.UI(h.YM),a.hX((e=>self.PerformanceResourceTiming&&e instanceof self.PerformanceResourceTiming)),a.fX((e=>g.Y3((()=>Dt(e)),(0,c.bw)((t=>o.logger.warn("[resource timing] Failed to compute labels",{error:t,entry:e})))))),a.UI((e=>{const{total_duration:t,...r}=e;o.metrics.track({name:"sdk_resource_timing_seconds",value:t,labels:{...r,name:o.name}})})))})))})),s.UI((e=>{let{core:t,contextual:r,metricContext:n,sdkql:s,trackEvent:o,eventPublication:a,strategicPartnerships:c,identityManager:u,reset:l}=e;return{activations:{dfp:i.UI((e=>e.dfp),t.activations),dfp_contextual:i.UI((e=>e.dfp_contextual),t.activations),xandr_ssp:i.UI((e=>e.xandr_ssp),t.activations),xandr_ssp_contextual:i.UI((e=>e.xandr_ssp_contextual),t.activations),adswizz_keyvalue:i.UI((e=>e.adswizz_keyvalue),t.activations),adswizz_keyvalue_contextual:i.UI((e=>e.adswizz_keyvalue_contextual),t.activations)},addons:{contextual:r.contextualAddon,identityManager:u,secureSignal:t.secureSignal},metricContext:n,pbjsPair:i.UI((e=>e.mainPair),s.prebidJS),queryLanguageCohorts:{all:t.cohorts.ql,custom:t.cohorts.qlCustom,standard:t.cohorts.qlStandard},segmentTransitionsSinceInit:t.transitionsSinceInit,trackEvent:o,realtime:t.realtime,eventHandlerAfterUpload:a.eventHandlerAfterUpload,prebidIdentifiers:c.prebid_identifiers,reset:l,stateMigratedThisInitialisation:t.stateMigratedThisInitialisation}})));var x}const At=f.UI((0,W.H5)((e=>({event:e,requiresEnrichment:!1,sdkProcessed:!0}))));function Mt(e){return(0,n.ls)((0,c.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch{return{}}}}),e,(0,c.rO)({state:i.UI(JSON.stringify)}))}function Tt(e){const t=function(e){const{activationManager:t,api:r,clientContext:n,config:i,externalData:s,logger:o,metrics:c,permutiveData:u,network:l,urls:d,namespace:f,trace:p}=e;return{activationManager:t,api:r,clientContext:n,config:i,externalData:s,logger:o,metrics:c,performance:a.ij(self.performance),permutiveData:u,permutiveApi:l,permutiveUrls:d,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,t?.userId,t?.timestamp)},namespace:f,trace:p}}(e),r=function(e){const t={addonsLoaded:e.addonsLoaded,currentScript:e.currentScript,consent:(r=e.consentTracking,(0,n.zG)(r,a.EQ((()=>i.a9(!0)),(e=>e.consentRef)))),currentTimestampSecs:l(),enabledAddons:u(e),identities:e.identities,sdkClosing:d(),metricSampleRate:e.config.metricsSamplingPercentage/100,sdkVariant:a.ij(e.sdkVariant),sessionId:i.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,userIdIsNewlyGenerated:e.userId.isNewlyGenerated,viewId:e.viewId.ref,pageviewState:e.pageviewState,webClient:e.webClient};var r;return t}(e);return function(e,t,r,a){const u=5e3;return(0,n.zG)(e,function(e,t){return r=>s=>{const{value:a,state:c}=r(s),[u,l]=i.Ue(c.current),d=(0,o.UM)((()=>l(c.current)),e),f=(0,n.zG)(i.vP(c,u),i.UI((e=>{let[t,r]=e;return t===r})));return(0,n.zG)(t,i.bw((e=>e&&d()))),{value:(0,n.bc)(f,a),state:(0,n.zG)(i.vP(t,c,u),i.UI((e=>{let[t,r,n]=e;return t?r:n})))}}}(u,a),Mt,function(e){return t=>(0,n.ls)((0,c.rO)({previousState:t=>e.current?t:void 0}),t,(0,c.rO)({state:(0,n.ls)((t=>i.vP(e,t)),i.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,n.ls)((0,c.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,c.rO)({state:(0,c.bw)(i.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t),s.UI((e=>{let[t,r]=e;return r})))({stopped:i.a9(!1)}).value}(Rt(t,r,e.core),e.namespace.getNamespacedStorageKey("permutive-app"),r.consent,r.sdkClosing)}},7626:(e,t,r)=>{r.d(t,{B9:()=>g,iq:()=>d,ti:()=>_});var n=r(5654),i=r(842),s=r(7144),o=r(8236),a=r(2169),c=r(7707),u=r(9449);const l="__permutive.",d="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",apiProtocol:"https",cdnBaseUrl:"cdn.permutive.com",cdnProtocol:"https",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataQueriesKey:"permutive-data-queries",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"e1cef1f0-495f-4973-ba1c-880786e73a66.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:[],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0},secureSignalsApiHost:"secure-signals.permutive.app",prebidAuctionsRandomDownsamplingThreshold:.9},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0,prebidAuctionsRandomDownsamplingThreshold:!0};return Object.keys(e).reduce(((n,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return{...n,[i]:t}}if(r.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?n:{...n,[i]:t}}return{...n,[i]:e[i]}}),{})},g=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(l)))return e;const i=r.replace(l,"");return[...e,[i,n]]}),[]);return(0,a.zG)(s.Y3((()=>(0,a.zG)(e(),t,(e=>(0,c.m8)(...e)),p,(e=>h({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},h=e=>{let{queryConfig:t}=e;const r=(0,a.zG)(o.Y3((()=>window.sessionStorage.getItem(d))),o.tS(o.ij),o.tS((0,a.ls)(i.A,o.ij)),o.fS((()=>({}))));return(0,c.PM)(r,t)},_=(e,t)=>{const r=(e.environment&&f[e.environment])??{};return(0,c.PM)(f.default,r,e,t)}},7106:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},2980:(e,t,r)=>{r.d(t,{S:()=>h});var n=r(2169),i=r(8236),s=r(9912),o=r(8683),a=r(3075),c=r(1844);var u=r(7707);class l{wait_prev;block_next;task;started;complete;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var d=r(9215);r(962),r(8559);class f{logger;api;activationManager;sessionManager;metrics;viewId;userId;network;clientContext;unprocessedEvents;taskQueue;identities;permutiveReset;messages;addons;trace;permutiveRealtime;state;customProperties;config;permutiveData;externalData;cookies;identitiesIngestor;global;nextGen;pageviewState;tcf;initialisedAddons=[];constructor(e,t,r,n,i,s,o,a,c,u,l,d,f,p,g,h,_,m,v,b,y,w,I,S,k,E,P,G){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=i,this.viewId=s,this.userId=o,this.network=a,this.clientContext=c,this.unprocessedEvents=u,this.taskQueue=l,this.identities=d,this.permutiveReset=f,this.messages=p,this.addons=g,this.trace=h,this.permutiveRealtime=_,this.state=m,this.customProperties=v,this.config=b,this.permutiveData=y,this.externalData=w,this.cookies=I,this.identitiesIngestor=S,this.global=k,this.nextGen=E,this.pageviewState=P,this.tcf=G}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,u.b2)(),{left:o,right:c}=this.identities.parseCustomerDefinedIdentities(e);if(o.length>0)throw new Error(o.join(" "));const f={...this.identities.getIdentitiesMap(),...c.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:s}=t;return{...e,[r]:{id:n,...void 0!==i?{priority:i}:{},...void 0!==s?{expiry:s}:{}}}}),{})},p=(0,n.zG)(Object.values(f),s.DZ((e=>i.ij(e.id)))),g=this.identities.getPrioritizedIdentities(f);if("string"==typeof e&&(0,a.Bt)("e1cef1f0-495f-4973-ba1c-880786e73a66","e1cef1f0-495f-4973-ba1c-880786e73a66",p,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const h=async e=>{await(0,d.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,reset:this.permutiveReset,userId:this.userId},e.user_id)};return this.taskQueue.add(new l((async e=>{this.logger.debug("<task> identify",c);const n=async()=>{this.logger.log(t,"request identity");const e=await this.api.identify(this.metrics,this.userId,g);this.userId.isEqual(e.user_id)?this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),await h(e))};this.identities.setIdentities(c).identifyRequestRequired()?await n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",c),e(),r.resolve(),await this.identitiesIngestor.ingestIfEligible(c).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!1})}once(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!0})}pageviewTracked=!1;track(){const[e,t,r]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],n=this.trace.startSpan(`track("${e}")`);this.logger.log("<call> track",e);const i=(0,u.b2)();this.pageviewTracked||"Pageview"!==e||(this.pageviewTracked=!0,this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"pageview_tracked",time_origin:"sdk_init"})),this.metrics.trackCounter({name:"sdk_event_track_count_total",labels:{event_name:e},value:1}),i.promise.then((()=>{this.metrics.trackCounter({name:"sdk_event_track_success_count_total",labels:{event_name:e},value:1}),n.finish()}),(()=>{this.metrics.trackCounter({name:"sdk_event_track_fail_count_total",labels:{event_name:e},value:1}),n.finish()}));const s=r.unprocessedData??{},o=s.sessionId??this.sessionManager.getSessionId(),a=s.viewId??this.viewId.get(),c={success:r.success||(e=>{}),error:r.error||((e,t)=>{})};return this.taskQueue.add(new l((n=>{this.logger.log("<task> track",e);return(s.client?Promise.resolve(s.client):this.clientContext.getClientAsync()).then((s=>{const l={name:e,properties:{...t,client:t.client?(0,u.PM)(s,t.client):s},session_id:o,view_id:a,time:new Date};return this.nextGen.trackEvent.current({event:l,useBeacon:r.useBeacon??!1}).then((e=>{this.logger.log("<done> track",l.name),c.success(e),i.resolve(l),n()})).catch((e=>{c.error(e),this.api.reportError(e,this.userId.get()),i.reject(e)}))}))}))),i.promise}trigger(e,t,r){const n=(0,u.b2)();this.logger.log("<call> trigger",e);const i=t=>(i,s)=>{if(i.properties.segment_number===e){const o={result:t};this.logger.debug("<fire> trigger",{event:i,error:s,segmentCode:e,payload:o}),r(o),n.resolve(o)}};return this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentEntry",callback:i(!0),once:!1}),this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentExit",callback:i(!1),once:!1}),this.logger.log("<done> trigger",e),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,u.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new l((n=>{this.logger.log("<task> segment",e);const i=this.nextGen.queryLanguageCohorts.all.current.includes(e)||!1;t(i),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,u.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new l((n=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),r.resolve(i),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.nextGen.reset(),this.userId.reset()]).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){this.logger.debug("[Addon]",`Called for ${e}`,t);const s={...t,permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen,identities:this.identities,pageviewState:this.pageviewState,tcf:this.tcf},a=(0,n.zG)(this.nextGen.pbjsPair,o.UI(i.UI((0,u.vg)("pbjs")))),l=e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)};if("contextual"===e&&i.pC(this.nextGen.addons.contextual))return"contextual"in this.addons||(l(e),this.addons.contextual=this.nextGen.addons.contextual.value),this.addons.contextual(t),this.addons.contextual;if(-1===this.initialisedAddons.indexOf(e))switch(l(e),e){case"web":Promise.resolve().then(r.bind(r,1133)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":Promise.resolve().then(r.bind(r,2521)).then((e=>this.addons.publishers=new e.PublishersAddon(s)));break;case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"tiktok_pixel":case"eyeota_pixel":case"rubicon":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":0;break;case"dfp":Promise.resolve().then(r.bind(r,9326)).then((async e=>this.addons.dfp=await e.createAddon(s)));break;case"rubicon_ssp":Promise.resolve().then(r.bind(r,3904)).then((e=>this.addons.rubicon_ssp=new e.RubiconSspAddon(s)));break;case"clean_room":Promise.resolve().then(r.bind(r,6287)).then((e=>this.addons.clean_room=new e.CleanRoomAddon));break;case"prebid_analytics":Promise.resolve().then(r.bind(r,5029)).then((e=>{this.addons.prebid_analytics=new e.PrebidAnalyticsAddon({...s,pbjs:a,prebidIdentifiers:this.nextGen.prebidIdentifiers})}));break;case"gam_log":Promise.resolve().then(r.bind(r,8884)).then((async e=>this.addons.gam_log=new e.GamLogAddon(s)));break;case"pubmatic":Promise.resolve().then(r.bind(r,6295)).then((e=>this.tcf.registerVendorOnValidConsent("pubmatic",(t=>this.addons.pubmatic=new e.PubMaticAddon({...s,tcfStatus:t})))));break;case"ssp":Promise.resolve().then(r.bind(r,3994)).then((e=>this.addons.ssp=new e.SspAddon(s)));break;case"amazon_publisher_services":(0,n.zG)(i.YP,i.UI((e=>this.addons.amazon_publisher_services=e)));break;case"adswizz_keyvalue":(0,n.zG)(i.YP,i.UI((e=>this.addons.adswizz_keyvalue=e)))}else"web"===e&&!0!==t.auto_init&&((e,t,r,n)=>new Promise(((s,o)=>{const a=(0,i.Y3)(e);if((0,i.pC)(a))return s(a.value);r.once(t,(()=>(0,i.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),s)((0,i.Y3)(e))));const u=n?.timeout??1e4;(0,c.HJ)((()=>o(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,u.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var p=r(7106);const g=e=>{const{logger:t,consentTracking:r}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),r.isRevoked()&&this.consentRevoked(),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}async consentRevoked(){return await this.sessionManager.reset(),this.reset()}track=(()=>(0,p.v)(super.track.bind(this),i,r.isRevoked))()}},h=(e,t,r,i,s,o,a,c,u,l,d,p,h,_,m,v,b,y,w,I,S,k,E,P,G,x,z,U,D)=>new((0,n.zG)(f,g({consentTracking:x,logger:e})))(e,t,r,i,s,o,a,c,u,l,d,p,h,_,m,v,b,y,w,I,S,k,E,P,G,z,U,D)},9215:(e,t,r)=>{r.d(t,{Yj:()=>c,TZ:()=>a});var n=r(5654),i=r(7707);var s=r(3075);const o=async e=>{await e.identities.thirdParty,await function(e,t){return(0,s.Bt)("e1cef1f0-495f-4973-ba1c-880786e73a66","e1cef1f0-495f-4973-ba1c-880786e73a66",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=await function(e){const t=e.trace.startSpan("identify");0;return(async e=>{const t="[Identify Init]",{logger:r,api:n,userId:s,identities:o,metrics:a,identitiesIngestor:c,messages:u,sessionManager:l}=e,d=await o.thirdParty,f=o.extractIdentifyFromQueue(e),p={...o.getIdentitiesMap(),...f.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:s}=t;return{...e,[r]:{id:n,...s?{expiry:s}:{},...void 0!==i?{priority:i}:{}}}}),{})},g=o.setIdentities(Object.entries(p).map((e=>{let[t,{id:r,priority:n,expiry:i}]=e;return{tag:t,id:r,...i?{expiry:i}:{},...void 0!==n?{priority:n}:{}}})));o.setReady();const h=o.getPrioritizedIdentities(p);r.log("Begin identification");const _=e.sessionCount>1&&l.sessionHasChanged()||d.identifyRequestRequired()||g.identifyRequestRequired()?await(r.debug(t,"request identity"),n.identify(a,s,h).then((e=>{const n=e.user_id;return s.isEqual(n)?{identityChanged:!1}:(r.debug(t,"fetch received new user id",n),{identityChanged:!0,userId:n})})).catch((e=>(n.reportError(`${t} Fetch failed. Got ${e}`,s.get()),{identityChanged:!1}))).then((0,i.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(r.debug(t,"skip request"),{identityChanged:!1});return c.ingestIfEligible(h).catch((e=>n.reportError(`Couldn't ingest identities, got ${e}`,_.identityChanged?_.userId:s.get()))),u.emit("permutive:user:ready"),r.debug(t,"result",_),_})(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,n.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?await c(e,t.userId):e.logger.log("Identity has not changed"),t},a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};o(e).then(t),u(e.global,e.clientContext)};async function c(e,t){e.logger.log("Identity has changed"),await e.reset.reset(),e.userId.set(t),u(e.global,e.clientContext),e.identities.setIdentities([])}function u(e,t){return e.context=t.getContext()}},7862:(e,t,r)=>{function n(e,t,r,n){n.debug("set SDK as ready"),e.emit("permutive:api:ready"),e.emit("permutive:queries:initialised"),t.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.warn("sdk_query_states_byte_total metric needs re-implementing")}r.d(t,{R:()=>n})},7970:(e,t,r)=>{r.d(t,{LA:()=>a});var n=r(9912),i=r(856),s=r(7707);const o=(e,t,r)=>{let{api:n,state:i}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function a(e,t,r,n,i,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const u=c(e),l=s.startSpan("queued_methods"),f={api:i,state:t},p=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else o(new Error("Does not exist."),e,f)},g=e=>!a.includes(e);u.forEach((e=>{try{g(e.functionName)&&p(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");o(r,e,f)}})),l.finish()}function c(e){const t=(0,n.uK)((e=>-1!==l.indexOf(e.functionName)))(e),r=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),a=(0,i.Zt)(((e,t)=>u(e)&&u(t)?(0,s.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,s.lW)(l).compare(e.functionName,t.functionName)));return(0,n.DY)(a)(r).concat(o)}const u=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],f=["dfp","appnexus_adserver","web"]},9356:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initialiseWebSDK:()=>initialiseWebSDK});var _permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5654),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8236),fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(7144),fp_ts_function__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2169),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(132),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8683),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8180),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3075),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(2335),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(9661),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(159),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8559),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5416),_sdkql_event_collection_events_cache_store_crypto_SHA256Digest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2875),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8353),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(6051),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6999),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2644),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(4782),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(9468),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(42),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(5265),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9607),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7806),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(9869),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9671),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7707),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5940),_Config__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7626),_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9215),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(7862),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7970),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2980),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1844),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7226),main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6843),main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2049);const prefix="[Initialisation Web]",initialiseWebSDK=_ref=>{let{cookieStore,clientContext,currentScript,consentModule,core,externalData,localStorage,logger,messages,metrics,namespace,pageviewState,partialTagWithKey,permutiveData,sessionManager,tag,trace,configFromQueryParams,urls,userId}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((async()=>{const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(pageviewState.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((e=>e.viewId)),(e=>new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__.W(e))),network=new main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E(logger,metrics),sessionStorage=(0,main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__.u)(namespace,logger,consentModule.consentTracking.consentRef),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_14__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_14__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_14__.iq)}))),window[windowKey].consent=consentValidation;const createInternalsSpan=trace.startSpan("internals");(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e])))),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(userId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["user_id",e]))));const api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__.F(urls,config,network,metrics,logger),tcf=(0,_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__.SD)(window,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger,tcf},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__.u(trace,metrics,messages),unprocessedArgs={consent:consentTracking.consentRef,logger,namespace},unprocessedEvents={PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__.X,permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__.a(config,localStorage,logger,permutiveData,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__.i(messages),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),webClient=(()=>{const[e,t]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(Date.now());return(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.UM)((()=>t(Date.now())),1e3),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(viewId.ref,e),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((()=>clientContext.getClient())),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t))))})(),eventCacheStoreFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1358))),String),trace.traceTask("import-DBStore-main-thread"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.UI)((e=>{let{DBStore:t}=e;return new t((0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__.E)(namespace,logger,consentTracking.consentRef))}))),eventsCacheFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1725))),String),trace.traceTask("import-events-cache"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.tS)((e=>{let{EventsCache:t}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(t.initialise(config,logger,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};api.reportError(e,t?.userId,t?.timestamp)}),trace,metrics,userId.ref,eventCacheStoreFactory),trace.traceTask("initialise-events-cache-main-thread"))}))),nextGen=await(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,6970)))),trace.traceTask("import-next-gen"),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.Qt("configureCore",core),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.tS((e=>{let{runNextGenFeatures:t,configureCore:r}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((async()=>t({activationManager,addonsLoaded:addonsLoadedRef,api,currentScript,clientContext,config,consentTracking:fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G(consentTracking),core:r({eventsCacheFactory,migratedStateMaps:()=>({internal:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("internal_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn)),external:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("external_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn))})}),externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,sessionManager,urls,userId,viewId,pageviewState:pageviewState.ref,trace,webClient:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(webClient,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI(fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G))}))),trace.traceTask("run-next-gen-features"))})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__.u(permutiveData,permutiveReset,userId,viewId,logger),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,clientContext,unprocessedEvents,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen,pageviewState,tcf);createInternalsSpan.finish();const context=clientContext.getMutableContextUNSAFE();[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__.Y3((()=>eval(s)),(e=>{api.reportError({...e,message:`Error running custom script ${s}`},userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised");const initialIdentifyResult=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.b2)();let globalIdentifyBound=!1;messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),globalIdentifyBound=!0;const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0?initialIdentifyResult.resolve(permutiveGlobal.identify(e)):initialIdentifyResult.resolve()})),messages.on("permutive:blockers:empty",(()=>{if(!globalIdentifyBound){const e=permutiveGlobal.identify;permutiveGlobal.identify=t=>(e(t),initialIdentifyResult.promise)}permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getMutableContextUNSAFE(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,namespace,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish(),await(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__.TZ)({api,clientContext,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,permutiveMethods,reset:permutiveReset,trace,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__.R)(messages,metrics,state,logger),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(nextGen.realtime,nextGen.queryLanguageCohorts.all),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e[0]===t[0])),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.bw((e=>{let[t,r]=e;t&&permutiveRealtime.setAsRealtime(r.length)})))}),(e=>`Exception during initialisation. Got ${e}`))}},304:(e,t,r)=>{r.r(t),r.d(t,{runSdk:()=>ge});var n=r(7144),i=r(2169);var s=r(132),o=r(7226),a=r(8236);var c=r(750);class u{namespace;config;logger;constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}makeCookie(e,t,r){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",r,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:n}=this.config??{};throw this.logger.warn(`Unable to set cookie. ${c.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:n}),new Error(c.LP)}const r=this.makeCookie(e,t,this.config.cookieExpiry);if(r.length>c.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${c.eP}`),new Error(c.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var l=r(7106);const d=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{setCookie=(()=>(0,l.v)(super.setCookie.bind(this),n,r.isRevoked))()}};var f=r(5654),p=r(842),g=r(9144);class h{namespace;constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,p.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,i.zG)((0,g.P)(t),(0,n.UI)((t=>this.setExternalData(e,t))),(0,n.g_)((e=>{throw(0,f.w)(e)}),i.Q1))}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}const _=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=n,s=n;return e=>class extends e{setExternalData=(()=>(0,l.v)(super.setExternalData.bind(this),i,r.isRevoked))();setExternalJsonData=(()=>(0,l.v)(super.setExternalJsonData.bind(this),s,r.isRevoked))()}};var m=r(1844),v=r(3643),b=v.li,y=v.Yg;v.Kl,v.Lx,v.u4,v.nq;class w{sdkInitTimestamp;prefix;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.initialPrefix;this.sdkInitTimestamp=e,this.prefix=t}static initialPrefix=(()=>[S("Permutive"),self.document?S("M","#43dde2"):S("W","#FF5C00")])();get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}debug(){return console.debug.bind(self.console,`%c%s${this.prefixTemplate}`,"color: blue;",this.timeDeltaFromInit,...this.prefixContent)(...arguments)}warn(){return console.warn.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}error(){return console.error.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}withPrefix(e,t){return new w(this.sdkInitTimestamp,[...this.prefix,S(e,t)])}get prefixTemplate(){return this.prefix.map(b).join("")}get prefixContent(){return this.prefix.map(y).flat()}}class I{log(){}debug(){}warn(){}error(){}withPrefix(){return this}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#0469d0";const r=[`background-color: ${t}`,"color:white",`border:1px solid ${t}`,"padding: 0px 2px","margin: 0px 1px","border-radius: 2px"].join(";");return["%c%s",[r,e]]}const k="[MESSAGES]";class E{logger;messageListenerMap={};replayQueue={};onceTracker={};defaultMessageOptions={withReplay:!1,once:!1};constructor(e){this.logger=e}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const i=P(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):P(e,this.messageListenerMap)[t]=i.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);P(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){P(e,this.replayQueue).push(t)}processReplayQueue(e,t){this.replayQueue[e]?.forEach((e=>t(e)))}emitMessageWithPayload(e,t){this.messageListenerMap[e]?.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){P(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){this.onceTracker[e]?.includes(t)&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...this.defaultMessageOptions,...e}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(k,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(k,...t)}}const P=(e,t)=>t[e]??=[];var G=r(2945);class x{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=(()=>D())();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=U(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,i.zG)(G.gz(a.G5)(this.timeOriginForContext,this.timeOriginSdkInit),a.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,i.zG)(this.synchroniseTimeBetweenContexts(r),a.UI((e=>(e-this.sdkInitTimestamp)/1e3)),a.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class z{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const U=(e,t)=>({...e,value:e.value+t}),D=()=>(0,i.zG)(a.Y3((()=>performance.timeOrigin)),a.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var C=r(7707),R=r(7266),A=r(946);class M{config;namespace;logger;prefix="[Data Store]";permutiveData={};permutiveDataSize=0;localStorageScheduler;localStorageQueue=(()=>new Set)();debouncedStorageKeys;debouncedFlush;constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.localStorageScheduler=new R.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return{...this.getDataChunk("misc"),...this.getDataChunk("queries")}}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,p.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"queries":return this.config.permutiveDataQueriesKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return n.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,f.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,C.eu)(this.permutiveData,e);switch(e){case"internal_query_states":case"external_query_states":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(T)];case A.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:tiktok_pixel":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(O)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const T=["internal_query_states","external_query_states","event-source-id"],O=[A.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:tiktok_pixel","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"],q=e=>{const{logger:t,consentTracking:r}=e,i=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),n.F2(void 0));return e=>class extends e{writeData=(()=>(0,l.v)(super.writeData.bind(this),i,r.isRevoked))()}};class j{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var L=r(8683);class ${config;cookies;externalData;ref;isNewlyGenerated;setState;constructor(e,t,r,n){this.config=e,this.cookies=t,this.externalData=r;const[s,o]=L.Ue(this.getOrGenerateUserId());this.ref=(0,i.zG)(s,L.UI((e=>e.userId))),this.isNewlyGenerated=(0,i.zG)(s,L.UI((e=>e.isNewlyGenerated))),this.setState=o,(0,i.zG)(L.vP(this.ref,n),L.YP((e=>{let[t,r]=e;r?(this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t)):(this.cookies.deleteCookie(this.config.cookieName),this.externalData.removeExternalData(this.config.cookieName))})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setState({userId:e,isNewlyGenerated:!1})}reset(){this.setState({userId:(0,C.k$)(),isNewlyGenerated:!0})}getOrGenerateUserId(){return(0,i.zG)(this.getUserIdFromCookie(),a.wp((()=>this.getUserIdFromLocalStorage())),a.UI((e=>({userId:e,isNewlyGenerated:!1}))),a.fS((()=>({userId:(0,C.k$)(),isNewlyGenerated:!0}))))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=a.DT(C.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),a.ij,a.tS(t))}}class F{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const i=this.getUrlPrefix(e),s=(0,a.g_)((()=>""),(e=>`/${e}`))(r),o=`${this.getBaseUrl()}${i}${s}${t}`;return this.makeUrlWithQueryParams(o,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}const B=`permutive.${self.document?"main":"worker"}.`;class N{config;shouldUsePerformanceMark=!1;constructor(e){this.config=e,this.shouldUsePerformanceMark=(self.performance?.mark&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(e){const t=this.generateSpan(`${e}_since_init`);return t.start({startTime:m.NC}),{spanId:t.spanId,finish:t.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=N.generateUniqueMarkerNames(e);return{spanId:r,start:e=>self.performance?.mark(r,e),finish:e=>{self.performance?.mark(n,{startTime:e?.startTime??performance.now()}),self.performance?.measure?.(t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${B}${e}`,r=`${t}${N.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var Q=r(7626),Y=r(7455);const K="permutive-consent",W=(e,t)=>(0,i.zG)((0,a.ij)(t),(t=>!1===e&&(0,a.Wi)(t)?{isValid:!0,consentData:H()}:(e=>(0,a.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>!0===e.opt_in&&"string"==typeof e.token&&e.token?.length>0)(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:V()})),H=()=>({opt_in:!0,token:K}),V=()=>({opt_in:!1,token:""}),J=e=>{return(0,i.ls)((t=e,e=>(0,i.zG)(W(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,K),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},X=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},Z=async e=>{const{logger:t,namespace:r,consentRequired:o,messages:a}=e,c=new Y.oP(window.localStorage,r),u=W(o,await c.get(K)),l=await(0,i.zG)(s.Y3((()=>c.put(u.consentData,K)),(e=>new Error(`LocalStorage access is required. ${(0,f.w)(e).message}`))),(e=>e()));if(n.nM(l))return l;const{consentRef:d,giveConsent:p,revokeConsent:g,isRevoked:h,isGiven:_}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=L.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(u.isValid),m={consentRef:d,isGiven:_,isRevoked:h,listenForConsent:X(a)};m.listenForConsent(g,p);const v=J({consentDatabase:c,consentRequired:o,logger:t,messages:a});return n.F2({consentTracking:m,consentValidation:v,consentDatabase:c})};var ee=r(9912),te=r(9356);const re=e=>{const{partialTagWithKey:t}=e,r=t.key;var s;window[r].consent=(s=e,(0,i.ls)(s.consentModule.consentValidation,a.DT(Boolean),a.UI((0,te.initialiseWebSDK)(s)),i.Q1));const c=(0,a.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get(K)),(0,o.UI)((e=>W(t.consentRequired,e).isValid)));var t}),o.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:r}=e;const n=(0,ee.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,a.UI)((e=>t.consentValidation(e.arguments[0])))(n)})(e),c),(0,o.UI)((e=>e?(0,n.F2)(!0):(0,n.t$)("No consent to run on the page"))))},ne=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,n.F2)(new e.Map([["a",1]])):(0,n.t$)("Maps not supported"))(e),n.tS((e=>1===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Maps not supported")))),ie=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,n.F2)(new e.Set([1,2])):(0,n.t$)("Sets not supported"))(e),n.tS((e=>2===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Sets not supported")))),se=e=>(0,i.zG)((0,G.gz)(n.G5)(ne(e),ie(e),(e=>e.Worker&&e.Blob?(0,n.F2)(null):(0,n.t$)("WebWorkers not supported"))(e)),(e=>(0,n.UI)(i.Q1)(e)));const oe=()=>{const e=(0,r(8775).Z)(),t=new MessageChannel,n=(e=>{const t=[],r=[],n=()=>{for(;t.length>0&&r.length>0;)r.shift()()},i=e=>new Promise((t=>{r.push((()=>t(e()))),(0,m.HJ)(n)}));return e.onmessage=(0,m.GL)((e=>{null!==e.data&&(t.push(e.data),(0,m.HJ)(n))})),{next:()=>i((()=>t.shift())),read:()=>i((()=>t.splice(0)))}})(t.port1);return e.postMessage({port:t.port2},[t.port2]),s=>function(e){let{worker:t,trace:n,metrics:s,...c}=e;return t.send({...c,globals:self._____workerGlobals,initialTimestampSecs:(0,i.zG)(a.lo(!1),a.UI((()=>Math.floor(Date.now()/1e3)))),metricsEnabled:s.isEnabled(),timeOriginMainContext:D()}),(0,i.zG)((0,m.SF)((()=>Promise.resolve().then(r.bind(r,2591)))),n.traceTask("import-master-low-priority"),o.UI((e=>r=>e.startMaster({...r,metrics:s,trace:n,worker:t}))))}({...s,worker:{...n,send:e=>t.port1.postMessage(e),stop:()=>e.terminate()}})};var ae=r(5265);class ce{db;options;constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?{...e,last_updated:new Date(e.last_updated)}:null}reset(){return this.db.delete(this.options.session_data_key)}async persistSessionData(e){const t=e.last_updated.toISOString();await this.db.put({...e,last_updated:t},this.options.session_data_key)}static generateNewSession(e){return{session_id:(0,C.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static async initialise(e,t,r){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const s=new Date,o=await t.get(n.session_data_key).catch(i.gn),a=ce.decodeSessionData(o),c=null===a||ce.hasExpired(s,a.last_updated,n.timeout_seconds)?{...ce.generateNewSession(s),hasChanged:!0}:{...a,last_updated:s,hasChanged:!1},u=new ce(t,(0,C.PM)(n,c));return await u.persistSessionData(c),u}}var ue=r(9449),le=r(7812);class de{getContextFromEnvironment;context;lastContextFromEnvironment;constructor(e,t){this.getContextFromEnvironment=t,this.lastContextFromEnvironment=t(),this.context=e,this.updateContext(...Object.entries(this.lastContextFromEnvironment),...Object.entries(e))}getMutableContextUNSAFE(){return this.refresh(),this.context}getContext(){return this.refresh(),{...this.context}}getClient(){return this.refresh(),{domain:this.context.domain,referrer:this.context.referrer,title:this.context.title,type:this.context.type,url:this.context.url,user_agent:de.applyUserAgentExtension(this.context.user_agent)}}static applyUserAgentExtension(e){const t="PermutiveWebSDK/v20.61.0";return e?`${e} ${t}`:t}refresh(){const e=this.getContextFromEnvironment(),t=t=>this.lastContextFromEnvironment[t]===this.context[t]?e[t]:this.context[t]||e[t];this.updateContext(...(0,i.zG)(Object.keys(e),le.UI((e=>(0,i.bc)(e,t(e)))))),this.lastContextFromEnvironment=e}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class fe extends de{constructor(e,t){super(e,(()=>({type:"web",user_agent:navigator.userAgent,url:(0,ue.bk)(window.location.href),domain:window.location.hostname||"",title:document.title,referrer:(0,ue.bk)(document.referrer),path:window.location.pathname,view_id:t()})))}async getClientAsync(){return this.getClient()}}const pe=e=>(0,i.zG)(s.Do,(0,i.ls)(s.Qt("support",s.Uo(se(self))),s.Qt("partialTagWithKey",s.Uo((e=>{const t="e1cef1f0-495f-4973-ba1c-880786e73a66",r=void 0!==e[t]?.q&&void 0!==e[t]?.config?t:"permutive";return(0,i.zG)(e[r],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:r}))))})(window))),s.UI((e=>{const t=e.partialTagWithKey.key;return window[t].sdkVersion="v20.61.0",e})),s.Qt("configFromQueryParams",s.Uo((0,Q.B9)())),s.Hr("tag",(e=>((e,t)=>{let{tag:r,key:n}=e;return{...r,config:(0,Q.ti)({...r.config,windowKey:n},t)}})(e.partialTagWithKey,e.configFromQueryParams))),s.UI((e=>{{const r=e.partialTagWithKey.key,n=window[r];t=n,window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{const e=googletag.pubads(),r=()=>{t.track("AdRequest",{ad_server_id:"dfp",cohorts:e.getTargeting("permutive")})},n=e.getSlots().filter((e=>e.getResponseInformation())).length;for(let e=0;e<n;e++)r();e.addEventListener("slotRequested",r)}))}var t;return e})),s.Hr("trace",(e=>{let{tag:t}=e;return new N(t.config)})),s.Hr("namespace",(e=>{let{tag:t}=e;return new j(t.config)})),s.Hr("logger",(e=>{let{tag:t}=e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.RP;return e.loggingEnabled&&void 0!==self.console?.log?new w(t):new I}(t.config)}))),s.Hr("urls",(e=>{let{tag:t}=e;return new F(t.config)})),s.Hr("messages",(e=>{let{logger:t}=e;return new E(t)})),s.Hr("worker",(()=>oe())),s.ak("consentModule",(e=>(0,i.zG)((()=>Z({...e,consentRequired:e.tag.config.consentRequired})),s.Vn((e=>e.message))))),s.Hr("cookieStore",(e=>{let{consentModule:t,logger:r,namespace:n,tag:s}=e;return((e,t,r,n)=>new((0,i.zG)(u,d({consentTracking:n,logger:r})))(e,t,r))(n,s.config,r,t.consentTracking)})),s.Hr("externalData",(e=>{let{consentModule:t,logger:r,namespace:n}=e;return((e,t,r)=>new((0,i.zG)(h,_({consentTracking:r,logger:t})))(e))(n,r,t.consentTracking)})),s.Hr("userId",(e=>{let{cookieStore:t,consentModule:r,externalData:n,tag:i}=e;return new $(i.config,t,n,r.consentTracking.consentRef)})),s.Hr("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:s}=e;return((e,t,r,n)=>new((0,i.zG)(M,q({consentTracking:n,logger:r})))(e,t,r))(t.config,r,n,s.consentTracking)})),s.Hr("metrics",(t=>{let{tag:r,logger:n,permutiveData:i}=t;return function(e,t,r,n,i){const s=n.getData("metricsEnabled")??(()=>{const e=Math.random()<=r.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})()?new x(e,t,i):new z;return s.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}}),s}(e.contextsInitTimestampPerformance,D(),r.config,i,n)})),s.Hr("pageviewState",(e=>{let{tag:t}=e;return(e=>{const t={viewId:(0,i.zG)(e.viewId,a.DT((e=>"string"==typeof e&&(0,C.Gz)(e))),a.fS(C.k$)),watsonEnabled:e.watson.enabled};return(0,i.zG)(L.Ue(t),(e=>{let[r,n]=e;return{ref:r,setState:(0,i.ls)((e=>e(r.current,t)),n)}}))})(t.config)})),(0,i.ls)(s.Hr("localStorage",(e=>{let{logger:t,namespace:r,consentModule:n}=e;return(0,ae.E)(r,t,n.consentTracking.consentRef)})),s.ak("sessionManager",(e=>{let{cookieStore:t,localStorage:r,logger:n}=e;return s.Y3((()=>ce.initialise(t,r,n)),(e=>`Failed to initialise session manager: ${e.message}`))})),s.Hr("clientContext",(e=>{let{tag:t,pageviewState:r}=e;return new fe(t.context||{},(()=>r.ref.current.viewId))})),s.Hr("core",(t=>{let{clientContext:r,consentModule:n,metrics:s,pageviewState:o,permutiveData:c,sessionManager:u,trace:l,tag:d,userId:f,worker:p}=t;const{eventSourceId:g,isFirstPageview:h}=(0,i.zG)(a.ij(c.getData("event-source-id")),a.hX(C.Gz),a.UI((e=>({eventSourceId:e,isFirstPageview:!1}))),a.fS((()=>({eventSourceId:(0,C.k$)(),isFirstPageview:!0})))),_=n.consentTracking.consentRef;if(h)if(_.current)c.setData("event-source-id",g);else{let e=!1;_.onChange((()=>{e||(e=!0,c.setData("event-source-id",g))}))}return p({consent:_.current,eventSourceId:g,isFirstPageview:h,isSecureContext:(m=d.config,"development"===m.environment?self.isSecureContext:"https:"===self.location.protocol),metrics:s,permutiveConfig:d.config,organizationId:"e1cef1f0-495f-4973-ba1c-880786e73a66",pageviewState:o.ref.current,sdkInitTimestampPerformance:e.contextsInitTimestampPerformance,sdkInitTimestampDate:e.contextsInitTimestamp,sessionId:u.getSessionId(),trace:l,trackPageviewComplete:!0,userId:f.get(),userIdIsNewlyGenerated:f.isNewlyGenerated.current,webClient:r.getClient()});var m})),s.Hr("currentScript",(()=>a.ij(e.currentScript))),s.ak("consent",(e=>re(e))),s.tS((e=>(0,i.zG)((0,m.SF)((()=>Promise.resolve().then(r.bind(r,9356)))),e.trace.traceTask("permutive.main.import_permutiveWebLowPriority"),o.tS((t=>t.initialiseWebSDK(e)))))))),ge=e=>(e=>{e().then((0,n.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))})(pe(e))},7707:(e,t,r)=>{r.d(t,{Bf:()=>v,CX:()=>O,G6:()=>S,Gz:()=>y,HP:()=>U,Kn:()=>l,Or:()=>P,PM:()=>f,PQ:()=>k,Z_:()=>x,a4:()=>g,aT:()=>m,b2:()=>p,bw:()=>R,cO:()=>E,eu:()=>h,k$:()=>b,lW:()=>G,lo:()=>A,m8:()=>w,mQ:()=>D,qh:()=>d,rH:()=>T,rO:()=>C,vg:()=>z});var n=r(9912),i=r(2169),s=r(8236),o=r(856),a=r(4327),c=r(229),u=r(1844);const l=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,d=e=>Object.entries(e);function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>({...e,...t})),{})}a.ff(c.xb);function p(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function g(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:o,exponentialBackOff:a,maxAttempts:c}=f(n,r);let l=0;const d=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,s.G)(e)))):(0,i.zG)(l++,(e=>e<c?(0,u.HJ)((()=>n(d(r*(a?2:1)))),r):n(s.YP)))))));return d(o)}function h(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let _=[];function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(_.unshift(e),_.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!s&&e){s=!0;const e=_;_=[],e.forEach((e=>{try{e()}catch{}}))}};let s=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&I(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={capture:!0,...t};const r=["visibilitychange","pagehide"];r.forEach((r=>window.addEventListener(r,(()=>s.Y3((()=>{"pagehide"!==r&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function y(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function w(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function I(e){return/Mobi|Android/i.test(e)}function S(e){return/^((?!chrome|android).)*safari/i.test(e)}function k(e,t){return new Promise((r=>{(0,u.HJ)((()=>{Promise.resolve(e()).then(r)}),t?.timeout??0)}))}function E(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const P=()=>({equals:(e,t)=>Object.is(e,t)});function G(e){return(0,o.Zt)(((t,r)=>{const n=e.indexOf(t),i=e.indexOf(r);switch(!0){case-1===n&&-1===i:return 0;case-1!==n&&-1===i:return-1;case-1===n&&-1!==i:return 1;default:return n<=i?-1:1}}))}function x(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function z(e){return t=>null!=t&&e in t?t[e]:void 0}function U(e){let t=s.YP;const r=(0,s.fS)((()=>{const r=e();return t=(0,s.G)(r),r}));return()=>r(t)}const D=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},C=e=>t=>{const r={...t};for(const n in e)r[n]=e[n]?.(t[n]);return r};function R(e){return t=>(e(t),t)}const A=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,s.DT(r),s.UI(n))})),s.fS((()=>o(t))))},M=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},T=M(parseInt);M(parseFloat);function O(e){return Math.abs(function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}(e))/Math.pow(2,31)}},7266:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(7707),i=r(1844);class s{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aT)(e)}debounce(e,t,r,s){let o,a,c,u=[];return l=>{s&&(c=s.concat(c??s.empty,l));const d=(0,n.b2)();u.push(d);return o?.(),o=(0,i.HJ)((()=>{a?.(),a=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=s?.empty,u=[]}),t),a||(a=(0,i.HJ)((()=>{o?.(),a=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=s?.empty,u=[]}),r)),d.promise}}}},5940:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(1844);class i{messages;queue=[];nextNotify=null;constructor(e){this.messages=e,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,n.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];if(i.complete)r+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},9449:(e,t,r)=>{r.d(t,{_Y:()=>o,bk:()=>s,zM:()=>i});var n=r(2169);const i=()=>{const e=window.location.href.split("?")[1]?.split("#")[0]?.split("&");return void 0===e?{}:e.reduce(((e,t)=>{const[r,n]=t.split("=");return{...e,[r]:n}}),{})},s=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&t?.length>0?t[0]:n&&n?.length>0?"localhost":""}},962:(e,t,r)=>{r(8559),r(7707),r(1844)},8230:(e,t,r)=>{r.d(t,{$7:()=>_,Cg:()=>p,Qd:()=>h,cs:()=>g,dN:()=>d,zi:()=>f});var n=r(7144),i=r(2169),s=r(8236),o=r(7812),a=r(7313),c=r(8683),u=r(7707);const l="[PrebidJS]";function d(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(l,"Found keys",t);return a.K4((()=>(0,i.zG)(t,o.UI((0,i.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>r),(()=>{const t=(0,i.zG)(window,(0,u.vg)(e));return!(!t?.que||"function"!=typeof t?.getEvents||(r=t,0))}),t)}})(e)),(t=>(0,i.zG)(c.p4(t.pbjs),c.UI((r=>{const o=n.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`${l} ${r.toString()}`),s.YP)));return(0,i.zG)(r,(0,u.bw)(s.UI((r=>e.logger.debug(l,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),s.UI(o),s.UI(s.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>c.vP(...e)),c.UI((e=>({completedChecks:e.every(s.pC),pbjsKeyPairs:e.map(s.xH)}))),c.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const n=t.filter(s.pC),[a,...c]=n;return{completedChecks:r,mainPair:a??s.YP,otherPairs:(0,i.zG)(c,o.DZ(i.yR))}})))))}const f=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function p(e){const t=e.meta?.advertiserDomains;if("string"==typeof t)return[t];if(Array.isArray(t)){const e=t.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const g=e=>{const t=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,r=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,n=t||r||e?.meta?.networkId;return n?`${n}`:void 0},h=e=>{const t=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?t(e.cpm):(0,i.zG)(e.cpm??"",parseFloat,t)}catch{return}},_=e=>e.dealId?`${e.dealId}`:void 0},9661:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const i=r.indexOf(n);i>=0&&(r.splice(i,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},514:(e,t,r)=>{r.d(t,{zh:()=>c});var n=r(2161),i=r(8236),s=r(2169),o=(r(281),r(7812)),a=(r(4214),r(2945),r(7707));const c=(e,t)=>r=>({all:(0,s.zG)(r,n.UI(e)),byAdServer:(0,a.mQ)((0,s.ls)(t,i.UI((e=>(0,s.zG)(r,n.UI(e))))))});n.of(o.bM()),(0,a.mQ)((e=>i.YP))},8353:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(8683);class i{ref;setCustomProps;constructor(){const[e,t]=n.Ue({});this.ref=e,this.setCustomProps=t}getCustomProps(){return this.ref.current}}},1725:(e,t,r)=>{r.r(t),r.d(t,{EventsCache:()=>I,RESET_HISTORICAL:()=>b});var n=r(5654),i=r(2945),s=r(7812),o=r(7144),a=r(2169),c=r(8236),u=r(7226),l=r(132);const d=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),f=e=>({id:e.id,name:e.name,time:(p(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),p=e=>isFinite(e)&&e instanceof Date;var g=r(7707),h=r(7266);class _ extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const m="permutive-events-cache",v="permutive-events-for-page",b="historical",y="[EVENTSCACHE]",w=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class I{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=(()=>this.makeEventsRepository(m))();eventsForPage=(()=>this.makeEventsRepository(v))();eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new h.b(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,r,n,i,s,o){return(0,a.zG)(o(),l.UI((a=>new I(e,t,r,n,i,s,o,a))))}constructor(e,t,r,n,i,s,o,l){this.config=e,this.logger=t,this.reportError=r,this.trace=n,this.metrics=i,this.userId=s,this.makeEventsStore=o,this.eventStore=l,this.eventsTTLInMilliseconds=(0,a.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,g.HP)((()=>(0,g.PQ)((0,a.zG)(u.tD((()=>this.trace.startSpan("load_event_cache"))),u.tS((e=>(0,a.zG)(this.loadFromDisk(),u.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),s.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),n.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const r=s.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(s.xH)}async add(e,t){let{persistOnDisk:r}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,a.zG)(this.eventsForPage.events,u.UI((t=>[...t,e])),g.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,a.zG)(this.eventsTTLInMilliseconds,c.EQ((()=>a.yR),(e=>s.hX((t=>e>Date.now()-t.time.getTime())))));return(0,a.zG)(u.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),u.YO("loadEventsCacheTask"),u.ak("eventsFromDisk",(()=>(0,a.zG)(s.nI([this.eventStore.get(m),this.eventStore.get(v)]),s.UI(l.LV((0,g.lo)([[e=>e instanceof _,(0,a.ls)(e,u.of)],t=>(0,a.zG)(u.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),u.tS((()=>()=>this.reset("historical"))),u.UI(e))]),(0,a.ls)(c.fS(e),u.of))),s.vP(u.qA)))),u.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),u.UI((0,a.ls)((0,g.vg)("eventsFromDisk"),s.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),s.UI(d),t)))}async reset(e){return(0,a.zG)(u.tD((()=>this.logDebug("Resetting Events Cache"))),u.tS((()=>this.eventStore.deleteStore())),l.tS((()=>this.makeEventsStore())),l.Zl((t=>(this.eventStore=t,e===b?i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.flush):i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),l.wE((()=>()=>this.all())),l.fS((()=>u.of(S()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(o.F2((0,a.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,a.zG)(u.tD((()=>this.logDebug(`Writing ${e.length} events to ${m.key}`))),u.tS((()=>this.eventStore.put(e.map(f),m.key))),l.UI(a.Q1)),i=(0,a.zG)(u.tD((()=>this.logDebug(`Deleting events for ${m.key}`))),u.tS((()=>this.eventStore.delete(m.key))),l.Vn(n.w)),s=(0,a.ls)(u.of,u.At((e=>()=>this.logError(`Events cache failed to put ${m.key}. Got ${e}`))),u.tS((0,g.lo)([[e=>w(e)&&m.retryAttempts<9,()=>(0,a.zG)(u.tD((()=>{m.retryAttempts+=1,this.logDebug(`Attempt #${m.retryAttempts} to write ${m.key} to EventsStore`)})),u.tS((()=>_)),u.tS((()=>d)))],[e=>w(e),e=>(0,a.zG)(u.tD((()=>this.logDebug(`Attempted ${m.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),u.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${m.key}. Got ${e}`,userId:this.userId.current}))),u.tS((()=>l.t$(e))))],l.t$]))),c=e=>l.tD((()=>{this.logDebug(`Successfully wrote events for ${m.key} after ${m.retryAttempts} attempts`),m.retryAttempts=0,m.sizeInBytes=2*JSON.stringify(e).length,m.sizeInBytesLastSuccessfulWrite=m.sizeInBytes})),d=(0,a.zG)((()=>m.events()),u.tS((e=>(0,a.zG)(r(e),u.mU(o.EQ(s,(()=>c(e)))))))),p=(e,t)=>(0,a.zG)(e.events,u.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=u.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),h=(e,t)=>{let[r,...n]=e;return r&&0!==t?(0,a.zG)(p(r,t),u.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),h(n,e))))):u.of((0,a.Q1)())},_=(0,a.zG)(l.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),l.fX(o.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),l.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,a.zG)(h(r,t),l.fF)}))),m={key:e,events:u.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,a.zG)(u.tD((()=>this.trace.startSpan(`write_${m.key}`))),u.tS((e=>(0,a.zG)(d,u.At((()=>()=>e.finish()))))),t),reset:()=>(0,a.zG)(u.tD((()=>{m.events=u.of([]),m.sizeInBytes=0,m.sizeInBytesLastSuccessfulWrite=0})),u.tS((()=>i)),t)};return m}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(y,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(y,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(y,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(y,...t)}}const S=()=>[]},1358:(e,t,r)=>{r.r(t),r.d(t,{DBStore:()=>o});var n=r(5654),i=r(8236),s=r(132);class o{db;constructor(e){this.db=Promise.resolve(e)}put(e,t){return(0,s.Y3)((()=>this.db.then((r=>r.put(e,t)))),n.w)}get(e){return(0,s.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),n.w)}delete(e){return(0,s.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,s.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}},5416:(e,t,r)=>{r(7707)},2875:(e,t,r)=>{r(1844)},2400:(e,t,r)=>{r.r(t),r.d(t,{eventCacheService:()=>u,eventNameBlacklist:()=>l});var n=r(8683),i=r(7313),s=r(4694),o=r(2169),a=r(7812),c=r(7707);const u=e=>i.K4((()=>({newEvents:(0,o.zG)(e.newEvents,n.UI(s.UI((0,c.bw)(a.UI((t=>{let[,r]=t;l.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))),l=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"])},946:(e,t,r)=>{r.d(t,{Kd:()=>i,eJ:()=>s});r(8559);var n=r(7313);r(8683),r(7707);const i="addon:twitter_pixel",s=function(e){return n.K4((()=>{}))}},8775:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1005),i=r.n(n);function s(){return i()('/*! @permutive/javascript-sdk v20.61.0 (web) (built 2026-01-01T09:39:50.676Z) */(()=>{"use strict";var __webpack_modules__={654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},987:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>runtimeFactory});const runtimeFactory=deps=>{const{provideEnvironment,...lookups}=generateLookupMethods(deps.runtimeInput),env=generateRuntimeEnvironment({lookups,hash:deps.hash});return provideEnvironment(env),{env,locallyLiftedQueries:deps.runtimeInput.queries(env)||{},cloudLiftedQueries:"function"==typeof deps.runtimeInput.interpretOnlyQueries?deps.runtimeInput.interpretOnlyQueries(env):{},queriesByEvent:deps.runtimeInput.eventSegments(env)||{},createCloudLiftQueries:cloudLiftQueries=>{const createQueries=eval?.(`"use strict";${cloudLiftQueries}`);return createQueries(env)}}};function generateRuntimeEnvironment(e){const t=e=>()=>{throw new Error(`${e} lookup has not been provided`)};let r=t("events"),n=t("literals"),i=t("properties"),s=t("ahoCorasick"),o=t("subexpressions"),a=t("rootCompression");function c(e){return u(e)&&!l(e)}function u(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function l(e){for(const t in e)return!1;return!0}function f(e){return(t,r)=>{const n=null!=t&&null!=r?e(t,r):t||r;return null==n||u(n)&&l(n)?null:n}}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;const n=i(t);function s(e,t){return e&&null!=e[t]?e[t]:null}const o=n.reduce(s,e);return null===o?null:r(o)}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return e.properties?p(e.properties,t,r):null}e.lookups.onReady((e=>{const{ahoCorasick:t,events:c,literals:u,properties:l,subexpressions:f,rootCompression:p}=e;r=e=>"number"==typeof e?c[e]:e,n=e=>"number"==typeof e?u[e]:e,i=e=>"number"==typeof e?l[e]:e,s=e=>t[e],o=e=>f[e],a=e=>p[e]}));let _=e=>e,g=e=>!0;function h(e,t){return function(r){for(let n=0;n<e.length;n++){if((e[n](r)||!1)===t)return t}return!t}}function m(e){return h(e,!0)}function v(e){return h(e,!1)}let b=e=>t=>!e(t),y=(e,t)=>r=>r>=e&&r<=t,w=e=>new Date(e).getTime(),S=e=>p(e,["time"],w),I=(e,t)=>p(t,e,w),k=(e,t,r,n,i,s)=>o=>{const a=p(o,e,(e=>e.filter(n).map((e=>p(e,t))).reduce(i,s)));return r(null===a?s:a)};function G(e,t,r,n){for(const i of e)if(r(i)&&t(i)===n)return n;return!n}let z=e=>t=>("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(n(e).toLowerCase())>-1,U=e=>t=>null!=t&&Array.isArray(t)&&t.indexOf(e)>=0;const E=(e,t)=>({l:n=>p(n,["name"])===r(e)&&t(n)?["p",1]:null,a:(e,t)=>["p",e[1]+t[1]],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null});const x=()=>null,P=e=>({a:{m:x,z:null},r:t=>e(t),d:{a:x,l:x,i:x,c:x}}),q=(e,t,r,n)=>P((i=>function(e,t,r,n,i){const s=p(e.getSegments(),[t,r])||!1;return i&&(n||s)&&e.setSegmentActivation(t,r,i),s}(i,e,t,r,n))),C=q;function A(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18e5;return n=>{function i(e,t,r){if(c(t)){if(c(r)){const n={...t,...r};for(const i in r)if(t[i]){const o=s(e,t[i],r[i]);null!=o&&(n[i]=o)}return n}return t}return r}function s(e,t,r){if(c(t)){if(c(r)){const i={...t,...r};for(const s in r)if(t[s]){const o=Array.isArray(t[s])?[e,...t[s]]:[e,t[s]],a=Array.isArray(r[s])?[e,...r[s]]:[e,r[s]],c=n.d.a(o,a);if(null!=c){const[e,...t]=c;i[s]=t}}return i}return t}return r}const o=e=>Array.isArray(e)&&"object"==typeof e[3];return{a:{m:(e,t)=>[t[0],n.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:n.a.z,t[1])],z:[[],n.a.z]},r:(t,r)=>n.r(t,0!==r[0].length&&r[0][0]===e(t)?r[1]:n.a.z),d:n.d.sq||{a:(e,t)=>{if(!o(e))return o(t)?t:null;if(!o(t))return o(e)?e:null;const[r,,,n]=e;return[r,"u",null,i(r,n,t[3])]},l:(i,s)=>{let o=p(i,t),a=e(s);if(o!==a)return null;let c=n.d.l(i,s);if(!(Array.isArray(c)&&c.length>1))return null;let[u,...l]=c,f=+(S(i)||s.getCurrentTime()),d=Math.floor(f/r),_={};return _[d]={},_[d][a]=1===l.length?l[0]:l,[u,"u",null,_]},i:(t,r)=>{if(!o(t))return[[],n.a.z];let i=e(r),s=t[3];return[[i],Object.keys(s).map((e=>s[e]?.[i])).filter(T).map((e=>n.d.i([t[0]].concat(e),r))).reduce(n.a.m,n.a.z)]},c:_}}}}let D=A((e=>e.getCurrentSession()),["session_id"],18e5),O=A((e=>e.getCurrentView()),["view_id"],3e5);const T=e=>!!e;function M(e){return function(t){return{d:{i:(r,n)=>{const i=e(n),s=(Array.isArray(r)?r:[])[3]||{},o=Object.keys(s).map((e=>{const t=s[e]?.[i];return Array.isArray(t)?t[0]:t})).filter(T).reduce(((e,t)=>e+t),0);return t.d.i(["p",o],n)},c:_}}}}let j=M((e=>e.getCurrentSession())),R=M((e=>e.getCurrentView()));function L(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{a:{m:(e,t)=>e.concat(t).slice(-r),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:e.d.ftn||{a:(e,t)=>{const n=Object.entries({...e[3],...t[3]}).sort(((e,t)=>{let[r]=e,[n]=t;return Number(r)-Number(n)})).slice(-r);return[e[0],e[1],null,Object.fromEntries(n)]},l:(t,i)=>{const s=e.d.l(t,i),o=p(t,["time"],w)*n;return s&&[s[0],"x"+r,null,{[o]:2==s.length?s[1]:s.slice(1)}]},i:(t,r)=>t?Object.keys(t[3]||{}).sort().reverse().map((e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]])).map((t=>e.d.i(t,r))):[],c:_}}}function F(e,t){return{d:{i:(t,r)=>{const n=Array.isArray(t)?t:[],i=Object.keys(n[3]||{}).reduce(((e,t)=>n[3][t]+e),0);return e.d.i(["p",i],r)},c:_}}}const Q=F,Y=F;let N=(e,t)=>null==e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t};function $(e,t){return r=>{if(!r||null==r.a&&null==r.b)return null;const n=null==r.a?void 0:e.d.c(r.a)??void 0,i=null==r.b?void 0:t.d.c(r.b)??void 0;return n===r.a&&i===r.b?r:N(n,i)}}function B(e,t){return{a:(r,n)=>{const i=null!=r.a&&null!=n.a?e.d.a(r.a,n.a):r.a||n.a,s=null!=r.b&&null!=n.b?t.d.a(r.b,n.b):r.b||n.b;return N(i,s)},l:(r,n)=>N(e.d.l(r,n),t.d.l(r,n)),i:(r,n)=>r?[e.d.i(r.a||null,n),t.d.i(r.b||null,n)]:[e.a.z,t.a.z],c:$(e,t)}}function H(e,t,r,n){let i=e,s=t.map(r),o=(e,r)=>n(t[e])(r);for(let e=t.length-1;e>0&&i;e--)i.b&&(s[e]=o(e,i.b)),i.a&&1===e&&(s[0]=o(0,i.a)),i=i.a;return s}const V=e=>function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;if(!t||null==t.a&&null==t.b)return null;const n=e[r];if(!n)return null;if(1===r)return $(e[0],n)(t);const i=null==t.a?void 0:V(e)(t.a,r-1)??void 0,s=null==t.b?void 0:n.d.c(t.b)??void 0;return i===t.a&&s===t.b?t:N(i,s)};let K=e=>t=>{function r(e){let t=e[0];for(let r=1;r<e.length;r++)t=[t,e[r]];return t}function n(e){let r=e,n=Array(t.length);for(let e=t.length-1;e>0;e--)n[e]=r[1],r=r[0];return n[0]=r,n}function i(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;if(0==n)throw new Error("subquery index out of bounds.");const s=(1==n?f(t[0].d.a)(e?.a,r?.a):i(e?.a,r?.a,n-1))||void 0,o=f(t[n].d.a)(e?.b,r?.b)||void 0;return N(s,o)}return{r:(r,i)=>{const s=n(i);return e(t.map(((e,t)=>()=>e.r(r,s[t]))))({})},a:{z:r(t.map((e=>e.a.z))),m:(e,i)=>{const s=n(e),o=n(i);return r(t.map(((e,t)=>function(e,t,r){return null===t?r:null===r?t:e.a.m(t,r)}(e,s[t],o[t]))))}},d:{a:(e,r)=>1==t.length?f(t[0].d.a)(e,r):i(e,r),l:(e,r)=>function(e){let t=e[0];for(let r=1;r<e.length;r++)t=N(t,e[r]);return t}(t.map((t=>t.d.l(e,r)))),i:(e,n)=>((e,n)=>r(H(e,t,(e=>e.a.z),(e=>t=>e.d.i(t,n)))))(e,n),c:V(t)}}},W=K(m),X=K(v);let Z=e=>t=>({d:{i:(r,n)=>e(H(r,t,(e=>e.d.i(null,n)),(e=>t=>e.d.i(t,n))).map((e=>t=>e)))({}),c:V(t)}}),J=Z(v),ee=Z(m);function te(e,t){let r=s(e);if(!t||!r)return!1;if(!r.length)return!0;let n=0,i=!1,o=(e=>{let t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){let n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t.push(e.slice(r,r+2)),++r;continue}}t.push(e.charAt(r))}return t})(t.toLowerCase());for(let e=0;e<o.length;e++){let t=o[e];for(;n>0&&!r[n][t];)n=r[n].su?r[n].su:0;if(r[n][t]&&(n=r[n][t],i=!!r[n].te,i))break}return i}let re=(t,r)=>{let n,i,s=e.hash(t);if(0===r.length)return!1;if(r[0]===s)return!0;let o=0,a=r.length,c=!1;for(;(c=(n=r[i=o+(a-o>>1)])!==s)&&(n<s?o=i:a=i,!(o>=a-1)););return!c},ne=(e,t)=>r=>re(p(r,e),t),ie=(e,t)=>r=>re(d(r,e),t);return{q:function(e){return{lift:(t,r)=>e.d.l(t,r),append:f(e.d.a),interpret:(t,r)=>((t,r)=>({result:e.r(t,r)}))(r,e.d.i(t,r)),compact:e.d.c,migrate:_,m:e.a.m,z:e.a.z,r:e.r,i:e.d.i}},i_q:function(e){return{interpret:(t,r)=>({result:e.d.i(t,r)}),compact:e.d.c}},a:v,acq:function(e,t){return{r:(r,n)=>e.r(r,n[0])&&t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},acqs:X,acs:te,acs_:(e,t)=>r=>te(t,p(r,e)),af_i:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return n=>p(n,e,(e=>G(e,t,r,!1)))&&!0},af_l:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return n=>{const i=p(n,e,(e=>e.filter(r).length));return t(null===i?0:i)}},af_m:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return i=>{const s=p(i,e,(e=>e.filter(n)));return null===s||0===s.length?r(0):r(s.map((e=>p(e,t))).reduce(((e,t)=>e+t),0)/s.length)}},af_n:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return k(e,t,r,n,((e,t)=>Math.min(e,t)),Number.POSITIVE_INFINITY)},af_p:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return k(e,t,r,n,((e,t)=>e*t),1)},af_s:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return k(e,t,r,n,((e,t)=>e+t),0)},af_u:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return n=>p(n,e,(e=>G(e,t,r,!0)))||!1},af_x:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return k(e,t,r,n,((e,t)=>Math.max(e,t)),Number.NEGATIVE_INFINITY)},as:(e,t,r)=>n=>{const i=d(n,t),s=r.length;let o=!0;for(let t=0;t<s;t++){const n=r[t];if(o=e(n)(i),!o)break}return o},c:U,c_:(e,t)=>r=>U(t)(p(r,e)),cl_:(e,t)=>r=>U(n(t))(p(r,e)),cx:e=>t=>U(n(e))(t),cw:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return{a:{m:(e,t)=>e+t,z:0},r:(e,t)=>r(t),d:E(e,t)}},cb:function(e,t,n,i){return{a:{m:(e,t)=>Math.min(e+t,i),z:0},r:(e,t)=>n(t),d:{l:n=>p(n,["name"])===r(e)&&t(n)?[`b${i}p`,1]:null,a:(e,t)=>[`b${i}p`,Math.min(e[1]+t[1],i)],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null}}},e:e=>t=>t===e,e_:(e,t)=>r=>p(r,e)===t,fm:function(e,t){return{r:(r,n)=>e(t.r(r,n)),a:t.a,d:t.d}},frontDecode:function(e){const t=e.split("\\t");if(0===t.length)return[];var r=t[0],n=new Array(Math.ceil(t.length/2));n[0]=t[0];for(var i=1;i<t.length/2;i+=1){const e=t[2*i-1],s=t[2*i];if(""===e)r=s;else{const t=parseInt(e);r=r.slice(0,t)+s}n[i]=r}return n},ftn:function(e,t,r){return{a:{m:(e,t)=>e.concat(t.slice(0,r-e.length)),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:L(e,t,r,-1).d}},g:e=>t=>t>e,g_:(e,t)=>r=>p(r,e)>t,ge:e=>t=>t>=e,ge_:(e,t)=>r=>p(r,e)>=t,bse:(t,r)=>n=>{let i=p(n,t);return e.hash(i)===r},bsne:(t,r)=>n=>{let i=p(n,t);return e.hash(i)!==r},bsc:ne,bsnc:(e,t)=>b(ne(e,t)),bsc_:ie,bsnc_:(e,t)=>b(ie(e,t)),i_:_,ifp:e=>P((t=>function(e,t,r){return p(e.getSegments(),[t,r])||!1}(t,"1p",e))),isp:C,itp:q,i_cw:function(e){return{d:{i:t=>{let r=t?Array.isArray(t)?t.slice(-1)[0]:t:0;return e(r)},c:e=>Array.isArray(e)&&e[1]?e:null}}},i_acqs:J,i_ocqs:ee,i_tw:function(e,t,r){const n=r||100,i=Math.ceil(t/n);return{d:{i:(r,n)=>{const s=Array.isArray(r)?r:[],o=n.getCurrentTime(),a=(c=o.getTime()-t,Math.floor(c/i));var c;const u=Object.keys(s[3]||{}).reduce(((e,t)=>parseInt(t)>=a?s[3][t]+e:e),0);return e.d.i(["p",u],n)},c:_}}},i_ltn:Q,i_ftn:Y,i_sq:j,i_vq:R,k:p,l:e=>t=>t<e,l_:(e,t)=>r=>{const n=p(r,e);return null!==n&&n<t},le:e=>t=>t<=e,le_:(e,t)=>r=>{const n=p(r,e);return null!==n&&n<=t},lm:(e,t)=>{let r=t=>function(e,t,r){if(void 0===t[r])return NaN;const n=e||{};if(0==(n["1p"]||[]).length)return NaN;const i=t[r]||{};let s=(i["1p"]||{}).const||0;return Object.keys(n).forEach((e=>{n[e].forEach((t=>{const r=(i[e]||{})[t]||0;s+=r}))})),o=s,1/(1+Math.pow(Math.E,-o));var o}(t.getSegmentsArray(),t.getLookalikeModels(),e);return P((e=>t(r(e))))},ltn:L,mnw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;const s=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:s},r:(e,t)=>i(t),d:{a:(e,t)=>e[1]<t[1]?e:t,l:i=>p(i,["name"])===r(e)&&t(i)?["n",p(i,n)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:s,c:e=>Array.isArray(e)&&e[1]!==s?e:null}}},mxw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;const s=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:s},r:(e,t)=>i(t),d:{l:i=>p(i,["name"])===r(e)&&t(i)?["v",p(i,n)]:null,a:(e,t)=>e[1]>t[1]?e:t,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:s,c:e=>Array.isArray(e)&&e[1]!==s?e:null}}},n0:b(_),n:e=>t=>t!==e,nt:b,n_:(e,t)=>r=>p(r,e)!==t,o:m,ocq:function(e,t){return{r:(r,n)=>e.r(r,n[0])||t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},ocqs:W,oe:function(e){const t=Object.keys(e);let r=t.length,n=new Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n},os:(e,t,r)=>n=>{const i=d(n,t),s=r.length;let o=!1;for(let t=0;t<s;t++){const n=r[t];if(o=e(n)(i),o)break}return o},pacs:(e,t)=>r=>te(t,d(r,e)),pb:(e,t,r)=>n=>y(t,r)(d(n,e)),pc:(e,t)=>r=>{const n=d(r,e);return null!=n&&Array.isArray(n)&&n.indexOf(t)>=0},pc_:(e,t)=>r=>{const i=d(r,e),s=n(t);return null!=i&&Array.isArray(i)&&i.indexOf(s)>=0},pe:(e,t)=>r=>d(r,e)===t,pg:(e,t)=>r=>d(r,e)>t,pge:(e,t)=>r=>d(r,e)>=t,pl:(e,t)=>r=>{let n=d(r,e);return null!==n&&n<t},ple:(e,t)=>r=>{let n=d(r,e);return null!==n&&n<=t},pn:(e,t)=>r=>d(r,e)!==t,ps:(e,t)=>r=>z(t)(d(r,e)),r:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return a(e)(...r)},ref:function(e){return t=>o(e)(t)},rle:function(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];"number"==typeof n?(t+=n,r+=1):t+=1}let r=Array(t),n=0;for(let t=0;t<e.length;t++){let i=e[t];"number"==typeof i?(r.fill(e[t+1],n,n+i),t+=1,n+=i):(r[n]=i,n++)}return r},s:z,s_:(e,t)=>r=>z(t)(p(r,e)),scq:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return{r:(n,i)=>r(e.r(n,i[0])+t.r(n,i[1])),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},sq:D,dscq:function(e,t,n,i){const s=`x${i}`,o=e=>e?2===e.length?["p",s,"",e[1]]:e:null,a=n=>{const i=(e=>p(e,["session_id"]))(n);return i&&p(n,["name"])===r(e)&&t(n)?["p",s,"",{[i]:1}]:null},c=(e,t)=>{const r=o(e),n=o(t);return r?n?["p",s,"",{...r[3],...n[3]}]:r:n};return{a:{m:c,z:null},r:(e,t)=>{const r=t&&t[3]&&"object"==typeof t[3]?Object.keys(t[3]).length:0;return n(r)},d:{a:f(c),l:(e,t)=>a(e),i:(e,t)=>o(e),c:_}}},sw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;const s=0;let o=e=>e<0?["p2",null,-e]:["p2",e],a=e=>(e[0]||0)-(e[1]||0),c=n=>p(n,["name"])===r(e)&&t(n);return{a:{m:(e,t)=>e+t,z:s},r:(e,t)=>i(t),d:{a:(e,t)=>{const r=new Array(Math.max(e.length,t.length));r[0]="p2";for(let n=1;n<r.length;n++)r[n]=(e[n]??0)+(t[n]??0);return r},l:e=>c(e)?o(p(e,n)):null,i:e=>e?Array.isArray(e)?a("p2"===e[0]?e.slice(1):e):e:s,c:e=>Array.isArray(e)&&(e[1]||e[2])?e:null}}},t:g,tb:(e,t)=>r=>y(e,t)(S(r)),te:e=>t=>S(t)===e,te_:(e,t)=>r=>I(e,r)===t,tg:e=>t=>S(t)>e,tg_:(e,t)=>r=>I(e,r)>t,tge:e=>t=>S(t)>=e,tge_:(e,t)=>r=>I(e,r)>=t,ti:w,tl:e=>t=>S(t)<e,tl_:(e,t)=>r=>I(e,r)<t,tle:e=>t=>S(t)<e,tle_:(e,t)=>r=>I(e,r)<t,tn:e=>t=>S(t)!==e,tn_:(e,t)=>r=>I(e,r)!==t,tw:function(e,t,r){const n=r||100,i=Math.ceil(t/n),s=e=>Math.floor(e/i),o=(e,r,n)=>[s(e.getTime()-t),{[s(r)]:n}],a=(t,r)=>{const n=Math.max(t[0],r[0]),i=Object.keys(t[1]).filter((e=>e>=n)).concat(Object.keys(r[1]).filter((e=>e>=n))).filter(((e,t,r)=>r.indexOf(e)===t)).reduce(((n,i)=>{const s=e.a.m(t[1][i]||e.a.z,r[1][i]||e.a.z);return s!==e.a.z&&(n[i]=s),n}),{});return[n,i]},c=[Number.NEGATIVE_INFINITY,{}],u=e=>{const t=t=>t.map((t=>{let[r,n,i]=t;return o(e.t,i,r)})).reduce(a,c);return a(t(e.in),t(e.out))};return{a:{m:(e,t)=>{const r=e.w?u(e):e;return a(r,t)},z:c},r:(t,r)=>{const n=(r.w?u(r):r)[1];return e.r(t,Object.keys(n).reduce(((t,r)=>e.a.m(t,n[r])),e.a.z))},d:e.d.tw||{a:(e,t)=>{let[r,,...n]=e,[,,...i]=t;return[r,"w",...a(n,i)]},l:(t,r)=>{const n=e.d.l(t,r),i=e.d.i(n,r);return n&&[n[0],"w",...o(r.getCurrentTime(),p(t,["time"],w),i)]},i:(e,r)=>{const n=Array.isArray(e)?e:[],i=r.getCurrentTime(),o=s(i.getTime()-t);return[n[2]||null,Object.keys(n[3]||{}).map((e=>({[e]:n[3][e]}))).reduce(((e,t)=>(Object.keys(t).filter((e=>parseInt(e)>=o)).forEach((r=>e[r]=t[r])),e)),{})]},c:_}}},vq:O,w:e=>t=>t===n(e),x:e=>t=>t!==n(e),y:(e,t)=>r=>d(r,e)===n(t),y_:(e,t)=>r=>p(r,e)===n(t),z:(e,t)=>r=>d(r,e)!==n(t),z_:(e,t)=>r=>p(r,e)!==n(t)}}function generateLookupMethods(e){let t,r=!1,n=[];return{onReady:e=>{r?e(t):n.push(e)},provideEnvironment:i=>{t={events:e.eventsLookup(i),literals:e.literalsLookup(i),properties:e.propertiesLookup(i),ahoCorasick:e.ahoCorasickLookup(i),subexpressions:e.subexpressionsLookup(i),rootCompression:e.rootCompressionLookup(i)},n.forEach((e=>e(t))),n=[],r=!0}}}},945:(e,t,r)=>{r.d(t,{N:()=>o,Qt:()=>c,Yt:()=>_,a1:()=>a,ap:()=>s,gM:()=>u,gz:()=>d});var n=r(169),i=r(614);function s(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t){return function(r){return e.ap(e.map(r,(function(e){return function(){return e}})),t)}}}function a(e){return function(t){return function(r){return e.ap(e.map(r,(function(){return function(e){return e}})),t)}}}function c(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function u(e){return function(t){return{concat:function(r,n){return e.ap(e.map(r,(function(e){return function(r){return t.concat(e,r)}})),n)}}}}function l(e,t,r){return function(n){for(var i=Array(r.length+1),s=0;s<r.length;s++)i[s]=r[s];return i[r.length]=n,0===t?e.apply(null,i):l(e,t-1,i)}}var f={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function p(e){return i.e$.call(f,e)||(f[e]=l(n.bc,e-1,[])),f[e]}function d(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=p(n),s=e.map(t[0],i),o=1;o<n;o++)s=e.ap(s,t[o]);return s}}function _(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var s;return(s={})[e[0]]=t,s[e[1]]=r,s[e[2]]=n,s[e[3]]=i,s}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(s){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=s,o}}}}};default:return l((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},s=0;s<t;s++)i[e[s]]=r[s];return i}),t-1,[])}}(r),s=e.map(t[r[0]],i),o=1;o<n;o++)s=e.ap(s,t[r[o]]);return s}}},340:(e,t,r)=>{r.d(t,{Ce:()=>u,DY:()=>I,Eh:()=>L,GY:()=>S,Gb:()=>_,KB:()=>f,Lx:()=>T,Od:()=>c,Qp:()=>b,Su:()=>q,UI:()=>x,YM:()=>d,f2:()=>y,fw:()=>j,hX:()=>O,jj:()=>G,ke:()=>g,md:()=>v,oA:()=>D,of:()=>E,pR:()=>F,tS:()=>P,xb:()=>a,yL:()=>k,yW:()=>Q,zT:()=>m,zo:()=>U});var n=r(169),i=(r(289),r(614)),s=r(606),o=r(812),a=(r(49),r(226),function(e){return 0===e.length}),c=s.Od,u=s.Ce,l=(s.ws,s.R3),f=(s.Im,function(e,t){return e<=0?[]:s.KB(t)(e)});var p=s.dC,d=(o.P5,o.YM),_=(o.Z$,function(e){return c(e)?i.G(s.Gb(e)):i.YP}),g=function(e){return function(t){return p(e,t)?w(t):t.slice(0,e)}};var h=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function m(e){return function(t){var r=z(h(t,e))(t);return{init:r[0],rest:r[1]}}}var v=function(e){return function(t){return e<=0||a(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function b(e){return function(t){return t.slice(h(t,e))}}o.cx;var y=o.f2;o.JO,o.qr;var w=function(e){return e.slice()},S=function(e){return a(e)?[]:e.slice().reverse()},I=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},k=function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),s=0;s<i;s++)n[s]=r(e[s],t[s]);return n};o.t9;var G=function(e){var t=s.jj(e);return function(e){return c(e)?t(e):w(e)}},z=function(e){return function(t){return e>=1&&c(t)?s.lx(e)(t):a(t)?[w(t),[]]:[[],w(t)]}};var U=function(e){return function(t){return a(t)?w(e):a(e)?w(t):t.concat(e)}};o.kp,o.Eq;var E=s.of,x=function(e){return function(t){return t.map((function(t){return e(t)}))}},P=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},q=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},C=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var s=e(n,t[n]);i.pC(s)&&r.push(s.value)}return r}},A=function(e){return C((function(t,r){return e(r)}))},D=A(n.yR),O=function(e){return function(t){return t.filter(e)}},T=o.Lx,M=(o.xP,o.u4,o.OE),j=(o.nq,o.iw,function(e){var t=R(e);return function(e){return t((function(t,r){return e(r)}))}}),R=function(e){return function(t){return M(e.of([]),(function(r,i,s){return e.ap(e.map(i,(function(e){return function(t){return(0,n.zG)(e,l(t))}})),t(r,s))}))}},L=(o.ZN,o.Eh),F=o.pR,Q=(o.pJ,o.oR,s.oo,o.yW);o.j0,i.F4,s.w6,s.QI,s.Ss},335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},144:(e,t,r)=>{r.d(t,{g1:()=>y,G5:()=>b,dO:()=>h,Pd:()=>k,ak:()=>Y,YO:()=>Q,tS:()=>S,g_:()=>A,ij:()=>M,Yo:()=>E,DT:()=>U,Eh:()=>_,fS:()=>D,nM:()=>x,t$:()=>c,UI:()=>g,Vn:()=>G,EQ:()=>C,aD:()=>q,of:()=>m,vx:()=>T,F2:()=>u,LF:()=>O,KC:()=>F,i$:()=>L,Y3:()=>j,it:()=>R});var n=r(335),i=r(906),s=r(169),o=r(289),a=r(614),c=a.t$,u=a.F2,l=function(e,t){return(0,s.zG)(e,g(t))},f=function(e,t){return(0,s.zG)(e,v(t))},p=function(e,t){return(0,s.zG)(e,S(t))},d="Either",_=function(e,t){return{equals:function(r,n){return r===n||(x(r)?x(n)&&e.equals(r.left,n.left):P(n)&&t.equals(r.right,n.right))}}},g=function(e){return function(t){return x(t)?t:u(e(t.right))}},h={URI:d,map:l},m=u,v=function(e){return function(t){return x(t)?t:x(e)?e:u(t.right(e.right))}},b={URI:d,map:l,ap:f},y={URI:d,map:l,ap:f,of:m},w=function(e){return function(t){return x(t)?t:e(t.right)}},S=w,I={URI:d,map:l,ap:f,chain:p},k=function(e,t){return function(r){return x(r)?c(e(r.left)):u(t(r.right))}},G=function(e){return function(t){return x(t)?c(e(t.left)):t}},z={URI:d,fromEither:s.yR},U=(0,i.DT)(z),E=(0,i.Yo)(z),x=a.nM,P=a.tO,q=function(e,t){return function(r){return x(r)?e(r.left):t(r.right)}},C=q,A=C,D=function(e){return function(t){return x(t)?e(t.left):t.right}},O=function(e){return x(e)?u(e.left):c(e.right)},T=function(e){return function(t){return x(t)?e(t.left):t}},M=function(e){return function(t){return null==t?c(e):u(t)}},j=function(e,t){try{return u(e())}catch(e){return c(t(e))}},R=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return j((function(){return e.apply(void 0,r)}),t)}},L=q(s.yR,s.yR);function F(e){return e instanceof Error?e:new Error(String(e))}a.F4;var Q=(0,o.YO)(h),Y=(0,n.a)(I);a.Xl},125:(e,t,r)=>{r.d(t,{EQ:()=>y,F2:()=>a,KQ:()=>p,LF:()=>z,LU:()=>G,LV:()=>w,NG:()=>d,Pd:()=>v,UI:()=>_,Vn:()=>b,ap:()=>g,dQ:()=>k,fS:()=>S,i$:()=>U,ij:()=>f,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>h,vx:()=>I,wp:()=>m});var n=r(945),i=r(144),s=r(169),o=r(289);function a(e){return(0,s.ls)(i.F2,e.of)}function c(e){return(0,s.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function f(e){return function(t){return(0,s.ls)(i.ij(t),e.of)}}function p(e){var t=f(e);return function(e){var r=t(e);return function(e){return(0,s.ls)(e,r)}}}function d(e){var t=h(e),r=p(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function _(e){return(0,o.UI)(e,i.dO)}function g(e){return(0,n.ap)(e,i.G5)}function h(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function m(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function v(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function b(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function y(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function w(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function S(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function I(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function k(e){var t=I(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function G(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function z(e){return function(t){return e.map(t,i.LF)}}function U(e){return function(t){return e.map(t,i.i$)}}},689:(e,t,r)=>{r.d(t,{MW:()=>c,Uz:()=>o,bc:()=>s,f7:()=>n,n_:()=>i,w4:()=>a});r(169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n((function(t,r){return e.every((function(e,n){return e.equals(t[n],r[n])}))}))},o=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},a={equals:function(e,t){return e===t}},c=i;a.equals},906:(e,t,r)=>{r.d(t,{DT:()=>o,Dj:()=>a,Yo:()=>s,fX:()=>c});var n=r(169),i=r(614);function s(e){return function(t){return function(r){return e.fromEither(i.Wi(r)?i.t$(t()):i.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function a(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function c(e,t){var r=a(e);return function(e){return function(n){return t.chain(n,r(e))}}}},755:(e,t,r)=>{r.d(t,{At:()=>o,oU:()=>s});var n=r(335),i=r(169);function s(e,t){return function(r){var n=(0,i.ls)(r,e.fromIO);return function(e){return t.chain(e,n)}}}function o(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}},241:(e,t,r)=>{r.d(t,{oU:()=>s,wt:()=>i});var n=r(169);function i(e){return function(t){return(0,n.ls)(t,e.fromTask)}}function s(e,t){return function(r){var i=(0,n.ls)(r,e.fromTask);return function(e){return t.chain(e,i)}}}},289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){return e(t)}))}}}function s(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,OV:()=>i,UI:()=>n,YO:()=>s})},694:(e,t,r)=>{r.d(t,{G5:()=>d,PM:()=>p,RD:()=>b,UA:()=>g,UI:()=>c,dO:()=>f,of:()=>u,qo:()=>_});var n=r(169),i=(r(289),r(614)),s=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},a=function(e,t){return function(){return t(e())()}},c=function(e){return function(t){return s(t,e)}},u=n.a9,l="IO",f={URI:l,map:s},p={URI:l,of:u},d={URI:l,map:s,ap:o},_={URI:l,map:s,ap:o,chain:a},g={URI:l,map:s,ap:o,of:u,chain:a},h=(n.yR,n.yR,i.F4,u(i.Xl)),m=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):h}},v=function(e){return m((function(t,r){return e(r)}))},b=v(n.yR)},606:(e,t,r)=>{r.d(t,{Ce:()=>l,Eh:()=>I,Gb:()=>G,Im:()=>f,KB:()=>m,Od:()=>a,QI:()=>U,R3:()=>p,Ss:()=>E,dC:()=>c,jj:()=>_,lx:()=>S,nI:()=>h,of:()=>y,oo:()=>d,ur:()=>z,w6:()=>v,ws:()=>u,yL:()=>w});var n=r(169),i=(r(289),r(614)),s=r(214),o=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return o([e],t,!0)}},l=u,f=function(e){return function(t){return o(o([],t,!0),[e],!1)}},p=f,d=function(e,t,r){if(a(r)){var n=g(r);return n.splice(e,0,t),n}return[t]},_=function(e){return function(t){if(1===t.length)return b(t);for(var r=[k(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},i=0,s=G(t);i<s.length;i++){n(s[i])}return r}},g=i.r1,h=function(e){return a(e)?i.G(e):i.YP},m=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},v=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};var b=g,y=function(e){return[e]},w=function(e,t,r){for(var n=[r(e[0],t[0])],i=Math.min(e.length,t.length),s=1;s<i;s++)n[s]=r(e[s],t[s]);return n};s.xP,s.Lx;var S=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[b(t),[]]:[(0,n.zG)(t.slice(1,r),l(k(t))),t.slice(r)]}},I=(s.u4,s.OE,s.nq,s.iw,s.YM,s.ZN,s.Eh),k=(i.F4,s.YM),G=function(e){return e.slice(1)},z=(s.Z$,s.VV,s.Fp,function(e){return function(t){return t.reduce(e.concat)}});s.j0;function U(e,t){return void 0===t?l(e):(0,n.zG)(t,l(e))}var E=function(e,t){return(0,n.zG)(e,p(t))};s.ur},507:(e,t,r)=>{r.d(t,{DT:()=>_,Dj:()=>ue,Do:()=>ve,EK:()=>h,EQ:()=>ne,Eh:()=>G,FS:()=>me,G:()=>d,G5:()=>A,Gk:()=>M,Hr:()=>ye,IS:()=>g,KQ:()=>_e,NG:()=>ge,OV:()=>ae,Qt:()=>Se,Ri:()=>$,UI:()=>E,Uo:()=>Z,WG:()=>he,Wi:()=>te,Y3:()=>pe,YO:()=>be,YP:()=>p,aD:()=>re,ak:()=>we,bM:()=>R,dO:()=>x,fS:()=>oe,fX:()=>le,fw:()=>X,g1:()=>D,g_:()=>ie,hX:()=>B,ij:()=>fe,it:()=>de,lo:()=>F,pC:()=>ee,pF:()=>se,pR:()=>z,tS:()=>O,uZ:()=>U,wp:()=>j,xH:()=>ce,xu:()=>W});var n=r(945),i=r(335),s=r(906),o=r(169),a=r(289),c=r(614),u=r(327),l=r(49),f=(r(226),r(302)),p=c.YP,d=c.G;function _(e){return function(t){return e(t)?d(t):p}}var g=function(e){return"Right"===e._tag?p:d(e.left)},h=function(e){return"Left"===e._tag?p:d(e.right)},m=function(e,t){return(0,o.zG)(e,E(t))},v=function(e,t){return(0,o.zG)(e,C(t))},b=function(e,t){return(0,o.zG)(e,O(t))},y=function(e,t){return(0,o.zG)(e,B(t))},w=function(e,t){return(0,o.zG)(e,H(t))},S=function(e,t){return(0,o.zG)(e,V(t))},I=function(e,t){return(0,o.zG)(e,K(t))},k="Option",G=function(e){return{equals:function(t,r){return t===r||(te(t)?te(r):!te(r)&&e.equals(t.value,r.value))}}},z=function(e){return{equals:G(e).equals,compare:function(t,r){return t===r?0:ee(t)?ee(r)?e.compare(t.value,r.value):1:-1}}},U=function(e){return{concat:function(t,r){return te(t)?r:te(r)?t:d(e.concat(t.value,r.value))},empty:p}},E=function(e){return function(t){return te(t)?p:d(e(t.value))}},x={URI:k,map:m},P=d,q={URI:k,of:P},C=function(e){return function(t){return te(t)||te(e)?p:d(t.value(e.value))}},A={URI:k,map:m,ap:v},D={URI:k,map:m,ap:v,of:P},O=function(e){return function(t){return te(t)?p:e(t.value)}},T={URI:k,map:m,ap:v,chain:b},M=function(e){return function(t){return te(t)?e():t}},j=M,R=function(){return p},L={URI:k,zero:R},F=(0,f.l)(L,q),Q=O(o.yR),Y=(0,l.s4)(p,p),N=function(e){return te(e)?Y:(0,l.s4)(g(e.value),h(e.value))},$={URI:k,compact:Q,separate:N},B=function(e){return function(t){return te(t)?p:e(t.value)?t:p}},H=function(e){return function(t){return te(t)?p:e(t.value)}},V=function(e){return function(t){return(0,l.s4)(y(t,(0,u.ff)(e)),y(t,e))}},K=function(e){return(0,o.ls)(E(e),N)},W={URI:k,map:m,compact:Q,separate:N,filter:y,filterMap:w,partition:S,partitionMap:I},X=function(e){return function(t){return function(r){return te(r)?e.of(p):e.map(t(r.value),d)}}},Z=h,J={URI:k,fromEither:Z},ee=c.pC,te=function(e){return"None"===e._tag},re=function(e,t){return function(r){return te(r)?e():t(r.value)}},ne=re,ie=ne,se=function(e){return function(t){return te(t)?e():t.value}},oe=se,ae=(0,a.OV)(x),ce=Q,ue=(0,s.Dj)(J),le=(0,s.fX)(J,T),fe=function(e){return null==e?p:d(e)},pe=function(e){try{return d(e())}catch(e){return p}},de=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return pe((function(){return e.apply(void 0,t)}))}},_e=function(e){return(0,o.ls)(e,fe)},ge=function(e){return function(t){return te(t)?p:fe(e(t.value))}},he=ne(o.gn,o.yR),me=ne(o.r5,o.yR);var ve=P(c.F4),be=(0,a.YO)(x),ye=(0,a.Hr)(x),we=(0,i.a)(T),Se=(0,n.Qt)(A);c.Xl},856:(e,t,r)=>{r.d(t,{Fp:()=>p,Uz:()=>a,VV:()=>f,Zt:()=>o,gf:()=>l,gt:()=>u,lt:()=>c});var n=r(689),i=r(169),s=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:s(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=function(e){return function(t){return o((function(r,n){return t.compare(e(r),e(n))}))}},c=(i.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),u=function(e){return function(t,r){return 1===e.compare(t,r)}},l=function(e){return function(t,r){return-1!==e.compare(t,r)}},f=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},p=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}};n.w4.equals},327:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>i});r(169);var n=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},812:(e,t,r)=>{r.d(t,{Ce:()=>g,DZ:()=>X,EQ:()=>b,Eh:()=>pe,Eq:()=>Q,Ew:()=>E,G:()=>ke,Hr:()=>ze,JO:()=>P,Lx:()=>ne,N7:()=>A,OE:()=>ie,OV:()=>ge,Od:()=>_,P5:()=>w,R3:()=>h,Su:()=>V,UI:()=>H,YM:()=>S,Yo:()=>m,Z$:()=>I,ZN:()=>ue,aD:()=>v,bM:()=>N,bj:()=>C,cS:()=>Se,cx:()=>U,f2:()=>x,hX:()=>K,iw:()=>oe,j0:()=>Ge,jG:()=>le,jj:()=>O,kp:()=>F,lo:()=>ve,md:()=>z,nI:()=>we,nq:()=>se,oA:()=>Z,oR:()=>ye,of:()=>Y,pJ:()=>be,pO:()=>T,pR:()=>de,pc:()=>j,qr:()=>q,t9:()=>D,tS:()=>$,u4:()=>re,uK:()=>J,uZ:()=>fe,vP:()=>ae,xH:()=>B,xP:()=>te,xb:()=>d,yW:()=>Ie,zT:()=>G});var n=r(689),i=r(169),s=r(289),o=r(614),a=r(52),c=r(856),u=r(214),l=r(49),f=(r(226),r(302)),p=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},d=function(e){return 0===e.length},_=u.Od,g=u.Ce,h=(u.ws,u.R3);u.Im;var m=function(e){return o.Wi(e)?Se:[e.value]},v=function(e,t){return function(r){return _(r)?t(r):e()}},b=v,y=u.dC;function w(e,t){return void 0===t?function(t){return w(e,t)}:y(e,t)?o.YP:o.G(t[e])}var S=function(e){return _(e)?o.G(u.YM(e)):o.YP},I=function(e){return _(e)?o.G(u.Z$(e)):o.YP};var k=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function G(e){return function(t){var r=M(k(t,e))(t);return{init:r[0],rest:r[1]}}}var z=function(e){return function(t){return e<=0||d(t)?t:e>=t.length?Se:t.slice(e,t.length)}};var U=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function E(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var x=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var P=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},q=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},C=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};var A=function(e){for(var t=[],r=[],n=0;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]};function D(e){return function(t,r){if(void 0===r){var n=D(e);return function(e){return n(t,e)}}for(var i,s=0;s<r.length;s++)if(i=r[s],e.equals(i,t))return!0;return!1}}var O=function(e){var t=u.jj(e);return function(e){return _(e)?t(e):e}},T=function(e){var t=u.pO(e);return function(e){return _(e)?t(e):Se}},M=function(e){return function(t){return e>=1&&_(t)?u.lx(e)(t):d(t)?[t,Se]:[Se,t]}},j=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return m(e.apply(void 0,t))}};var R=function(e,t){return(0,i.zG)(e,H(t))},L=function(e,t,r){return(0,i.zG)(e,re(t,r))},F=function(e,t){return(0,i.zG)(e,be(t))},Q=function(e,t){return(0,i.zG)(e,ye(t))},Y=u.of,N=function(){return Se},$=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(d(t))return Se;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},B=$(i.yR),H=function(e){return function(t){return t.map((function(t){return e(t)}))}},V=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},K=function(e){return function(t){return t.filter(e)}},W=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},X=function(e){return W((function(t,r){return e(r)}))},Z=X(i.yR),J=function(e){return ee((function(t,r){return e(r)}))},ee=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var s=t[i];e(i,s)?n.push(s):r.push(s)}return(0,l.s4)(r,n)}},te=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},re=function(e,t){return ie(e,(function(e,r,n){return t(r,n)}))},ne=function(e){var t=te(e);return function(e){return t((function(t,r){return e(r)}))}},ie=function(e,t){return function(r){for(var n=r.length,i=e,s=0;s<n;s++)i=t(s,i,r[s]);return i}},se=function(e,t){return oe(e,(function(e,r,n){return t(r,n)}))},oe=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},ae=function(e){return function(t){return L(t,e.of(N()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,h(t))}})),r)}))}},ce="ReadonlyArray",ue=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},le=function(){return{concat:function(e,t){return d(e)?t:d(t)?e:e.concat(t)}}},fe=function(){return{concat:le().concat,empty:Se}},pe=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},de=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,i=r.length,s=Math.min(n,i),o=0;o<s;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return a.Df.compare(n,i)}))},_e={URI:ce,map:R},ge=(0,s.OV)(_e),he={URI:ce,of:Y},me={URI:ce,zero:N},ve=(0,f.l)(me,he),be=function(e){return function(t){for(var r=p([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},ye=function(e){return function(t){var r=e(t),n=[],i=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var a=0,c=r;a<c.length;a++){s(c[a])}for(;n.length>0;)s(n.shift());return i}},we=(u.oo,function(e){return d(e)?Se:e.slice()}),Se=u.cS;function Ie(e){return function(t){return t.every(e)}}var ke=function(e){return function(t){return t.some(e)}},Ge=function(e){var t=u.j0(e);return function(r){return b((function(){return e.empty}),t(r))}},ze=(o.F4,(0,s.Hr)(_e));u.w6,u.QI,u.Ss},214:(e,t,r)=>{r.d(t,{Ce:()=>p,Eh:()=>O,Fp:()=>F,Im:()=>d,Lx:()=>E,OE:()=>P,Od:()=>u,QI:()=>B,R3:()=>_,Ss:()=>H,UI:()=>G,VV:()=>L,YM:()=>T,Z$:()=>j,ZN:()=>D,aL:()=>Y,c2:()=>m,cS:()=>c,dC:()=>l,iw:()=>C,j0:()=>$,jj:()=>h,lx:()=>I,nq:()=>x,of:()=>k,oo:()=>g,pO:()=>S,u4:()=>U,ur:()=>Q,ut:()=>N,w6:()=>b,ws:()=>f,xP:()=>q});var n=r(689),i=r(169),s=(r(289),r(614)),o=r(794),a=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},c=s.Xl,u=s.Od,l=function(e,t){return e<0||e>=t.length},f=function(e){return function(t){return a([e],t,!0)}},p=f,d=function(e){return function(t){return a(a([],t,!0),[e],!1)}},_=d,g=function(e,t,r){if(u(r)){var n=s.r1(r);return n.splice(e,0,t),n}return[t]},h=function(e){return function(t){if(1===t.length)return t;for(var r=[T(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},i=0,s=M(t);i<s.length;i++){n(s[i])}return r}},m=function(e){return u(e)?s.G(e):s.YP},v=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},b=function(e,t){return e<=t?v((function(t){return e+t}))(t-e+1):[e]};function y(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var w=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},S=function(e){return function(t){for(var r=e(t),n=[r[0]],i=r[1];u(i);){var s=e(i),o=s[0],a=s[1];n.push(o),i=a}return n}},I=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[t,c]:[(0,i.zG)(t.slice(1,r),p(T(t))),t.slice(r)]}},k=s.ri,G=function(e){return z((function(t,r){return e(r)}))},z=function(e){return function(t){for(var r=[e(0,T(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},U=function(e,t){return P(e,(function(e,r,n){return t(r,n)}))},E=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},x=function(e,t){return C(e,(function(e,r,n){return t(r,n)}))},P=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},q=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},C=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},A=s.YM,D=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},O=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},T=(s.F4,A),M=s.Gb,j=function(e){return e[e.length-1]},R=function(e){return e.slice(0,-1)},L=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},F=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},Q=function(e){return function(t){return t.reduce(e.concat)}},Y=function(e){return function(t){return e(T(t),M(t))}},N=function(e){return function(t){return e(R(t),j(t))}},$=function(e){var t=Q(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=M(t);return u(r)?(0,i.zG)(r,w(e),p(T(t))):t}}(e),t)}};function B(e,t){return void 0===t?p(e):(0,i.zG)(t,p(e))}var H=function(e,t){return(0,i.zG)(e,y([t]))}},450:(e,t,r)=>{r.d(t,{Bu:()=>m,CC:()=>R,DZ:()=>re,EG:()=>h,EW:()=>B,Eh:()=>fe,G:()=>D,HA:()=>T,Hd:()=>E,I8:()=>F,P5:()=>v,RF:()=>L,RJ:()=>Y,SW:()=>V,Su:()=>y,UI:()=>w,Ub:()=>W,V_:()=>$,XP:()=>f,Yz:()=>q,_Y:()=>N,_r:()=>U,cS:()=>b,dp:()=>c,dx:()=>_,e$:()=>g,hX:()=>te,jt:()=>x,kp:()=>j,mK:()=>J,mS:()=>Q,nn:()=>M,nr:()=>de,nu:()=>H,oA:()=>ce,oh:()=>ue,qS:()=>Z,ri:()=>G,sq:()=>C,t9:()=>O,tV:()=>ie,uK:()=>ne,uZ:()=>pe,vA:()=>X,vP:()=>z,xb:()=>u,yW:()=>A,z7:()=>P,zV:()=>K});var n=r(689),i=r(169),s=r(614),o=r(49),a=r(229),c=(r(226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(s.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},f=l(a.Df);function p(e){if("function"==typeof e)return p(a.Df)(e);var t=l(e);return function(e){return function(r){for(var n=[],i=0,s=t(r);i<s.length;i++){var o=s[i];n.push(e(o,r[o]))}return n}}}var d=p(a.Df)((function(e,t){return[e,t]}));var _=function(e,t){return function(r){if(s.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},g=function(e,t){return s.e$.call(t,e)};function h(e){return function(t){if(!s.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function m(e){return function(t,r){if(void 0===r){var n=m(e);return function(e){return n(e,t)}}for(var i in t)if(!s.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function v(e,t){return void 0===t?function(t){return v(e,t)}:s.e$.call(t,e)?s.G(t[e]):s.YP}var b={};function y(e){return function(t){var r={};for(var n in t)s.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function w(e){return y((function(t,r){return e(r)}))}function S(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return S(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,s=r(n),o=s.length,a=0;a<o;a++){var c=s[a];i=t(c,i,n[c])}return i}}}function I(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,s=t(n),o=s.length,a=0;a<o;a++){var c=s[a];i=e.concat(i,r(c,n[c]))}return i}}}}return I(a.Df)(e)}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return k(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,s=r(n),o=s.length-1;o>=0;o--){var a=s[o];i=t(a,n[a],i)}return i}}}var G=function(e,t){var r;return(r={})[e]=t,r};function z(e){return J(a.Df)(e)}function U(e){return function(t){var r={},n={};for(var i in t)if(s.e$.call(t,i)){var a=e(i,t[i]);switch(a._tag){case"Left":r[i]=a.left;break;case"Right":n[i]=a.right}}return(0,o.s4)(r,n)}}function E(e){return function(t){var r={},n={};for(var i in t)if(s.e$.call(t,i)){var a=t[i];e(i,a)?n[i]=a:r[i]=a}return(0,o.s4)(r,n)}}function x(e){return function(t){var r={};for(var n in t)if(s.e$.call(t,n)){var i=e(n,t[n]);s.pC(i)&&(r[n]=i.value)}return r}}function P(e){return function(t){var r={},n=!1;for(var i in t)if(s.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var q=d,C=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function A(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function D(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function O(e){return function(t,r){if(void 0===r){var n=O(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var T=function(e,t){return(0,i.zG)(e,w(t))},M=function(e,t){return(0,i.zG)(e,y(t))},j=function(e){var t=se(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},R=function(e){return function(t){var r=oe(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},L=function(e){var t=ae(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},F=function(e,t){return(0,i.zG)(e,te(t))},Q=function(e,t){return(0,i.zG)(e,re(t))},Y=function(e,t){return(0,i.zG)(e,ne(t))},N=function(e,t){return(0,i.zG)(e,ie(t))},$=function(e){var t=S(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},B=function(e){var t=I(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},H=function(e){var t=k(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},V=function(e,t){return(0,i.zG)(e,U(t))},K=function(e,t){return(0,i.zG)(e,E(t))},W=function(e,t){return(0,i.zG)(e,x(t))},X=function(e,t){return(0,i.zG)(e,P(t))},Z=function(e){var t=ee(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},J=function(e){var t=Z(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},ee=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(b);for(var s=t.of({}),o=function(r){s=t.ap(t.map(s,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,c=i;a<c.length;a++){o(c[a])}return s}}},te=function(e){return P((function(t,r){return e(r)}))},re=function(e){return x((function(t,r){return e(r)}))},ne=function(e){return E((function(t,r){return e(r)}))},ie=function(e){return U((function(t,r){return e(r)}))};function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=S(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(a.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=I(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return oe(a.Df)(e)}function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=k(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ae(a.Df).apply(void 0,e)}var ce=function(e){var t={};for(var r in e)if(s.e$.call(e,r)){var n=e[r];s.pC(n)&&(t[r]=n.value)}return t},ue=function(e){var t={},r={};for(var n in e)if(s.e$.call(e,n)){var i=e[n];s.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},le="ReadonlyRecord";function fe(e){var t=m(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function pe(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var i in r)s.e$.call(r,i)&&(n[i]=s.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:b}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function de(e,t){return s.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},643:(e,t,r)=>{r.d(t,{H5:()=>a,Kl:()=>c,Lx:()=>l,Pd:()=>s,Yg:()=>i,li:()=>n,nq:()=>f,pL:()=>o,u4:()=>u});r(169);function n(e){return e[0]}function i(e){return e[1]}var s=function(e,t){return function(r){return[t(n(r)),e(i(r))]}},o=function(e){return function(t){return[e(n(t)),i(t)]}},a=function(e){return function(t){return[n(t),e(i(t))]}},c=n,u=function(e,t){return function(r){return t(e,n(r))}},l=function(){return function(e){return function(t){return e(n(t))}}},f=function(e,t){return function(r){return t(n(r),e)}}},794:(e,t,r)=>{r.d(t,{Z$:()=>u,Fp:()=>a,VV:()=>o,n_:()=>c});var n,i=r(614),s=r(856),o=function(e){return{concat:s.VV(e)}},a=function(e){return{concat:s.Fp(e)}},c=function(e){return{concat:function(t,r){var n={};for(var s in e)i.e$.call(e,s)&&(n[s]=e[s].concat(t[s],r[s]));return n}}},u=function(){return{concat:function(e,t){return t}}};n=void 0},49:(e,t,r)=>{r.d(t,{F2:()=>o,Vn:()=>i,s4:()=>n});r(169);var n=function(e,t){return{left:e,right:t}},i=function(e){return function(t){return n(e(s(t)),o(t))}},s=function(e){return e.left},o=function(e){return e.right}},46:(e,t,r)=>{r.d(t,{At:()=>z,Do:()=>U,Hi:()=>y,Hr:()=>x,PM:()=>b,UA:()=>I,UI:()=>d,YO:()=>E,ak:()=>P,ap:()=>_,dO:()=>v,gw:()=>u,mU:()=>k,of:()=>g,pE:()=>O,qA:()=>w,qo:()=>S,tD:()=>c,tS:()=>h,uU:()=>D});var n=r(335),i=r(755),s=r(169),o=r(289),a=r(614),c=function(e){return function(){return Promise.resolve().then(e)}};function u(e){return function(t){return function(){return new Promise((function(r){setTimeout((function(){Promise.resolve().then(t).then(r)}),e)}))}}}var l=function(e,t){return(0,s.zG)(e,d(t))},f=function(e,t){return(0,s.zG)(e,_(t))},p=function(e,t){return(0,s.zG)(e,h(t))},d=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},_=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},g=function(e){return function(){return Promise.resolve(e)}},h=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},m="Task";var v={URI:m,map:l},b={URI:m,of:g},y={URI:m,map:l,ap:f},w={URI:m,map:l,ap:f,of:g},S={URI:m,map:l,ap:f,chain:p},I={URI:m,map:l,of:g,ap:f,chain:p},k=(s.yR,(0,n.m)(S)),G={URI:m,fromIO:c},z=(0,i.At)(G,S),U=g(a.F4),E=(0,o.YO)(v),x=(0,o.Hr)(v),P=(0,n.a)(S),q=g(a.Xl),C=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return a.Od(e)?t(e):q}},A=function(e){var t=function(e){return function(t){return function(){return a.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,a.YM(t))).then(a.ri))}}}(e);return function(e){return a.Od(e)?t(e):q}},D=function(e){return C((function(t,r){return e(r)}))},O=function(e){return A((function(t,r){return e(r)}))}},6:(e,t,r)=>{r.d(t,{At:()=>te,DT:()=>Z,EQ:()=>G,F2:()=>h,Hi:()=>V,Hr:()=>se,Ij:()=>ce,LV:()=>z,OV:()=>H,Op:()=>y,QM:()=>m,Qt:()=>ae,UI:()=>T,Vn:()=>j,Y3:()=>E,YO:()=>ie,Zl:()=>F,ak:()=>oe,dk:()=>b,fF:()=>S,fS:()=>U,fX:()=>X,fj:()=>k,it:()=>x,lk:()=>v,oU:()=>ee,of:()=>Y,t$:()=>g,tD:()=>w,tS:()=>L,wE:()=>ne,wp:()=>Q});var n=r(945),i=r(335),s=r(125),o=r(906),a=r(755),c=r(241),u=r(169),l=r(289),f=r(614),p=r(46),d=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},_=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},g=s.t$(p.PM),h=s.F2(p.PM),m=s.m8(p.dO),v=s.pk(p.dO),b=(0,u.ls)(p.tD,m),y=(0,u.ls)(p.tD,v),w=b,S=m,I=p.of,k=p.tD,G=s.EQ(p.dO),z=s.LV(p.UA),U=s.fS(p.UA),E=function(e,t){return function(){return d(void 0,void 0,void 0,(function(){var r;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(f.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,f.t$(t(r))];case 3:return[2]}}))}))}},x=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return E((function(){return e.apply(void 0,r)}),t)}},P=(p.dO,p.PM,p.PM,p.UA,p.UA,p.UA,p.UA,p.dO,function(e,t){return(0,u.zG)(e,T(t))}),q=function(e,t){return(0,u.zG)(e,R(t))},C=function(e,t){return(0,u.zG)(e,L(t))},A=function(e,t,r){return(0,u.zG)(e,M(t,r))},D=function(e,t){return(0,u.zG)(e,j(t))},O=function(e,t){return(0,u.zG)(e,Q(t))},T=s.UI(p.dO),M=s.Pd(p.dO),j=s.Vn(p.dO),R=s.ap(p.Hi),L=s.tS(p.UA),F=L,Q=s.wp(p.UA),Y=h,N=g,$="TaskEither";var B={URI:$,map:P},H=(0,l.OV)(B),V={URI:$,map:P,ap:q},K={URI:$,map:P,ap:q,chain:C},W={URI:$,fromEither:I},X=(0,o.fX)(W,K),Z=(0,o.DT)(W),J={URI:$,fromIO:w},ee=(0,a.oU)(J,K),te=(0,a.At)(J,K),re={URI:$,fromIO:w,fromTask:S},ne=(0,c.oU)(re,K);f.F4;var ie=(0,l.YO)(B),se=(0,l.Hr)(B),oe=(0,i.a)(K),ae=(0,n.Qt)(V),ce=(f.Xl,{URI:$,bimap:A,mapLeft:D,map:P,of:Y,ap:q,chain:C,alt:O,fromIO:w,fromTask:S,throwError:N})},644:(e,t,r)=>{r.d(t,{H5:()=>o,Yg:()=>s,li:()=>i});var n=r(643),i=(r(169),n.li),s=n.Yg;var o=function(e){return function(t){return[i(t),e(s(t))]}};n.Kl,n.Lx,n.u4,n.nq},226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},302:(e,t,r)=>{function n(e,t){return function(r){return r?t.of(void 0):e.zero()}}r.d(t,{l:()=>n})},169:(e,t,r)=>{r.d(t,{MZ:()=>s,Q1:()=>l,SK:()=>_,W8:()=>a,a9:()=>o,bc:()=>p,gn:()=>c,ls:()=>f,nn:()=>n,r5:()=>u,yR:()=>i,zG:()=>d});var n=function(e){return function(t){return t(e)}};function i(e){return e}var s=i;function o(e){return function(){return e}}var a=o(!0),c=o(null),u=o(void 0),l=u;function f(e,t,r,n,i,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return s(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(s(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(s(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(s(i(n(r(t(e.apply(this,arguments)))))))))}}}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,r,n,i,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return s(i(n(r(t(e)))));case 7:return o(s(i(n(r(t(e))))));case 8:return a(o(s(i(n(r(t(e)))))));case 9:return c(a(o(s(i(n(r(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var _=function(e,t){return t}},614:(e,t,r)=>{r.d(t,{F2:()=>f,F4:()=>m,G:()=>a,Gb:()=>g,Od:()=>d,Wi:()=>i,Xl:()=>h,YM:()=>_,YP:()=>o,e$:()=>v,nM:()=>c,pC:()=>s,r1:()=>b,ri:()=>p,t$:()=>l,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},s=function(e){return"Some"===e._tag},o={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},f=function(e){return{_tag:"Right",right:e}},p=function(e){return[e]},d=function(e){return e.length>0},_=function(e){return e[0]},g=function(e){return e.slice(1)},h=[],m={},v=Object.prototype.hasOwnProperty,b=function(e){return n([e[0]],e.slice(1),!0)}},52:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,Pc:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},s=(n.equals,i.compare,{concat:function(e,t){return e+t}}),o={concat:s.concat,empty:0}},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,HD:()=>s,xb:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},s=function(e){return"string"==typeof e},o=function(e){return 0===e.length}},844:(e,t,r)=>{r.d(t,{GL:()=>a,HJ:()=>c,N1:()=>f,NC:()=>n,RP:()=>i,UM:()=>u,t_:()=>l});const n=performance.now(),i=(new Date).getTime();let s=[],o=!1;const a=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&s.length<1e4&&s.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},l=e=>new Promise(((t,r)=>e.then(a(t),a(r)))),f=e=>()=>l(e())},683:(e,t,r)=>{r.d(t,{g1:()=>z,YO:()=>I,oQ:()=>T,a9:()=>b,Ue:()=>h,gS:()=>m,D8:()=>O,VS:()=>U,xH:()=>E,En:()=>v,p4:()=>D,fF:()=>A,Hr:()=>k,UI:()=>w,u4:()=>x,Rp:()=>P,vP:()=>q,bw:()=>M,YP:()=>y});var n=r(654),i=r(144),s=r(169),o=r(507),a=r(812),c=r(707);function u(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const s=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,s];return()=>{r=r.filter((e=>e!==s))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function f(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,s]=p(n(),(e=>"might_change"!==e&&t())),o=()=>s(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":s("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function p(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=u(e),s={state:e,onStateChange:i},o=l("Disallowed recursion in Branch.",(e=>{if("final"===s.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{t?.(e),s.state=e,n(e)}finally{"final"===e&&r()}}));return[s,o]}var d=r(289),_=r(694);const g="Ref";function h(e){const[t,r,n]=function(){const[e,t]=p("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,s]=j(t,e);return[i,e=>r((()=>s(e))),n]}function m(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,s]=h(r());return[n,n=>{t=e.concat(t,n),i(r())},s]}function v(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,i)=>(0,s.zG)(r,w(_.UI((e=>{const r=t.concat(n[i],e);return n=n.map(((r,n)=>n===i?t.empty:t.concat(r,e))),r}))))))}}function b(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function y(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function w(e,t){if(t){const[r,n]=j(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>w(e,t)}const S={URI:g,map:(e,t)=>w(t)(e)},I=d.YO(S),k=d.Hr(S),G=e=>U((t=>w(t)(e))),z={URI:g,of:b,map:S.map,ap:(e,t)=>G(t)(e)};function U(e,t){return t?E(w(e,t)):t=>E(w(e,t))}function E(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,s]=p(n),o=e=>t=>{switch(t){case"final":s(e().state);break;case"might_change":s("might_change");break;case"nominal":"might_change"===e().state?s("might_change"):s("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const a=o((()=>e));let c=r.onStateChange(a);return[i,e=>{r=e,c(),c=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,i]=j(t,e.current.current);let s=e.current.onChange(i);return e.onChange((e=>{s(),s=e.onChange(i),r(e.branch),i(e.current)})),n}function x(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return w((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return w((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return w((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function q(){if(0===arguments.length||R(arguments.length<=0?void 0:arguments[0]))return C(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,s.zG)(Object.values(e),(e=>C(...e)),w((0,s.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return b([]);if(1===t.length)return w((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,c.vg)("branch")),s=()=>{n&&(n=!1,u(t.map((e=>e.current))))},o=f(i,s),[a,u]=j(o,t.map((e=>e.current)));return a}function A(e){const[t,r,n]=h(o.YP);return e().then((0,s.ls)(o.G,r,n)),t}function D(e){const[t,r,a]=h(o.YP);return e.then(i.F2).catch((0,s.ls)(n.w,i.t$)).then((0,s.ls)(o.G,r,a)),t}function O(e){const t=e.hasOwnProperty("equals")?e.equals:e;return x(((e,r)=>t(e,r)?e:r))}function T(e){return R(e)?e:b(e)}function M(e){return t=>(y(e)(t),t)}function j(e,t){if("final"===e.state)return[b(t),()=>{}];const r=u(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function R(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},313:(e,t,r)=>{r.d(t,{Hr:()=>h,K4:()=>c,KD:()=>b,UI:()=>f,VS:()=>d,YO:()=>m,ak:()=>g,bw:()=>p,dQ:()=>u,kR:()=>y,of:()=>l,vP:()=>_,yi:()=>v});var n=r(683),i=r(169),s=r(707),o=r(450),a=r(507);const c=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),u=i.yR,l=(0,i.ls)(i.a9,c),f=e=>t=>(0,i.ls)(t,(0,s.rO)({value:e})),p=e=>t=>(0,i.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function d(e){return t=>r=>{let{previousState:i,...s}=r;const o=t({previousState:Array.isArray(i)?i[0]:void 0,...s}),a=e(o.value)({previousState:Array.isArray(i)?i[1]:void 0,...s});return{value:a.value,state:n.vP(o.state,a.state)}}}function _(e){return t=>{let{previousState:r,...s}=t;const a=I(r)?r:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:a[e],...s}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function g(e,t){return r=>(0,i.ls)((0,s.rO)({previousState:S}),(s=>{const o=r(s),a=t(o.value)({...s,previousState:s.previousState[e]});return{value:(0,i.zG)([o.value,a.value],(t=>{let[r,n]=t;if(!I(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,a.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!I(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const h=(e,t)=>f((r=>({...r,[e]:t(r)})));function m(e){return t=>(0,i.ls)((0,s.rO)({previousState:(0,i.ls)(S,(t=>t[e]))}),t,(0,s.rO)({value:t=>({[e]:t}),state:n.UI((t=>({[e]:t})))}))}const v=(e,t)=>{const r=t||(t=>t===e);return t=>u((o=>{let{previousState:a,...c}=o;const u=Array.isArray(a)&&2===a.length&&r(a[0])?a[1]:void 0;return(0,i.zG)({previousState:u,...c},t,(0,s.rO)({state:n.UI((t=>[e,t]))}))}))},b=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],n=[...t.map((e=>{let[t,r]=e;return[t,(0,i.a9)(r)]})),(0,i.a9)(r)];return y((0,s.lo)(n))};function y(e){return(0,i.ls)(n.UI(e),w)}function w(e){const t=(0,i.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:s,stopped:o,...c}=r;return(0,i.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[u,l]=r;return(0,i.zG)(e,a.UI((e=>e.state.current)),a.fS((()=>s)),(e=>u({previousState:e,stopped:(0,i.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...c})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function S(e){return I(e)?e:{}}function I(e){return"object"==typeof e&&null!==e}},919:(e,t,r)=>{r.d(t,{d:()=>f,m:()=>l});var n=r(169),i=r(144),s=r(507),o=r(683),a=r(707),c=r(313),u=r(689);const l=e=>c.dQ((t=>{let{stopped:r,previousState:c}=t;const u=function(e){return h(e)?e:{validityKey:"",lastSuccess:s.YP}}(c),l=(0,n.zG)(u,(e=>({...e,inFlight:s.YP,lastSuccess:(0,n.zG)(e.lastSuccess,s.UI(i.F2))}))),f=(0,n.zG)(e,o.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),(e=>o.vP(e,r)),o.Rp(o.a9(l),((e,t)=>{let[r,c]=t;if(c)return e;const u=r.validity.key(),l=s.hX((e=>r.currentTimestampSecs-e.timestamp<=r.validity.maxAge)),f=(0,a.HP)(r.freshness.key),p=s.hX((e=>r.currentTimestampSecs-e.timestamp<=r.freshness.maxAge&&e.freshnessKey===f())),d=(0,n.zG)(e,o.UI((0,n.ls)(s.DT((e=>e.validityKey===u)),s.EQ((()=>({validityKey:u,inFlight:s.YP,lastSuccess:s.YP})),(0,a.rO)({inFlight:l,lastSuccess:s.tS(i.EQ((e=>s.G(i.t$(e))),(0,n.ls)(s.G,l,s.UI((e=>i.F2(e))))))})))),o.D8(_()));if((0,n.zG)(d.current,(e=>(0,n.zG)(e.inFlight,s.wp((()=>(0,n.zG)(e.lastSuccess,s.tS(s.Uo)))),p,s.pC))))return d;const g=()=>({timestamp:r.currentTimestampSecs,freshnessKey:f(),output:s.YP});return(0,n.zG)(r.refresh,s.EQ((()=>d),(0,n.ls)((0,n.nn)({previous:(0,n.zG)(d.current.lastSuccess,s.tS(s.Uo),s.tS((e=>e.output)))}),o.fF,o.UI(s.EQ((()=>(0,n.zG)(d,o.UI((0,a.rO)({inFlight:()=>s.G(g())})))),i.EQ((e=>(0,n.zG)(d,o.UI((0,a.rO)({inFlight:()=>s.YP,lastSuccess:(0,n.ls)(s.tS((0,n.ls)(s.Uo,s.hX((e=>s.pC(e.output))))),i.Yo((()=>e)),s.G)})))),(e=>o.a9({validityKey:u,inFlight:s.YP,lastSuccess:s.G(i.F2({...g(),output:s.G(e)}))}))))),o.xH)))})),o.xH,o.D8(_())),p=(0,n.zG)(f,o.UI((e=>({validityKey:e.validityKey,lastSuccess:(0,n.zG)(e.lastSuccess,s.tS(s.Uo))}))),o.D8(g())),d=(0,n.zG)(p,o.Rp(-1,(e=>e+1)));return{value:(0,n.zG)(f,o.UI((0,n.ls)((0,a.vg)("lastSuccess"),s.UI(i.UI((e=>e.output))),s.fS((()=>i.F2(s.YP)))))),state:(0,n.zG)(o.vP(p,d),o.UI((e=>{let[t,r]=e;return r>0?t:g().equals(t,u)?c:t})))}})),f=e=>t=>(0,n.ls)((0,a.rO)({previousState:(0,n.ls)(s.DT(h),s.YO("s1"),s.Hr("s2",(t=>{let{s1:r}=t;return(0,n.zG)(r,(0,a.rO)({lastSuccess:s.UI((0,a.rO)({output:s.tS(e)}))}))})),s.UI((e=>{let{s1:t,s2:r}=e;return g().equals(t,r)?t:r})),s.FS)}),t),p=()=>u.n_({freshnessKey:(0,a.Or)(),timestamp:(0,a.Or)(),output:s.Eh((0,a.Or)())});function d(e){return"object"==typeof e&&null!==e&&(!(!("freshnessKey"in e)||!m(e.freshnessKey))&&("timestamp"in e&&"number"==typeof e.timestamp&&!(!("output"in e)||!(0,a.El)(e.output))))}const _=()=>u.n_({validityKey:(0,a.Or)(),inFlight:s.Eh(p()),lastSuccess:s.Eh(i.Eh((0,a.Or)(),p()))}),g=()=>u.n_({validityKey:(0,a.Or)(),lastSuccess:s.Eh(p())});function h(e){return"object"==typeof e&&null!==e&&(!(!("validityKey"in e)||!m(e.validityKey))&&!!("lastSuccess"in e&&(0,a.El)(e.lastSuccess)&&(0,n.zG)(e.lastSuccess,s.EQ((()=>!0),d))))}function m(e){return null===e||"string"==typeof e||"number"==typeof e}},159:(e,t,r)=>{r.r(t),r.d(t,{PermutiveActivationManagerWeb:()=>o,optimisedActivationsConfig:()=>s});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,s,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=s,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(559);const s={dfp:{dfp:[114964,155496,130690,148310,148566,148309,115376,172118,148860,153501,115391,148980,128007,147711,130226,137185,148976,115389,115052,128016,130692,137184,153499,115386,115077,148422,128012,155857,115396,128003,174011,130220,166706,153486,130684,115385,115375,148311,148423,128006,148312,115064,132127,128018,147710,115055,148975,115056,128008,130228,128014,115078,148972,128631,128013,136100,114962,148864,114963,115206,115054,153484,130221,128004,128488,148973,130683,122797,130215,128010,174010,153500,114954,115395,107958,153458,151166,148567,130694,130216,148313,128489,115390,130689,139765,148425,130218,131559,114957,131557,128011,130217,148565,148424,115397,148979,131558,147712,115051,130688,130691,153505,115379,153502,115203,130222,153905,155142,128002,155497,114956,114948,115205,139767,115394,174012,115398,115063,127892,165230,137195,148978,147709,115377,115392,130687,115204,128009,148977,128633,115053,115380,155141,115378,137194,148981,122798,130682,130693,130219,130227,153485,128001,148564,115393,128017,128015,128632,114965,153504,153506,130223,137193,147708,148563,139766,175948,177390,179312,179313,179314,179315,179316,179317,179322,179320,179323,183713,183714,183723,183909,183931,183935,185734,185735,185736,185737,185738,185739,185740,185741,185742,185743,185744,185745,185746,185747,185748,185749,185750,185751,185752,185753,185754,185755,185756,185757,185758,185759,185760,185761,185762,185763,185764,185765,185766,185767,187163,187343,187995,188028,188130,188131,193394,193435,194009,194011,194385,213221,197117,239975,239440,240543,240900,240953,241455,242474],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],adswizz_keyvalue:[],curation_platforms:{115203:["dovi"],115204:["dovi"],115389:["dovi"],115393:["dovi"],128002:["dovi"],128011:["dovi"],153499:["dovi"],240543:["cyfk"],adv:["adv"],caay:["caay","caay"],bzre:["bzre"],bzyb:["bzyb"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return s[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},559:(e,t,r)=>{r.d(t,{Hn:()=>i});const n={standard_cohorts:{auto_init:!0,standard_audiences:{affinity_enabled:!0},activationConfigs:[]},contextual_data:{auto_init:!0,activationConfigs:[]},ix__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"ix",type:"curation_platform",activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["appnexus","ix","msft","openx","pubmatic"],activationConfigs:[]},piano:{auto_init:!1,activationConfigs:[]},prebid_analytics:{auto_init:!0,event_sampling_config:{prebid_auctions:{probability_threshold:.9}},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"9442",activationConfigs:[]},secure_signals:{auto_init:!0,activation_method:"google_secure_signals",type:"curation_platform",public_key:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCr9hacCVXLRXBpawZHZd+7u/Cvl/lyVoPxavJ2P6DWR0YW5j3gtjALyf7YXnHN6grWSTvylg7XdCPLED7yEyFa1qU8WL3SJ7T1lqL57BvK9lRzW2kitgZ+lRPMNRCjBD0mNCgfty/luM5E2YWgQx2E6NxgZFAm4GqC8m/HLTx5MQIDAQAB",activationConfigs:[]},contextual:{auto_init:!0,script_deployed:!0,activationConfigs:[]},publishers:{auto_init:!1,add_alchemy_taxonomy:!0,add_alchemy_entities:!1,activationConfigs:[]},geoip:{auto_init:!1,activationConfigs:[]},pubmatic:{auto_init:!0,dpid:"1158",activationConfigs:[{id:"d354ef5a-3c2c-4a58-8fc7-084580a67634",short_id:"183909",tt:"EveryTime",sc:183909,c:{},wc:{dpid:"1158"}},{id:"bfc7082e-e033-4609-b07d-73870abc6539",short_id:"153504",tt:"EveryTime",sc:153504,c:{},wc:{dpid:"1158"}}]},clean_room:{auto_init:!0,default_config:{},api_version:"v4",pass_cohorts_to_prebid:!0,cohort_ssp_config:[["brrd",["6301116389"]],["brrp",["6301116392"]],["bsjo",["6353064435"]],["bska",["6363477062"]],["byfi",["6755217812"]],["bykc",["6759626139","6763023740"]]],activationConfigs:[]},google_pps__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"google_pps",type:"curation_platform",activationConfigs:[]},google_ss__curation_platform:{auto_init:!0,activation_method:"google_secure_signals",type:"curation_platform",activationConfigs:[]},ssp:{auto_init:!0,ssps:["ix","pubmatic","google_pps","appnexus","openx"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},all_cohort_mapping:{1e7:["bgyz"],10000001:["bhgp"],10000002:["bhhc"],10000003:["bhhg"],10000004:["bhhk"],10000005:["bhhp"],10000006:["bhhv"],10000007:["bhhy"],10000008:["bhie"],10000010:["bhis"],10000011:["bhiz"],10000012:["bhji"],10000013:["bhjq"],10000014:["bhka"],10000015:["bhkl"],10000016:["bhkr"],10000017:["bhky"],10000018:["bhlg"],10000019:["bhli"],10000020:["bhlo"],10000021:["bhlp"],10000022:["bhnd"],10000023:["bhnl"],10000024:["bhnp"],10000025:["bhnw"],10000026:["bhoj"],10000035:["bgzb"],10000036:["bhgq"],10000037:["bhgs"],10000038:["bhgw"],10000039:["bhgy"],10000040:["bhgz"],10000041:["bhhe"],10000042:["bhhh"],10000043:["bhhw"],10000044:["bhhx"],10000045:["bhhz"],10000046:["bhia"],10000047:["bhif"],10000048:["bhig"],10000049:["bhii"],10000050:["bhij"],10000051:["bhik"],10000052:["bhim"],10000053:["bhip"],10000054:["bhit"],10000055:["bhiu"],10000056:["bhiv"],10000057:["bhiy"],10000058:["bhjm"],10000059:["bhjr"],10000060:["bhjs"],10000061:["bhjw"],10000062:["bhjx"],10000063:["bhkm"],10000064:["bhir"],10000065:["bhko"],10000066:["bhkp"],10000067:["bhkq"],10000068:["bhkz"],10000069:["bhla"],10000070:["bhlb"],10000071:["bhle"],10000072:["bhlf"],10000073:["bhlq"],10000074:["bhlt"],10000075:["bhlu"],10000076:["bhlw"],10000077:["bhlx"],10000078:["bhly"],10000079:["bhmb"],10000080:["bhmi"],10000081:["bhmj"],10000082:["bhml"],10000083:["bhmp"],10000084:["bhmr"],10000085:["bhmw"],10000086:["bhmz"],10000087:["bhne"],10000088:["bhnf"],10000089:["bhni"],10000090:["bhnn"],10000324:["bhhj"],10000325:["bhhi"],10000327:["bhku"],10000328:["bhkt"],10000329:["bhkw"],10000330:["bhkv"],10000687:["bgzc"],10000688:["bgza"],10000689:["bhha"],10000690:["bhgt"],10000691:["bhgx"],10000692:["bhgv"],10000693:["bhgr"],10000694:["bhgu"],10000695:["bhhb"],10000696:["bhhd"],10000697:["bhhf"],10000698:["bhhl"],10000699:["bhho"],10000700:["bhhm"],10000701:["bhhn"],10000702:["bhhq"],10000703:["bhht"],10000704:["bhhu"],10000705:["bhhs"],10000706:["bhhr"],10000707:["bhib"],10000708:["bhid"],10000709:["bhic"],10000710:["bhio"],10000711:["bhin"],10000712:["bhil"],10000713:["bhiq"],10000714:["bhih"],10000715:["bhiw"],10000716:["bhix"],10000717:["bhja"],10000718:["bhjc"],10000719:["bhjd"],10000720:["bhje"],10000721:["bhjf"],10000722:["bhjb"],10000723:["bhjg"],10000724:["bhjh"],10000725:["bhjo"],10000726:["bhjk"],10000727:["bhjn"],10000728:["bhjj"],10000729:["bhjl"],10000730:["bhjy"],10000731:["bhju"],10000732:["bhjv"],10000733:["bhjz"],10000734:["bhjt"],10000735:["bhkj"],10000736:["bhkk"],10000737:["bhki"],10000738:["bhkd"],10000739:["bhkc"],10000740:["bhkf"],10000741:["bhkh"],10000742:["bhkb"],10000743:["bhkg"],10000744:["bhke"],10000745:["bhjp"],10000746:["bhkn"],10000747:["bhkx"],10000748:["bhks"],10000749:["bhld"],10000750:["bhlc"],10000751:["bhlh"],10000752:["bhlk"],10000753:["bhlj"],10000754:["bhll"],10000755:["bhlm"],10000756:["bhlv"],10000757:["bhna"],10000758:["bhmv"],10000759:["bhmt"],10000760:["bhmy"],10000761:["bhmc"],10000762:["bhmo"],10000763:["bhls"],10000764:["bhmq"],10000765:["bhme"],10000766:["bhmh"],10000767:["bhlz"],10000768:["bhlr"],10000769:["bhnb"],10000770:["bhmk"],10000771:["bhmu"],10000772:["bhmx"],10000773:["bhmg"],10000774:["bhmd"],10000775:["bhmf"],10000776:["bhnc"],10000777:["bhmn"],10000778:["bhmm"],10000779:["bhma"],10000780:["bhms"],10000781:["bhng"],10000782:["bhnj"],10000783:["bhnh"],10000784:["bhnk"],10000785:["bhno"],10000786:["bhnm"],10000787:["bhnu"],10000788:["bhnv"],10000789:["bhns"],10000790:["bhnt"],10000791:["bhnq"],10000792:["bhnr"],10000793:["bhob"],10000794:["bhny"],10000795:["bhod"],10000796:["bhoh"],10000797:["bhog"],10000798:["bhnz"],10000799:["bhoa"],10000800:["bhoe"],10000801:["bhnx"],10000802:["bhoc"],10000803:["bhof"]},affinity_enabled:!0,activationConfigs:[]},pubmatic__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"pubmatic",type:"curation_platform",activationConfigs:[]},xandr__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"appnexus",type:"curation_platform",activationConfigs:[]},openx__curation_platform:{auto_init:!0,activation_method:"prebid",ssp_code:"openx",type:"curation_platform",activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},privacy_sandbox_topics:{auto_init:!0,prebid:!0,topics_iframe_url:"https://cdn.permutive.app/topics.html",activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>t?.[e]??r};i("web"),i("dfp"),i("facebook_pixel_v2")},573:(e,t,r)=>{r.d(t,{X:()=>i,k:()=>n});const n=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),i=e=>({id:e.id,name:e.name,time:(s(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),s=e=>isFinite(e)&&e instanceof Date},215:(e,t,r)=>{r.d(t,{F:()=>u,I:()=>c});var n=r(683),i=r(694),s=r(812),o=r(169),a=r(707);const c=(e,t)=>{let r=!1;return n.UI(i.UI((0,a.bw)((n=>{r||(r=(0,o.zG)(n,s.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))},u=(e,t)=>{const r=c(e,t);return(0,o.ls)(n.En(2,s.uZ()),(e=>{let[t,i]=e;return(0,o.zG)(i,r,n.UI((e=>e()))),t}))}},854:(e,t,r)=>{r.r(t),r.d(t,{service:()=>ao});var n=r(169),i=r(313),s=r(683),o=r(507),a=r(643);const c=e=>{const t=e.current;return(0,n.zG)(e,s.UI((e=>e===t?{segmentsEntered:[],segmentsExited:[]}:{segmentsEntered:(0,n.zG)(e,l(t)),segmentsExited:(0,n.zG)(t,l(e))})))},u=e=>new Set(e),l=e=>t=>(0,n.zG)(t,f((t=>!e.has(t)))),f=e=>t=>{const r=[];return t.forEach((t=>e(t)&&r.push(t))),r};var p=r(694),d=r(844),_=r(707);const g=()=>({kind:"null",value:null}),h=e=>({kind:"string",value:e}),m=e=>({kind:"number",value:e}),v=e=>({kind:"array",value:e}),b=e=>({kind:"object",value:e}),y=e=>e,w=()=>({kind:"bottom"}),S=e=>({kind:"inner",a:e}),I=e=>({kind:"top",error:e}),k=e=>({kind:"unbounded",group:e}),G=(e,t)=>({kind:"windowed",key:t,group:e}),z=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),U=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),E=e=>({kind:"numberGroup",group:e}),x=e=>({kind:"stringGroup",group:e}),P=e=>({kind:"tuple",tuple:e}),q=e=>({state:e}),C=(e,t)=>({commands:e,payload:t});var A=r(856),D=r(229);const O=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return S(t(e.a));case"top":return I(e.error)}},T=e=>(0,A.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return D.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var M=r(606),j=r(340),R=r(144),L=function(e){return-1===e?1:1===e?-1:0};function F(e,t){return(0,j.oA)(e.map(t))}function Q(e,t,r,n){const i=(e,t)=>{if(0===e.length)return(0,j.oA)(t.map((e=>(0,o.G)({1:e[1],2:r(o.YP,(0,o.G)(e[2]))}))));if(0===t.length)return(0,j.oA)(e.map((e=>(0,o.G)({1:e[1],2:r((0,o.G)(e[2]),o.YP)}))));if(e.length>0&&t.length>0&&(0,A.lt)(n)(e[0][1],t[0][1])){const[n,...s]=e,a=n[1],c=n[2];return(0,j.Ce)({1:a,2:r((0,o.G)(c),o.YP)})(i(s,t))}if(e.length>0&&t.length>0&&(0,A.gt)(n)(e[0][1],t[0][1])){const[n,...s]=t,a=n[1],c=n[2];return(0,j.Ce)({1:a,2:r(o.YP,(0,o.G)(c))})(i(e,s))}if(e.length>0&&t.length>0){const[n,...s]=e,[a,...c]=t,u=n[1],l=n[2],f=a[2];return(0,j.Ce)({1:u,2:r((0,o.G)(l),(0,o.G)(f))})(i(s,c))}throw new Error("Non exhaustive match in mapOption2")},s=(0,A.Uz)((e=>e[1]))(n),a=(e=>{const t=F(e,(e=>(0,o.pC)(e[2])?(0,o.G)({1:e[1],2:e[2].value}):o.YP));return 0===t.length?o.YP:(0,o.G)(t)})(i((0,j.DY)(s)([...e].map((e=>({1:e[0],2:e[1]})))),(0,j.DY)(s)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,o.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(a)}function Y(e,t,r,n){const i=(0,A.Uz)((e=>e[0]))(n),s=(0,j.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,R.nM)(e)){const n=r(t[1],e.left);return(0,o.pC)(n)?(0,R.t$)(n.value):(0,R.F2)(t[0])}return e}),(0,R.t$)(e));return(0,o.Uo)(s)}function N(e,t){return new Map([...e].map(t))}function $(e,t){return new Map([...e].filter(t))}var B=r(689),H=r(52);function V(e){return JSON.stringify(K(e))}function K(e){switch(e.kind){case"null":return Z.encode(e);case"string":return J.encode(e);case"number":return ee.encode(e);case"array":return te.encode(e);case"object":return re.encode(e)}}function W(e){return null===e?Z.decode(e):"number"==typeof e?ee.decode(e):"string"==typeof e?J.decode(e):Array.isArray(e)?te.decode(e):re.decode(e)}const X=(e,t)=>(0,R.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),Z={encode:e=>null,decode:e=>null===e?(0,R.F2)({kind:"null",value:null}):X(e,"SimpleNull")},J={encode:e=>e.value,decode:e=>"string"==typeof e?(0,R.F2)(h(e)):X(e,"SimpleString")},ee={encode:e=>e.value,decode:e=>"number"==typeof e?(0,R.F2)(m(e)):X(e,"SimpleNumber")},te={encode:e=>e.value.map(K),decode:e=>{if(Array.isArray(e)){const t=(0,j.fw)(R.g1)(W)(e);return(0,R.UI)(v)(t)}return X(e,"SimpleArray")}},re={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(e=>{let[t,r]=e;return{[t]:K(r)}})))},decode:e=>{if(e&&e.constructor===Object){const t=(0,j.fw)(R.g1)((e=>{let[t,r]=e;return(0,n.zG)(W(r),(0,R.UI)((e=>(0,n.bc)(t,e))))}))(Object.entries(e));return(0,R.UI)((e=>b(new Map([...e]))))(t)}return X(e,"SimpleObject")}};function ne(e){return(0,n.zG)(e,se,(0,o.UI)(V),(0,o.fS)((()=>"<encode error>")))}function ie(e){return(0,o.UI)(fe)(function(e){switch(e.state.kind){case"top":return(0,o.G)(h(e.state.error));case"bottom":return o.YP;case"inner":return se(e.state.a)}}(e))}function se(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return oe(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,o.G)(v(function(e,t){const r=(0,o.UI)((e=>(0,j.Ce)(e)(t)))(e);return(0,o.fS)((()=>t))(r)}((0,o.UI)((e=>h(function(e){const t=e=>(0,o.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>{const n=t(e[1])+r(e[1]);return 1===e[2]?n:n+JSON.stringify(e[2])};return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return h(e.error);case"inner":return m(e.a)}},r=e=>F([ae,ce,e=>(0,n.zG)(e,le,b,o.G)],(t=>t(e))),i=e=>F([ae,ue,e=>(0,n.zG)(e,le,(e=>N(e,(e=>{let[t,r]=e;return[JSON.stringify(t),r]}))),b,o.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):o.YP}function oe(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,o.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,o.pC)(e.limit)}}function ae(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(h("w"));case"countLimit":return(0,o.G)(h(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,o.G)(h(1===e.n?"u":`u${e.n}`))}}function ce(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(h((0,o.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,o.G)(h((0,o.pC)(e.limit)?e.limit.value:""))}}function ue(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.pC)(e.key)?(0,o.G)(m(e.key.value)):(0,o.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,o.pC)(e.limit)?(0,o.G)(m(e.limit.value)):(0,o.G)({kind:"null",value:null})}}function le(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function fe(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?fe(e.value[0]):v(e.value.map(fe));case"object":return(0,n.zG)($(e.value,(e=>{let[t,r]=e;return"null"!==r.kind})),(e=>N(e,(e=>[e[0],fe(e[1])]))),b);default:return e}}function pe(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return o.YP;const[t,r,n,i]=e;if("string"===t.kind&&"string"===r.kind&&"object"===i.kind){const e=(0,o.DT)((e=>de(e[1].value)&&_e(e[2].value)))({1:t,2:r});return(0,o.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:i.value})))(e)}return o.YP})(e);if((0,o.pC)(t)){const{prim:e,grp:r,cutoff:n,m:i}=t.value,s=ge(n,i,he(r));return"string"==typeof s?I(s):S(C(me(e),s))}const r=(e=>{if(3!==e.length)return o.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,o.DT)((e=>_e(e.value)))(t);return(0,o.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return o.YP})(e);if((0,o.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,i=ge(t,n,he(e));return"string"==typeof i?I(i):S(C(o.YP,i))}const n=(e=>{if(2!==e.length)return o.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,o.DT)((e=>de(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,m:r.value})))(e)}return o.YP})(e);if((0,o.pC)(n)){const{prim:e,m:t}=n.value;return S(C(me(e),x(k(t))))}const i=(e=>{if(1!==e.length)return o.YP;const[t]=e;return"object"===t.kind?(0,o.G)({m:t.value}):o.YP})(e);if((0,o.pC)(i)){const{m:e}=i.value;return S(C(o.YP,x(k(e))))}const s=(e=>{if(e.length<1)return o.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,o.DT)((e=>de(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,rest:r})))(e)}return o.YP})(e);if((0,o.pC)(s)){const{prim:e,rest:t}=s.value;return S(C(me(e),be(t)))}return S(C(o.YP,be(e)))},r=e=>"array"===e.kind?(0,j.tS)(r)(e.value):[e];return"null"===e.kind?q({kind:"bottom"}):q(t(r(e)))}function de(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function _e(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function ge(e,t,r){switch(e.kind){case"string":return x(r({1:(0,o.G)(e.value),2:t}));case"number":case"null":return E(r({1:"null"===e.kind?o.YP:(0,o.G)(e.value),2:$(N(t,(e=>{let[t,r]=e;return[Number(t),r]})),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function he(e){const t=e=>t=>U(t[2],t[1],e),r=e=>t=>z(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>G(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function me(e){const t=e=>(0,o.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,o.G)(e):o.YP,r=(e,r,i)=>{const s=((e,r)=>(0,n.zG)(e,(e=>{switch(e){case"p":return(0,o.G)("add");case"m":return(0,o.G)("mul");case"v":return(0,o.G)("max");case"n":return(0,o.G)("min");default:return o.YP}}),o.UI((e=>({operation:e,bound:r}))),o.tS(t)))(e,i);return(0,o.UI)((e=>{const{init:t,rest:n}=(0,j.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(s)};return(0,o.UI)(y)((0,M.nI)(ve(e,(e=>{const t=e.split("");if(0===t.length)return o.YP;const[i,...s]=t;if("b"===i){const{init:e,rest:t}=(0,n.zG)(s,(0,j.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return o.YP;const i=parseFloat(e.join("")),[a,...c]=t;return r(a,c,(0,o.G)(i))}return r(i,s,o.YP)}))))}function ve(e,t){const r=t(e);return(0,o.fS)((()=>[]))((0,o.UI)((e=>[e[1]].concat(ve(e[2],t))))(r))}function be(e){return P(e.map(ye))}function ye(e){switch(e.kind){case"number":return S(e.value);case"string":return I(e.value);case"null":return{kind:"bottom"};case"object":return I("{object}");case"array":return I("{array}")}}var we=r(945);const Se={strategy:(e,t,r)=>n=>{if((0,o.Wi)(r))return t;if("delta"===e&&(0,o.Wi)(t))return o.YP;if((0,o.Wi)(t))return r;if((0,o.pC)(t)&&(0,o.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,i,s,a)=>{const c=(0,j.pR)(T(a)),u=(0,n.zG)(t.bound,o.EQ((()=>n.yR),(e=>t=>(0,A.VV)(a)(s.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,j.yL)(r,i,xe("append",(0,n.ls)(s.plus,u)));if("append"===e&&"mul"===t.operation)return(0,j.yL)(r,i,xe("append",(0,n.ls)(s.times,u)));if("append"===e&&"max"===t.operation)return(0,A.Fp)(c)(r,i);if("join"===e&&"add"===t.operation)return(0,j.yL)(r,i,xe("join",(0,A.Fp)(a)));if("join"===e&&"mul"===t.operation)return(0,j.yL)(r,i,xe("join",(0,A.Fp)(a)));if("join"===e&&"max"===t.operation)return(0,A.Fp)(c)(r,i);if("min"===t.operation)return Se.operation(e,{operation:"max",bound:t.bound},r,i,s,function(e){return(0,A.Zt)(((t,r)=>L(e.compare(t,r))))}(a));if("delta"===e&&"max"===t.operation)return(0,A.gt)(c)(r,i)?r:i.map(w);if("delta"===e)return(0,j.yL)(r,i,((e,t)=>(0,A.gt)(T(a))(e,t)?O(e,u):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,A.gt)(D.Df)(r.error,n.error)?I(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return I((0,A.Fp)(D.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},Ie={fromNumber:n.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function ke(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,s=t.group;return(0,o.fS)(w)((0,o.UI)((e=>S(k(e))))(Q(i,s,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,s=e.group,a=t.key,c=t.group,u=(0,A.Fp)((0,o.pR)(n))(i,a);return(0,o.fS)(w)((0,o.UI)((e=>S(G(e,u))))(Q(s,c,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,s=t.n;if(i===s){const s=e.limit,a=e.group,c=t.limit,u=t.group,l=(0,A.Fp)((0,o.pR)(n))(s,c);return(0,o.fS)(w)((0,o.UI)((e=>S(z(e,l,i))))(Q(a,u,r,n)))}return I("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,s=t.n;if(i===s){const s=e.limit,a=e.group,c=t.limit,u=t.group,l=(0,A.Fp)((0,o.pR)(n))(s,c);return(0,o.fS)(w)((0,o.UI)((e=>S(U(e,l,i))))(Q(a,u,r,n)))}return I("Non matching counts")}return I("Non matching group types")}function Ge(e,t,r){return(0,o.fS)(g)(ze(e,o.YP)(t,r))}function ze(e,t){const r=t=>(r,n)=>Se.strategy(e,r,n)(ze(e,t)),i=(t,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const e=ke(n.group,i.group,r(t),D.Df);return O(e,(e=>x(Ee(e,D.Df))))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const e=ke(n.group,i.group,r(t),H.Df);return O(e,(e=>E(Ee(e,H.Df))))}if("tuple"===n.kind&&"tuple"===i.kind){const r=(0,o.pC)(t)?t.value:[];return S(P(function(e,t,r,n,i,s){const a=(e,t)=>({1:(0,j.ke)(e)(t).concat((0,j.KB)(Math.max(0,e-t.length),w)),2:(0,j.md)(e)(t)}),c=(t,r,n)=>{if(0===t.length)return Se.operation(e,{operation:"max",bound:o.YP},r,n,i,s);if(t.length>0){const[o,...u]=t,l=a(o[2],r),f=l[1],p=l[2],d=a(o[2],n),_=d[1],g=d[2];return Se.operation(e,o[1],f,_,i,s).concat(c(u,p,g))}throw new Error("Non exhaustive match in recurse")};return(0,j.GY)((0,j.Qp)((e=>"bottom"===e.kind))((0,j.GY)(c(t,r,n))))}(e,r,n.tuple,i.tuple,Ie,H.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)},s=(e,r)=>{if((0,o.Eh)((0,M.Eh)((0,B.n_)({1:(0,B.n_)({operation:D.Eq,bound:(0,o.Eh)(H.Eq)}),2:H.Eq}))).equals(e.commands,r.commands)){const n=(0,o.Wi)(e.commands)?t:e.commands,s=i(n,e.payload,r.payload);return O(s,(t=>C(e.commands,t)))}if(s=e.commands,a=r.commands,(0,o.Eh)((0,M.Eh)((0,B.n_)({1:(0,B.n_)({operation:D.Eq}),2:H.Eq}))).equals(s,a)){const s=(0,n.zG)(((e,t)=>(0,n.zG)((0,we.gz)(o.G5)(e,t),(0,o.UI)((e=>{let[t,r]=e;return M.yL(t,r,((e,t)=>({1:{operation:e[1].operation,bound:(0,n.zG)((0,we.gz)(o.G5)(e[1].bound,t[1].bound),o.UI((e=>{let[t,r]=e;return Math.min(t,r)})),o.wp((()=>e[1].bound)),o.wp((()=>t[1].bound)))},2:e[2]})))}))))(e.commands,r.commands),o.wp((()=>t))),a=i(s,e.payload,r.payload);return O(a,(e=>C(s,e)))}throw new Error(`Non matching primitive strings. Got ${ne(e)} and ${ne(r)}`);var s,a};return(t,r)=>ie(q(Se.extend(e,s,pe(t).state,pe(r).state)))}function Ue(e,t,r){const n=(0,o.UI)((t=>$(e,(e=>{let[n,i]=e;return(0,A.gf)(r)(n,t)}))))(t);return(0,o.fS)((()=>e))(n)}function Ee(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,o.Wi)(e.key)?e:G(Ue(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,i=e.group,s=Y(n,i,((e,t)=>t<=1?o.YP:(0,o.G)(t-1)),t),a=(0,A.Fp)((0,o.pR)(t))(r,s);return z(Ue(i,a,t),a,n)}case"uniqueLimit":{const r=e.limit,n=e.n,i=e.group,s=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],i=new Set(r);return i.size>=n?o.YP:(0,o.G)(i)}return o.YP},a=Y(new Set,i,s,t),c=(0,A.Fp)((0,o.pR)(t))(r,a);return U(Ue(i,c,t),c,n)}}}function xe(e,t){return(r,n)=>Se.extend(e,((e,r)=>S(t(e,r))),r,n)}function Pe(e,t){return Ge("append",e,t)}function qe(e,t){return Ge("join",e,t)}var Ce=r(450),Ae=r(327),De=r(6),Oe=r(335),Te=r(289),Me=r(49);function je(e,t){return function(r){return e.map(r,t.compact)}}function Re(e,t,r){var i=je(e,t),s=(0,Te.UI)(e,r);return function(e){return Me.s4(i((0,n.zG)(e,s(o.IS))),i((0,n.zG)(e,s(o.EK))))}}function Le(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function Fe(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function Qe(e,t){var r=Le(e,t);return function(e){var t=r((0,Ae.ff)(e)),n=r(e);return function(e){return(0,Me.s4)(t(e),n(e))}}}function Ye(e,t){var r=Fe(e,t);return function(e){return function(t){return(0,Me.s4)((0,n.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,n.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var Ne=r(755),$e=r(241),Be=r(614);function He(e){return(0,n.ls)(o.G,e.of)}function Ve(e){return(0,n.a9)(e.of(o.YP))}function Ke(e){return function(t){return e.map(t,o.G)}}function We(e){return(0,n.ls)(o.ij,e.of)}function Xe(e){var t=We(e);return function(e){return(0,n.ls)(e,t)}}function Ze(e){var t=ct(e),r=Xe(e);return function(e){return t(r(e))}}function Je(e){return function(t){return(0,n.ls)(t,e.of)}}function et(e){var t=ct(e),r=Je(e);return function(e){return t(r(e))}}function tt(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function rt(e){return(0,n.ls)(o.Uo,e.of)}function nt(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function it(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function st(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function ot(e){return(0,Te.UI)(e,o.dO)}function at(e){return(0,we.ap)(e,o.G5)}function ct(e){var t=Ve(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function ut(e){var t=He(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var lt=r(46),ft=He(lt.PM),pt=(lt.PM,lt.of),dt=(lt.PM,function(e){return _t(lt.tD(e))}),_t=Ke(lt.dO),gt=lt.UI(o.Uo),ht=(lt.dO,it(lt.qo)),mt=(lt.UA,lt.PM,lt.PM,lt.UA,lt.PM,et(lt.UA)),vt=ot(lt.dO),bt=at(lt.Hi),yt=ft,wt=ct(lt.UA),St=(lt.UA,lt.PM,lt.dO,o.Ri,lt.dO,o.Ri,o.dO,Le(lt.dO,o.xu)),It=(lt.dO,o.xu,lt.dO,o.xu,lt.dO,o.xu,function(e,t){return(0,n.zG)(e,vt(t))}),kt=function(e,t){return(0,n.zG)(e,bt(t))},Gt=function(e,t){return(0,n.zG)(e,wt(t))},zt="TaskOption",Ut={URI:zt,map:It},Et={URI:zt,map:It,ap:kt,chain:Gt},xt={URI:zt,fromIO:dt},Pt=(0,Ne.At)(xt,Et),qt={URI:zt,fromIO:dt,fromTask:_t},Ct=(0,$e.wt)(qt),At=(0,$e.oU)(qt,Et),Dt=(Be.F4,(0,Te.Hr)(Ut)),Ot=(0,Oe.a)(Et),Tt=(Be.Xl,He(p.PM)),Mt=(p.PM,p.of,p.PM,p.dO,o.Uo,p.dO,p.qo,p.UA,p.UI(o.FS),p.UI(o.WG),p.PM,p.PM,p.UA,p.PM,p.UA,p.dO,p.G5,Tt),jt=(p.UA,ut(p.UA)),Rt=(p.PM,p.dO,o.Ri,p.dO,o.Ri,o.dO,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,Be.F4,Be.Xl,r(812));const Lt=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]),Ft=e=>i.dQ((t=>{let{previousState:r}=t;const[i,a]=s.Ue(!1);const[c,u]=s.gS({empty:o.YP,concat:(e,t)=>(0,n.zG)(Rt.oA([e,t]),o.DT(Rt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t}))))))}),l=(0,n.zG)((0,_.Kn)(r)?r:{},(0,_.rO)({stateOffset:(0,n.ls)(o.DT(_.BJ),o.fS((()=>0))),fetchUnseenKey:(0,n.ls)(o.DT(_.HD),o.fS((()=>"")))})),f=(0,n.zG)(s.gS(o.uZ({concat:function(e,t){return Object.assign({},e,t)}})),(t=>{let[r,i]=t;return(0,n.zG)(s.vP(e.lastProcessedEvents,e.internalStateDiff,e.queryLanguageProcessing),s.bw((e=>{let[t,r,n]=e;if(n)return;return t().filter((e=>!Lt.has(e.name))).length>0?i(r()):void 0}))),(0,n.zG)(s.vP({internalStateDiff:r,internalStateMap:e.internalStateMap}),s.D8(((e,t)=>e.internalStateDiff===t.internalStateDiff)))})),p=(0,n.zG)(s.vP(e.sessionId,f,i),s.Rp(s.a9({...l,inFlightRequest:!1,previousDecodedState:(0,n.zG)(e.internalStateMap.current,Yt,W,R.fS((()=>b(new Map)))),sendFullStateWithUnseen:!1}),((t,r)=>{let[i,{internalStateDiff:a,internalStateMap:c},l]=r;return(0,n.zG)(t,s.VS((t=>{if(t.inFlightRequest)return s.a9(t);const r=!l&&t.sendFullStateWithUnseen,f=r||!e.groupIdIsNewlyGenerated&&i!==t.fetchUnseenKey;return(0,n.zG)(r?Mt(c):a,jt((()=>()=>(0,n.zG)({},o.DT((()=>f))))),lt.tD,wt((0,n.ls)($t(t.previousDecodedState),De.Vn((0,_.bw)((t=>e.logger.error(t)))),gt)),ht((()=>lt.of({...t,inFlightRequest:!1})),(0,n.ls)(lt.of,lt.ak("processed",(r=>(0,n.zG)(e,Qt({delta:r.delta,stateOffset:t.stateOffset,fetchUnseen:f}),lt.UI((0,_.bw)((0,n.ls)(o.UI((0,_.vg)("stateDelta")),o.hX(Ae.ff(Ce.xb)),u)))))),lt.UI((e=>({fetchUnseenKey:i,inFlightRequest:!1,sendFullStateWithUnseen:t.sendFullStateWithUnseen&&!r,previousDecodedState:e.decodedState,stateOffset:(0,n.zG)(e.processed,o.UI((e=>e.response.state_offset)),o.fS((()=>t.stateOffset)))}))))),s.fF,s.UI(o.fS((()=>({...t,inFlightRequest:!0})))))})))})),s.xH,s.UI((e=>({stateOffset:e.stateOffset,fetchUnseenKey:e.fetchUnseenKey}))),s.D8((0,B.MW)({stateOffset:H.Eq,fetchUnseenKey:D.Eq})));return{state:p,value:{externalStateDelta:c}}})),Qt=e=>t=>(0,n.zG)(e,o.DT((e=>e.fetchUnseen||Ae.ff(Ce.xb)(e.delta))),pt,wt((e=>{return(0,n.zG)(t,(r={event_source_id:t.eventSourceId,fetch_unseen:e.fetchUnseen,group_id:t.groupId,last_seen_offset:e.stateOffset,state:e.delta},e=>De.Y3((()=>e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/state",o.G("v1.0"),[["fetch_unseen",JSON.stringify(r.fetch_unseen)]]),method:"POST",payload:{group_id:r.group_id,event_source_id:r.event_source_id,state:JSON.stringify(r.state),last_seen_offset:r.last_seen_offset},contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Error sending state delta. Got ${R.KC(e)}`))),De.Vn((0,_.bw)((e=>t.reportError(e)))),gt,St((e=>!!e)),mt((0,n.ls)(R.of,R.YO("response"),R.ak("stateDelta",(e=>{return t=e.response.state,(0,R.Y3)((function(){return JSON.parse(t)}),n.yR);var t})),R.Vn((0,_.bw)((e=>t.reportError(`Failed to parse State API response, got ${e}`)))),o.Uo)));var r}))),Yt=e=>(0,_.b0)(e,((e,t)=>t.state?o.G({[t.checksum]:t.state}):o.YP)),Nt=e=>t=>{const r=(0,n.zG)(t,Yt,W,R.fS((()=>b(new Map))),(t=>Ge("delta",t,e)));return{decodedState:qe(r,e),delta:(0,n.zG)(r,K,o.ij,o.fS((()=>({}))))}},$t=e=>t=>()=>new Promise((r=>(0,d.HJ)((()=>(0,n.zG)(t,R.it(Nt(e),(e=>`Failed to compute delta for state sync. Got ${e}`)),r)))));r(226),Ce.dp;var Bt=Ce.xb,Ht=function(e){return function(t){return Object.keys(t).sort(e.compare)}};D.Df;Ce.dx,Ce.e$;Ce.Bu,Ce.P5,Ce.Su;var Vt=Ce.UI;Ce.ri;function Kt(e){return Ce.vP(e)}Ce._r;Ce.jt;Ce.yW,Ce.G,Ce.t9;var Wt=Ce.HA,Xt=(Ce.nn,Ce.kp),Zt=Ce.CC,Jt=Ce.RF,er=(Ce.I8,Ce.mS,Ce.RJ,Ce._Y,Ce.V_),tr=Ce.EW,rr=Ce.nu,nr=(Ce.SW,Ce.zV,Ce.Ub,Ce.vA,Ce.qS),ir=(Ce.mK,function(e){return function(t){var r=Ht(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var s=t.of({}),o=function(r){s=t.ap(t.map(s,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,c=i;a<c.length;a++){o(c[a])}return s}}}),sr=Ce.hX;Ce.DZ,Ce.uK,Ce.tV;Ce.oA,Ce.oh;var or="Record";var ar=Ce.Eh,cr=(Ce.uZ,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,Ce.nr,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,r(654)),ur=r(214),lr=function(e){return function(t){return[void 0,e(t)]}},fr=function(e){return function(t){return[e(t),t]}},pr=function(e,t){return(0,n.zG)(e,gr(t))},dr=function(e,t){return(0,n.zG)(e,hr(t))},_r=function(e,t){return(0,n.zG)(e,vr(t))},gr=function(e){return function(t){return function(r){var n=t(r),i=n[0],s=n[1];return[e(i),s]}}},hr=function(e){return function(t){return function(r){var n=t(r),i=n[0],s=n[1],o=e(s),a=o[0],c=o[1];return[i(a),c]}}},mr=function(e){return function(t){return[e,t]}},vr=function(e){return function(t){return function(r){var n=t(r),i=n[0],s=n[1];return e(i)(s)}}},br="State",yr={URI:br,map:pr},wr={URI:br,map:pr,ap:dr},Sr=(0,we.N)(wr),Ir=(0,we.a1)(wr),kr={URI:br,map:pr,ap:dr,of:mr},Gr={URI:br,map:pr,ap:dr,chain:_r},zr=(0,Oe.m)(Gr),Ur=(n.yR,(0,Te.YO)(yr)),Er=(0,Oe.a)(Gr),xr=function(e){var t=function(e){return function(t){return function(r){for(var n=e(0,Be.YM(t))(r),i=[n[0]],s=n[1],o=1;o<t.length;o++){var a=e(o,t[o])(s),c=a[0],u=a[1];i.push(c),s=u}return[i,s]}}}(e);return function(e){return Be.Od(e)?t(e):mr(Be.Xl)}},Pr=function(e){return xr((function(t,r){return e(r)}))},qr=Pr(n.yR);const Cr=e=>({aggregations:{PageviewEngagement:{engaged_time:0},SegmentEntry:new Set,SegmentExit:new Set,CohortEntry:new Set,CohortExit:new Set},customProperties:{},sessionId:e.sessionId,viewId:e.viewId}),Ar=e=>t=>{const r=new Set(t);return r.add(e),r},Dr=e=>t=>{const r=new Set(t);return r.delete(e),r},Or=e=>[...e];var Tr,Mr,jr=r(573);!function(e){e.init=function(e){return e&&"object"==typeof e&&"externalStateMap"in e&&"internalStateMap"in e?e:{externalStateMap:o.YP,internalStateMap:{},migrationVersion:gn}}}(Tr||(Tr={})),function(e){e.sequenceNonEmptyArray=e=>{if(1===e.length)return e[0];const t=(0,n.bc)([],{},[]);for(const r of e){t[0].push(...r[0]);for(const e in r[1])t[1][e]=r[1][e];t[2].push(...r[2])}return t},e.sequenceArray=t=>(0,n.zG)(t,o.DT(Rt.Od),o.UI(e.sequenceNonEmptyArray)),e.empty=[Rt.cS,Ce.cS,Rt.cS],e.error=e=>[Rt.of(e),Ce.cS,Rt.cS],e.ofOutputEvent=e=>[Rt.cS,Ce.cS,[e]]}(Mr||(Mr={}));const Rr=e=>_n((t=>(0,n.zG)(Lr((e=>({...e,getCurrentSession:()=>t.environment.sessionId,getCurrentView:()=>t.environment.viewId}))),vr((()=>{return qr([Fr(e),$r(t.environment.thirdPartyData),(s=t.environment.userGroupCohorts,(0,n.zG)((function(e){return[e,e]}),zr((e=>Lr((t=>({...t,...ln(e.persistentState.internalStateMap,s)}))))),vr((e=>(0,_.cO)(s,e.processedNonQlCohorts)?mr(Rt.cS):(0,n.zG)(Kr("updateCohortDependentCohorts"),Sr(lr((0,_.rO)({processedNonQlCohorts:(0,n.a9)(s)})))))))),(i=t.environment.lookalikeModels,(0,n.zG)((function(e){return[e,e]}),vr((e=>cn.equals(e.lal,i)?mr(Rt.cS):(0,n.zG)(lr((0,_.rO)({lal:(0,n.a9)(i)})),Sr(Lr(function(e){const t=(0,n.zG)(e,o.fS((()=>({}))));return e=>({...e,getLookalikeModels:()=>t})}(i))),vr((()=>(0,n.zG)(Rt.Yo(i),Pr((()=>Kr("updateLAL"))),gr(Rt.xH))))))))),(0,n.zG)(t.externalStateDelta,o.UI(Vr),o.fS((()=>mr(Rt.bM())))),(r=t.cloudLiftedState,(0,n.zG)(r,Rt.tS((e=>Object.entries(e))),Pr((e=>{let[t,r]=e;return fr((e=>(0,n.bc)(t,e.queries.runtime.cloudLiftedQueries[t],r)))})),vr((e=>Zr(R.F2(e)))))),Wr(t.newEvents)]);var r,i,s})),gr((0,n.ls)(Rt.xH,o.DT(Rt.Od),o.tS(Mr.sequenceArray))),(e=>t=>{let[r,i]=e(t);if(o.pC(r)){let e=r.value,t=0;const s=100;let a;for(a=0;a<s&&e[2].length>t;a++){const r=e[2],[s,o]=(0,n.zG)(Wr(r.slice(t)),gr((t=>Mr.sequenceNonEmptyArray([e,...t]))),(0,n.nn)(i));e=s,i=o,t=r.length}a>=s&&(e=Mr.sequenceNonEmptyArray([e,Mr.error(`Exceeded ${s} iterations when producing transition events`)])),r=o.G(e)}return(0,n.bc)(r,i)}),dn(e,"query_language_process_duration")))),Lr=e=>lr((0,_.rO)({effects:e}));function Fr(e){return(0,n.zG)((function(e){return[e,e]}),vr((t=>{let{bootstrapped:r,effects:i,eventsForReplay:s}=t;return r?mr(Rt.cS):(0,n.zG)(lr((e=>({...e,bootstrapped:!0,eventsForReplay:[]}))),zr(Qr),vr((()=>(0,n.zG)(s,Rt.R3(pn(i)),Pr(Xr("bootstrap")),gr(Rt.xH)))),dn(e,"query_language_bootstrap_duration"))})))}const Qr=()=>lr((e=>(0,n.zG)(e.invalidatedQueries,Rt.EQ((()=>e),Yr(e))))),Yr=e=>t=>{const r=(0,n.zG)(t,Rt.UI((t=>(0,n.bc)(t,{checksum:e.queries.metadata[t]}))),(e=>Object.fromEntries(e)));return(0,n.zG)(e,(0,_.rO)({persistentState:(0,_.rO)({internalStateMap:e=>({...r,...e})})}))},Nr=(0,n.zG)(fr((e=>e.tpdQueries)),vr(o.EQ((()=>(0,n.zG)(fr((e=>new Set([...e.queries.runtime.queriesByEvent["!UpdateSecondPartyData"]||[],...e.queries.runtime.queriesByEvent["!UpdateThirdPartyData"]||[]]))),zr((e=>lr((0,_.rO)({tpdQueries:()=>o.G(e)})))))),mr)));function $r(e){const t=(0,n.zG)(e,o.UI(a.li));return(0,n.zG)((function(e){return[e,e]}),vr((r=>{if(o.Eh(H.Eq).equals(t,r.tpdHashInEffectsObject))return mr(Rt.cS);const i=o.FS(t);return(0,n.zG)(lr((0,_.rO)({persistentState:(0,_.rO)({tpdHash:(0,n.a9)(i)}),tpdHashInEffectsObject:(0,n.a9)(t),tpdReady:(0,n.a9)(o.pC(e))})),gr((()=>(0,n.zG)(e,o.UI(a.Yg)))),zr((e=>Lr(function(e){const t=un((()=>(0,n.zG)(e,o.fS((()=>({"3p":{}}))))));return e=>{const r=un((()=>({...t(),...e.get1PSegments()})));return{...e,getSegments:r,getSegmentsArray:un((()=>fn(r()))),get3PSegments:t}}}(e)))),vr(o.fw(kr)((()=>(0,n.zG)(r.tpdEventsToProcess,Rt.EQ((()=>i!==r.persistentState.tpdHash?Kr("updateTPD"):mr(Rt.cS)),(0,n.ls)(Pr(Xr("updateTPD")),Sr(lr((e=>({...e,tpdEventsToProcess:[]})))),gr(Rt.xH))))))),gr(o.fS((()=>Rt.bM()))))})))}const Br=e=>Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.metadata),o.tS((e=>Ce.P5(e,r))),o.tS((r=>(0,n.zG)(Ce.P5(t,e.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.runtime.cloudLiftedQueries))),o.NG((e=>e.compact(r)))))),o.tS((0,n.ls)(W,o.Uo))))),Hr=(e,t)=>{if(Ce.xb(e))return t;if(Ce.xb(t))return e;const r={...e};for(const e in t)r[e]=(0,n.zG)(o.ij(r[e]),o.EQ((()=>t[e]),(r=>(0,n.zG)(o.Y3((()=>qe(r,t[e]))),o.fS((()=>t[e]))))));return r};function Vr(e){return(0,n.zG)(fr((t=>(0,n.zG)(e,Br(t.queries),(e=>(0,n.zG)(t.persistentState.externalStateMap,o.UI(Ce.DZ((0,n.ls)(W,o.Uo))),o.EQ((()=>e),(t=>Hr(t,e))))),Ce.UI(K)))),vr((e=>lr((0,_.rO)({persistentState:(0,_.rO)({externalStateMap:(0,n.a9)(o.G(e))})})))),vr((()=>Kr("updateExternalState"))))}function Kr(e){return(0,n.zG)(fr((e=>pn(e.effects))),vr(Xr(e)))}function Wr(e){return(0,n.zG)(e,Rt.EQ((()=>mr(Rt.bM())),(0,n.ls)(tn,vr(Pr((e=>{let[t,r]=e;return(0,n.zG)(r,Xr(t))}))),gr(Rt.xH))))}function Xr(e){return(0,n.ls)(mr,zr((e=>"Pageview"!==e.name?mr(void 0):lr((0,_.rO)({pageviewProperties:(0,n.a9)(e.properties)})))),"bootstrap"===e?n.yR:zr((e=>{return lr((0,_.rO)({unprocessedPageviewComplete:(t=e,e=>{switch(t.name){case"Pageview":return t.view_id!==e.viewId?e:{...e,customProperties:t.properties};case"SegmentEntry":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,_.rO)({aggregations:e=>e.SegmentExit.has(r)?(0,n.zG)(e,(0,_.rO)({CohortExit:Dr(String(r)),SegmentExit:Dr(r)})):(0,n.zG)(e,(0,_.rO)({CohortEntry:Ar(String(r)),SegmentEntry:Ar(r)}))}))}case"SegmentExit":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,_.rO)({aggregations:e=>e.SegmentEntry.has(r)?(0,n.zG)(e,(0,_.rO)({CohortEntry:Dr(String(r)),SegmentEntry:Dr(r)})):(0,n.zG)(e,(0,_.rO)({CohortExit:Ar(String(r)),SegmentExit:Ar(r)}))}))}case"PageviewEngagement":{if(t.view_id!==e.viewId)return e;const r=t.properties;return(0,n.zG)(e,(0,_.rO)({aggregations:(0,_.rO)({PageviewEngagement:()=>({engaged_time:r.total_engaged_time,completion:r.total_completion})})}))}default:return e}})}));var t})),zr((e=>{return sn(e)?Lr((t=e.properties.segment_number,r="SegmentEntry"===e.name,e=>{return(0,n.zG)(e,(i={"1p":{...e.get1PSegments()["1p"],[t]:r}},e=>{const t=un((()=>({...i,...e.get3PSegments()})));return{...e,getSegments:t,getSegmentsArray:un((()=>fn(t()))),get1PSegments:()=>i}}));var i})):mr(void 0);var t,r})),Ur("event"),Er("queriesToProcess",(t=>{let{event:r}=t;return function(e,t){return(0,n.zG)((function(e){return[e,e]}),Ur("state"),Er("tpdQueriesToReject",(e=>{let{state:{tpdReady:t}}=e;return t?mr(o.bM()):(0,n.zG)(Nr,gr(o.DT((e=>e.size>0))))})),vr((r=>{let{state:i,tpdQueriesToReject:s}=r;const a=(0,n.zG)(s,o.UI((e=>Rt.hX((t=>!e.has(t))))),o.fS((()=>e=>e)));switch(e){case"bootstrap":return mr((0,n.zG)(i.queriesForReplay,a));case"event":const e=i.tpdReady?mr(void 0):lr((0,_.rO)({tpdEventsToProcess:Rt.R3(t)}));return(0,n.zG)(mr(i.locallyLiftedQueriesByEvent[t.name]||[]),gr(a),Sr(e));case"lookalikeTransition":return mr(i.locallyLiftedQueriesByEvent[t.name]||[]);case"transition":const r=i.locallyLiftedQueriesByEvent[t.name]||[];if(o.pC(i.lal)){const e=i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[];return mr(r.concat(e))}return mr(r);case"updateExternalState":return mr((0,n.zG)(i.persistentState.externalStateMap,o.fS((()=>({}))),Ce.XP));case"updateLAL":return mr(i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[]);case"updateTPD":return mr([...i.locallyLiftedQueriesByEvent["!UpdateSecondPartyData"]||[],...i.locallyLiftedQueriesByEvent["!UpdateThirdPartyData"]||[]]);case"updateCohortDependentCohorts":return mr([...i.locallyLiftedQueriesByEvent.SegmentEntry||[],...i.locallyLiftedQueriesByEvent.SegmentExit||[]]);default:return mr([])}})))}(e,r)})),vr((t=>{let{event:r,queriesToProcess:i}=t;return(0,n.zG)(i,Rt.EQ((()=>mr(Rt.bM())),(t=>(0,n.zG)(fr((t=>"bootstrap"!==e?t.effects:{...t.effects,getCurrentTime:()=>r.time,getCurrentView:()=>r.view_id,getCurrentSession:()=>r.session_id})),vr((e=>(0,n.zG)(fr((e=>(0,n.zG)(t,Rt.DZ((t=>(0,n.zG)(Ce.P5(t,e.queries.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftQueriesForReplay))),o.UI((e=>(0,n.bc)(t,e))))))))),vr((t=>Zr(R.t$((0,n.bc)(t,r)),e))))))))))})))}const Zr=(e,t)=>(0,n.zG)(e,R.EQ((e=>{let[r,i]=e;return(0,n.zG)(r,Pr((e=>{let[r,n]=e;return Jr(r,R.t$([n,i]),t)})))}),Pr((e=>{let[t,r,n]=e;return Jr(t,R.F2([r,n]))}))),gr(Mr.sequenceArray),zr(o.fw(kr)((e=>{let[,t]=e;return lr((0,_.rO)({persistentState:(0,_.rO)({internalStateMap:e=>({...e,...t})})}))}))),gr(Rt.Yo)),Jr=(e,t,r)=>(0,n.zG)(fr(R.it((i=>{const s=r??i.effects,c=(0,n.zG)(t,R.EQ(a.li,a.li)),[u,l]=(0,n.zG)(t,R.aD((e=>{let[t,r]=e;return(0,n.bc)(t.lift(r,s),an({null:null,encode:n.yR,decode:R.of,append:t.append}))}),(e=>{let[,t]=e;return(0,n.bc)(t,an(on()))}))),f=(0,n.zG)(i.persistentState.externalStateMap,o.tS(Ce.P5(e))),p=i.persistentState.internalStateMap[e]||{checksum:i.queries.metadata[e]},d=l(e,s,c,p,f,u),_=Boolean(d.result?.result)!==Boolean(i.persistentState.internalStateMap[e]?.result?.result),g=(0,n.zG)(Rt.lo(_),Rt.UI((()=>({name:d.result?.result?"SegmentEntry":"SegmentExit",time:s.getCurrentTime(),view_id:s.getCurrentView(),session_id:s.getCurrentSession(),properties:{...i.pageviewProperties,segment_number:Number(e)}}))));return(0,n.bc)(d,g)}),(t=>`Failed to interpret query ${e}. Got ${t}`))),vr(R.EQ((e=>mr([[e],Ce.cS,Rt.cS])),(t=>{let[r,i]=t;return(0,n.zG)(r.dropExternalState?en(e):mr(void 0),gr((()=>[Rt.cS,{[e]:r},i])))})))),en=e=>lr((0,_.rO)({persistentState:(0,_.rO)({externalStateMap:o.UI(Ce.EG(e))})}));function tn(e){const t=e=>t=>(0,n.bc)(e,t);return fr((r=>(0,n.zG)(e,Rt.pO(ur.aL(((e,t)=>{const r=sn(e);return(0,n.zG)(t,Rt.zT((e=>sn(e)===r)),(e=>{let{init:t,rest:r}=e;return(0,n.bc)(t,r)}),(0,a.pL)(((e,t)=>r=>(0,n.bc)(e,(0,n.zG)(r,Rt.Ce(t))))(r,e)))}))),Rt.tS((e=>{let[i,s]=e;if(!i)return(0,n.zG)(s,Rt.UI(t("event")));const o=(0,n.zG)(s,Rt.yW((e=>r.lookalikeTransitionSegmentNumbers.has(e.properties.segment_number))),(e=>e?"lookalikeTransition":"transition"));return(0,n.zG)(s,ur.ut(((e,r)=>(0,n.zG)(e,Rt.UI(t("event")),Rt.R3((0,n.zG)(r,t(o)))))))})))))}const rn=(0,n.ls)(Ce.hX((e=>Boolean(e.result?.result))),Ce.XP,Rt.UI(parseInt)),nn=(0,n.ls)(Vt((e=>e.activations??{})),sr((0,n.zG)(Boolean,(0,Ae.xD)((0,Ae.ff)(Bt)))));function sn(e){return("SegmentEntry"===e.name||"SegmentExit"===e.name)&&void 0!==e.properties?.segment_number}const on=()=>({null:{kind:"null",value:null},encode:K,decode:W,append:Pe}),an=e=>(t,r,i,s,a,c)=>{const u={...s.activations},l={...r,setSegmentActivation:(e,r,n)=>{if(n!=t)throw new Error(`QL called setSegmentActivation for query ${n} while interpreting query ${t}`);e in u?u[e].includes(r)||(u[e]=[...u[e],r]):u[e]=[r]}},f=o.ij(s.state),p=o.ij(c),d=(0,n.zG)((0,we.gz)(o.G5)(f,p),o.UI((t=>{let[r,i]=t;const s=(0,n.zG)(e.decode(r),R.fS((()=>e.null))),o=(0,n.zG)(e.decode(i),R.fS((()=>e.null)));try{return R.F2(e.append(s,o))}catch(e){throw(0,cr.w)(`Failed to append lifted event ${JSON.stringify(i)} to internal state ${JSON.stringify(r)}. Got ${e}`)}})),o.Gk((()=>(0,n.zG)(f,o.wp((()=>p)),o.UI(R.t$))))),g=(0,n.zG)(d,o.UI(R.EQ(n.yR,e.encode)),o.tS(o.ij)),{overallState:h,dropExternalState:m}=(0,n.zG)((0,we.gz)(o.G5)(d,a),o.UI((t=>{let[r,i]=t;return(0,n.zG)(o.Uo(e.decode(i)),o.tS((t=>(0,n.zG)(r,R.vx(e.decode),R.fS((()=>e.null)),o.it((r=>e.append(r,t)))))),o.EQ((()=>({overallState:g,dropExternalState:!0})),(t=>({overallState:o.ij(e.encode(t)),dropExternalState:!1}))))})),o.fS((()=>(0,n.zG)(g,o.Gk((()=>a)),(e=>({overallState:e,dropExternalState:!1}))))),(0,_.rO)({overallState:o.WG})),v=i.interpret(h,l);return{checksum:s.checksum,...(0,n.zG)(g,o.aD((()=>({})),(e=>({state:e})))),...!1===v.result?{}:{result:v},...Bt(u)?{}:{activations:u},...!1===m?{}:{dropExternalState:m}}},cn=o.Eh({equals:(e,t)=>e===t});function un(e){let t,r=!1;return()=>(r||(t=e(),r=!0),t)}function ln(e,t){const r=(0,n.zG)(t,Rt.UI((e=>[e,!0])),Ce.sq),i=un((()=>(0,n.zG)(e,Ce.hX((e=>Boolean(e.result?.result))),Ce.UI((()=>!0)),(e=>({"1p":{...r,...e}}))))),s={"3p":{}},o=un((()=>({...i(),...s})));return{getSegments:o,getSegmentsArray:un((()=>fn(o()))),get1PSegments:i,get3PSegments:()=>s}}function fn(e){return Object.keys(e).reduce(((t,r)=>{const n=Object.keys(e[r]),i=[];return n.forEach((t=>{!0===e[r][t]&&i.push(t)})),t[r]=i,t}),{})}const pn=e=>({name:"",properties:{},session_id:e.getCurrentSession(),view_id:e.getCurrentView(),time:e.getCurrentTime()}),dn=(e,t)=>r=>n=>{const i=e.startSpan(t),s=r(n);return i.finish(),s},_n=e=>t=>(0,n.zG)(lr((0,_.rO)({unprocessedPageviewComplete:(0,n.ls)(o.DT((e=>e.viewId===t.environment.viewId)),o.fS((()=>Cr(t.environment))))})),Ir(fr((e=>(0,n.zG)(o.ij(e.persistentState.unprocessedPVC),o.hX((e=>e.view_id!==t.environment.viewId)),o.UI(jr.k))))),Ur("flushedPvc"),Er("processingResult",(r=>{let{flushedPvc:i}=r;return e({...t,newEvents:(0,n.zG)(i,o.EQ((()=>t.newEvents),(e=>[...t.newEvents,e])))})})),zr((()=>lr((e=>{return{...e,persistentState:{...e.persistentState,unprocessedPVC:(0,jr.X)((t=new Date,r=e.unprocessedPageviewComplete,{name:"PageviewComplete",time:t,session_id:r.sessionId,view_id:r.viewId,properties:{...r.customProperties,aggregations:(0,n.zG)(r.aggregations,(0,_.rO)({SegmentEntry:Or,SegmentExit:Or,CohortEntry:Or,CohortExit:Or}))}}))}};var t,r})))),gr((e=>{let{flushedPvc:t,processingResult:r}=e;const i=(0,n.zG)(t,o.UI(Mr.ofOutputEvent));return(0,n.zG)((0,we.gz)(o.G5)(i,r),o.UI(Mr.sequenceNonEmptyArray),o.wp((()=>i)),o.wp((()=>r)))}))),gn=2,hn=e=>t=>{const r=t.migrationVersion??(t.stateIsCompact?1:0);return(0,n.zG)([mn,vn],Rt.md(r),Rt.EQ((()=>t),(0,n.ls)(Rt.OV(e),Rt.u4(t,((e,t)=>t(e))),(0,_.rO)({migrationVersion:()=>gn}))))},mn=e=>(0,_.rO)({externalStateMap:o.UI(Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftedQueries))),o.NG((e=>e.compact(r))))))),internalStateMap:Ce.Su(((t,r)=>{if(null==r?.state)return r;const n=e.locallyLiftedQueries[t]||e.cloudLiftedQueries[t];return{...r,state:n.compact(r.state)}}))}),vn=e=>{const t=new Set(e.queriesByEvent.PageviewEngagement??[]),r=new Set(e.queriesByEvent.PageviewComplete??[]);return(0,_.rO)({internalStateMap:Ce.z7((0,Ae.ff)((e=>t.has(e)&&r.has(e))))})},bn=(e,t)=>Ce.xb(t)?e:(0,n.zG)(e,Ce.z7((e=>!(e in t))));var yn=r(644),wn=r(215);const Sn=()=>e=>((0,n.zG)(e,s.UI((e=>e()))),s.a9({newResults:p.of(Rt.cS),pendingEvents:Rt.cS})),In=()=>()=>De.of((()=>({}))),kn=e=>[e,lt.of(e)],Gn=a.li,zn=a.Yg,Un=e=>t=>(0,n.zG)(zn(t),(t=>()=>new Promise((r=>{const n=t();n.then(o.G).then(r);const i=(0,d.HJ)((()=>r(o.YP)),e);n.then(i)})))),En=e=>t=>[e,t],xn="RefEventual",Pn=s.UI(kn),qn=e=>s.a9(kn(e)),Cn=e=>t=>s.vP((0,n.zG)(t,s.UI(Gn),s.UI(e)),(0,n.zG)(t,s.UI(zn),s.UI(lt.UI(e)))),An=e=>t=>s.vP((0,n.zG)(s.vP((0,n.zG)(e,s.UI(Gn)),(0,n.zG)(t,s.UI(Gn))),s.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(s.vP((0,n.zG)(e,s.UI(zn)),(0,n.zG)(t,s.UI(zn))),s.UI((e=>{let[t,r]=e;return lt.ap(t)(r)})))),Dn=e=>t=>(0,n.zG)(t.current,Un(e),lt.UI(o.fS((()=>(e=>Gn(e.current))(t))))),On=s.UI(Gn),Tn=s.UI(zn),Mn={URI:xn,map:(e,t)=>Cn(t)(e)},jn={URI:xn,map:Mn.map,ap:(e,t)=>An(t)(e)},Rn=e=>i.dQ((t=>{let{previousState:r}=t;const[i,c]=(0,n.zG)(e.newEvents,s.En(2,Rt.uZ()),(0,yn.H5)(Sn(e.permutiveApi,e.permutiveUrls,(u=e.customQueries.runtime,(0,n.zG)(Object.entries(u.queriesByEvent),Rt.hX((e=>{let[,t]=e;return(0,n.zG)(t,Rt.G((e=>e in u.cloudLiftedQueries)))})),Rt.UI(a.li))))));var u;const l=s.vP({lookalikeModels:e.lookalikeModels,sessionId:e.sessionId,thirdPartyData:(0,n.zG)(e.thirdPartyData,s.UI(o.UI((0,yn.H5)(Ce.UI((e=>{const t={};return e.forEach((e=>t[e]=!0)),t})))))),viewId:e.viewId,userGroupCohorts:(0,n.zG)(e.userGroupCohorts,o.g_((()=>s.a9(Rt.cS)),(e=>(0,n.zG)(e.all,Cn(R.fS((()=>[]))),On))))}),f=(0,n.zG)(s.vP({cloudLiftedState:(0,n.zG)(c,s.UI((e=>e.newResults))),environment:l,externalStateDelta:e.externalStateDelta,newEvents:(0,n.zG)(i,(0,wn.I)(e.metrics,"query_language_began_processing_pageview"))}),s.UI((0,_.rO)({environment:e=>p.of(e)})),s.UI((0,we.Yt)(p.G5))),d=Tr.init(r);const g=In(e.permutiveApi,e.permutiveUrls),h=(0,n.zG)(r?lt.of({processedState:d,stateMigratedThisInitialisation:!1}):(e.metrics.track({name:"sdk_query_state_migrated_workerisation_count_total",labels:{},value:1}),(0,n.zG)(e.migratedStateMaps,lt.UI((e=>{let{internal:t,external:r}=e;return{stateMigratedThisInitialisation:!0,processedState:{externalStateMap:r,internalStateMap:(0,n.zG)(t,o.fS((()=>({}))))}}})))),lt.Hr("environment",(()=>l.current)),lt.ak("process",(t=>{let{environment:r,processedState:i}=t;return(0,n.zG)((s={downloadCloudLiftQueries:g,environment:r,initialState:i,pastEvents:e.priorEvents,queries:e.customQueries},(0,n.zG)(lt.Do,lt.Hr("persistentState",(()=>(0,n.zG)(s.initialState,(0,_.rO)({internalStateMap:Ce.z7(((e,t)=>t.checksum===s.queries.metadata[e]))}),hn(s.queries.runtime)))),lt.Hr("invalidatedLocalQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return bn(s.queries.runtime.locallyLiftedQueries,t)})),lt.Hr("invalidatedCloudLiftQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return bn(s.queries.runtime.cloudLiftedQueries,t)})),lt.Hr("hasInvalidatedQueries",(e=>{let{invalidatedCloudLiftQueries:t,invalidatedLocalQueries:r}=e;return!(Ce.xb(t)&&Ce.xb(r))})),lt.ak("eventsForReplay",(e=>{let{hasInvalidatedQueries:t}=e;return t?s.pastEvents:lt.of(Rt.bM())})),lt.ak("cloudLiftQueriesForReplay",(0,n.ls)(o.DT((e=>e.eventsForReplay.length>0)),o.UI((e=>Object.keys(e.invalidatedCloudLiftQueries))),o.hX(Rt.Od),o.UI((0,n.ls)(s.downloadCloudLiftQueries,De.OV(s.queries.runtime),lt.UI(R.fS((()=>({})))))),o.fS((()=>lt.of({}))))),lt.Hr("queriesForReplay",(e=>{let{cloudLiftQueriesForReplay:t,invalidatedLocalQueries:r}=e;return[...Object.keys(r),...Object.keys(t)]})),lt.UI((e=>{let{cloudLiftQueriesForReplay:t,eventsForReplay:r,invalidatedCloudLiftQueries:i,invalidatedLocalQueries:a,queriesForReplay:c,persistentState:u}=e;return{bootstrapped:!1,cloudLiftQueriesForReplay:t,effects:{getCurrentTime:()=>new Date,getCurrentSession:()=>s.environment.sessionId,getCurrentView:()=>s.environment.viewId,getLookalikeModels:()=>({}),setSegmentActivation:(e,t,r)=>{throw new Error(`setSegmentActivation() called for segment ${r} without being overridden first.`)},...ln(u.internalStateMap,s.environment.userGroupCohorts)},eventsForReplay:r,invalidatedQueries:[...Object.keys(i),...Object.keys(a)],lal:o.YP,locallyLiftedQueriesByEvent:(0,n.zG)(s.queries.runtime.queriesByEvent,Ce.DZ(o.KQ(Rt.hX((e=>e in s.queries.runtime.locallyLiftedQueries))))),lookalikeTransitionSegmentNumbers:(0,n.zG)(s.queries.runtime.queriesByEvent["!UpdateLookalikeModels"]||Rt.cS,Rt.UI(parseInt),(e=>new Set(e))),pageviewProperties:{},numEventsForReplay:r.length,queries:s.queries,queriesForReplay:c,persistentState:u,tpdEventsToProcess:Rt.cS,tpdHashInEffectsObject:o.YP,tpdQueries:o.YP,tpdReady:!1,unprocessedPageviewComplete:Cr({sessionId:s.environment.sessionId,viewId:s.environment.viewId}),processedNonQlCohorts:Rt.cS}})))),e.trace.traceTask("query_language_initialisation_duration"),lt.UI((0,_.bw)((t=>{var r;e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"query_language_ready",time_origin:"sdk_init"},performance.now()),e.metrics.trackCounter({name:"sdk_queries_to_replay_count",value:(r=t,0===r.numEventsForReplay?0:r.queriesForReplay.length),labels:{}})}))),lt.UI((t=>{let r=t;const i=(0,n.zG)(e.validationService,o.OV({downloadCloudLiftQueries:g,externalState:t.persistentState.externalStateMap}));return t=>{const[s,a]=(0,n.zG)(t,Rr(e.trace))(r);return(0,n.zG)(i,o.OV((0,n.bc)(t,a))),r=a,[s,a.persistentState]}})));var s})),s.fF),m=(0,n.zG)(h,s.UI(o.UI((e=>e.process)))),v=(0,n.zG)(h,s.UI(o.EQ((()=>!1),(e=>e.stateMigratedThisInitialisation))));let b=Rt.bM();const y=(0,n.zG)(s.vP({processInput:m,inputIO:(0,n.zG)(f,s.UI(o.G))}),s.UI((0,we.Yt)(o.G5)),s.UI(o.UI((e=>{let{processInput:t,inputIO:r}=e;const i=r(),[s,c]=(0,n.zG)(i,(0,_.rO)({newEvents:Rt.UI(a.Yg),cloudLiftedState:Rt.UI((e=>e.state))}),(e=>t({...e}))),u=(0,n.zG)(s,o.EQ((()=>({errors:[],events:i.newEvents,internalStateDiff:o.YP})),(e=>{let[t,r,n]=e;return{errors:t,events:i.newEvents.concat(n.map((e=>[(0,_.k$)(),e]))),internalStateDiff:o.G(r)}})));return b=(0,n.zG)(b,Rt.R3(u)),{consumeDeltas:()=>{const e=b;return b=Rt.cS,e},modelState:c}})))),w=(0,n.zG)(y,s.UI(o.UI((e=>e.modelState)))),S=(0,n.zG)(y,s.UI(o.UI((e=>e.consumeDeltas))),s.UI(o.fS((()=>p.of(Rt.bM()))))),I=(0,n.zG)(s.vP(w,c),s.Rp(((e,t)=>{let[r,i]=t;const s=(0,n.zG)(e,o.UI((e=>{let[,t]=e;return(0,n.zG)(r,o.EQ((()=>t),(e=>(0,n.zG)(t,Rt.hX((t=>!t(e,i.pendingEvents)))))))})),o.fS((()=>Rt.bM())));if(o.pC(r)&&Rt.xb(i.pendingEvents))return[kn(r.value),s];const a=(0,_.b2)(),c=(0,n.zG)(r,o.fS((()=>d)));return[(0,n.zG)((()=>a.promise),En(c)),(0,n.zG)(s,Rt.R3(((e,t)=>{const r=Rt.xb(t)||(0,n.zG)(i.pendingEvents,Rt.yW((e=>!t.includes(e))));return r&&a.resolve(e),r})))]})),s.UI(a.li)),k=(0,n.zG)(S,s.En(3,Rt.uZ()),(t=>{let[r,i,a]=t;return{errors:(0,n.zG)(r,s.UI(p.UI(Rt.tS((e=>e.errors))))),events:(0,n.zG)(i,s.UI(p.UI(Rt.tS((e=>e.events)))),(0,wn.F)(e.metrics,"query_language_processed_pageview")),internalStateDiff:(0,n.zG)(a,s.UI(p.UI((0,n.ls)(Rt.DZ((e=>e.internalStateDiff)),o.DT(Rt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t})))))))))}})),G=(0,n.zG)(I,Cn((e=>e.internalStateMap))),z=On(G);return{state:On(I),value:{...k,stateMigratedThisInitialisation:v,internalStateMap:z,processing:(0,n.zG)(s.vP(y,c),s.UI((e=>{let[t,r]=e;return o.Wi(t)||Rt.Od(r.pendingEvents)}))),segments:(0,n.zG)(G,Cn(Ln)),tpdUsage:(0,n.zG)(s.vP(e.thirdPartyData,z),s.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.UI((()=>nn(r))))}))),unprocessedPageviewComplete:(0,n.zG)(w,s.UI(o.NG((e=>e.unprocessedPVC))),s.UI(o.UI(jr.k)))}}})),Ln=e=>(0,n.zG)(rn(e),(e=>(0,n.zG)(e,Rt.uK((e=>e<1e7)),(t=>{let{left:r,right:n}=t;return{all:e,custom:n,standard:r}}))));var Fn=r(125);const Qn=e=>kn(R.F2(e)),Yn="RefEventualEither",Nn=e=>s.a9(Qn(e)),$n=Te.UI(Mn,R.dO),Bn=we.ap(jn,R.G5),Hn=e=>(e=>t=>{const r=t();return(0,n.zG)(s.fF((()=>r)),s.UI(o.fS((()=>e))),s.UI((e=>(0,n.bc)(e,(()=>r)))))})(R.F2(e)),Vn=e=>Cn(R.F2)(e),Kn=e=>Cn(R.fS(e)),Wn={URI:Yn,map:(e,t)=>$n(t)(e)},Xn={URI:Yn,map:Wn.map,ap:(e,t)=>Bn(t)(e)},Zn=we.gM(Xn),Jn=e=>On(e.all),ei=(e,t)=>r=>({all:(0,n.zG)(r,$n(e)),byAdServer:(0,_.mQ)((0,n.ls)(t,o.UI((e=>(0,n.zG)(r,$n(e))))))}),ti=(e,t)=>(0,n.ls)(Cn(R.F2),ei(e,t)),ri=e=>(0,n.zG)(e,Cn(R.F2),ei(n.yR,(e=>o.G(e.filterCohorts)))),ni=e=>({all:(0,n.zG)(e.all,Kn((()=>Rt.bM()))),byAdServer:(0,_.mQ)((0,n.ls)(e.byAdServer,o.UI(Kn((()=>Rt.bM())))))}),ii=e=>(0,n.zG)(e,ni,Jn),si={empty:{all:Nn(Rt.bM()),byAdServer:(0,_.mQ)((e=>o.YP))},concat:(e,t)=>({all:(0,n.zG)((0,we.gz)(Xn)(e.all,t.all),$n(Rt.xH)),byAdServer:(0,_.mQ)((r=>(0,n.zG)(Rt.oA([e.byAdServer(r),t.byAdServer(r)]),ur.c2,o.UI((e=>e.reduce(((e,t)=>(0,n.zG)((0,we.gz)(Xn)(e,t),$n(Rt.xH)))))))))})},oi=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"]),ai=function(){return(0,n.bc)(...arguments)};var ci=r(794);const ui=e=>{let{queries:t,...r}=e;const[i,c]=s.Ue("pending");let u=o.G([]);const l=e=>{const t=Math.ceil(Math.random()*e.length);return(0,n.zG)(e,j.ke(t))};(0,n.zG)((()=>new Promise((e=>setTimeout(e,r.processingDelayMs)))),lt.UI((()=>performance.now())),lt.UI((e=>(0,n.zG)(u,o.UI(l),o.hX(j.Od),o.UI(M.ur(ci.n_({events:Rt.jG(),externalStateDeltas:Rt.jG(),lookalikeModels:ci.Z$(),modelState:ci.Z$(),thirdPartyData:ci.Z$()}))),(0,_.bw)((()=>{u=o.YP})),o.Hr("startTime",(()=>e))))),lt.UI((0,_.bw)(o.EQ((()=>c("skipped")),(()=>c("in_progress"))))),Ot("historicalEvents",(()=>_t(r.historicalEvents))),Ot("cloudLiftQueries",(()=>(0,n.zG)(Object.keys(t.runtime.cloudLiftedQueries),Rt.aD((()=>lt.of(Ce.cS)),(e=>(0,n.zG)(r.downloadCloudLiftQueries(e),De.OV(t.runtime),lt.UI(R.fS((()=>Ce.cS)))))),_t))),Ot("expectedSegmentMemberships",Ct((e=>di({events:{historical:e.historicalEvents,new:e.events},externalState:{historical:r.externalState,deltas:e.externalStateDeltas},lookalikeModels:e.lookalikeModels,queries:{cloudLiftQueries:e.cloudLiftQueries,metadata:t.metadata,runtime:t.runtime},thirdPartyData:e.thirdPartyData})))),Dt("report",(e=>{let{expectedSegmentMemberships:r,modelState:i}=e;return function(e){const t=new Set(e.expectedSegmentMemberships);return(0,n.zG)(function(e){const t=function(e){const t=(0,n.zG)(Object.keys(e.runtime.queriesByEvent),Rt.Su(((e,t)=>[t,2**e]))),r={},i=Object.fromEntries(t);for(const t in e.runtime.queriesByEvent){const n=e.runtime.queriesByEvent[t];for(const e of n)r[e]?r[e]+=i[t]:r[e]=i[t]}const s={};for(const e in r){const t=r[e];s[t]?s[t].push(e):s[t]=[e]}return(0,n.zG)(Object.entries(s),Rt.UI((0,n.ls)((0,a.pL)((e=>Number(e))),(0,a.pL)((e=>(0,n.zG)(t,Rt.DZ((0,n.ls)(o.DT((t=>{let[,r]=t;return(e&r)>0})),o.UI(a.li)))))))))}(e),r=new Set(Object.keys(e.runtime.cloudLiftedQueries));if(0===r.size)return(0,n.zG)(t,Rt.UI((0,a.pL)((e=>({triggers:e,cloudLifted:!1})))));return(0,n.zG)(t,Rt.tS((e=>{let[t,i]=e;const{left:s,right:o}=(0,n.zG)(i,Rt.uK((e=>r.has(e))));return[[{triggers:t,cloudLifted:!1},s],[{triggers:t,cloudLifted:!0},o]]})))}(e.queries),Rt.UI((0,a.H5)((r=>({actualSegments:(0,n.zG)(r,Rt.hX((t=>Boolean(e.modelState.persistentState.internalStateMap[t]?.result?.result)))),expectedSegments:(0,n.zG)(r,Rt.hX((e=>t.has(e))))})))))}({expectedSegmentMemberships:r,modelState:i,queries:t})})),Pt((e=>{let{startTime:t}=e;return()=>r.metrics.track({name:"sdk_segmentation_validation_duration_seconds",value:(performance.now()-t)/1e3,labels:{}})})),vt((e=>e.report)),vt(fi(r.metrics)),vt((()=>c("finished"))))();return[i,e=>{let[t,r]=e;(0,n.zG)((0,we.gz)(o.g1)(u,t.environment.lookalikeModels,(0,n.zG)(t.environment.thirdPartyData,o.UI(a.Yg))),o.UI((e=>{let[n,i,s]=e;n.push({externalStateDeltas:Rt.Yo(t.externalStateDelta),lookalikeModels:i,events:t.newEvents,modelState:r,thirdPartyData:s})})))}]};const li=new Set(["SegmentEntry","SegmentExit","PageviewEngagement","PageviewComplete","Pageview","LinkClick","SlotViewable","SlotRendered","UpdateLookalikeModels","UpdateSecondPartyData","UpdateThirdPartyData"]),fi=e=>t=>{for(const[r,{expectedSegments:i,actualSegments:s}]of t){if(0===i.length&&0===s.length)continue;const{correct:t,incorrect:o,missing:a}=pi(i,s),c=(0,n.zG)(r.triggers,Rt.UI((e=>e.startsWith("!")?e.slice(1):e)),Rt.UI((e=>li.has(e)?e:"misc")),(e=>[...new Set(e)]),Rt.UI((e=>(0,n.bc)(`trigger_${e}`,!0))),Rt.R3((0,n.bc)("is_cloud_lifted",r.cloudLifted)),(e=>Object.fromEntries(e))),u=(t,r)=>r.length>0&&e.trackCounter({name:t,value:r.length,labels:c});u("sdk_segmentation_validation_correct_count_total",t),u("sdk_segmentation_validation_incorrect_count_total",o),u("sdk_segmentation_validation_missing_count_total",a)}},pi=(e,t)=>{if(0===t.length)return{correct:[],incorrect:[],missing:e};if(0===e.length)return{correct:[],incorrect:t,missing:[]};const r=new Set(t),i=new Set(e),{right:s,left:o}=(0,n.zG)(t,Rt.uK((e=>i.has(e))));return{correct:s,incorrect:o,missing:(0,n.zG)(e,Rt.hX((e=>!r.has(e))))}};const di=e=>hi(50,(function*(){const t={...e.queries.runtime.locallyLiftedQueries,...e.queries.cloudLiftQueries},r=(0,n.zG)(e.queries.runtime.queriesByEvent,Ce.DZ((0,n.ls)(o.ij,o.UI(Rt.UI((e=>(0,n.bc)(e,t[e]))))))),i=(0,n.zG)(e.externalState.historical,o.fS((()=>({}))),Ce.DZ(o.Dj(W)),(t=>(0,n.zG)(e.externalState.deltas,Rt.UI(Br(e.queries)),Rt.u4(t,Hr))),Ce.UI(K)),s={},a=new gi(e.lookalikeModels,e.thirdPartyData),c=e=>(a.processEvent(e),(0,n.zG)(r[e.name]??[],Rt.DZ((t=>{let[r,i]=t;return(0,n.zG)(o.ij(i.lift(e,a.effects)),o.fX((e=>s[r]?(0,n.zG)(e,_i(i,s[r])):R.F2(e))),o.UI((e=>(s[r]=e,r))))})))),u=e=>(0,n.zG)((e=>(0,n.zG)(s[e]??null,(r=>e in i?(0,n.zG)(i[e],_i(t[e],r),R.fS((()=>r))):r),(r=>t[e].interpret(r,a.effects)),(e=>e.result)))(e),o.DT((t=>t!==a.getSegmentResult(e))),o.UI((t=>({name:t?"SegmentEntry":"SegmentExit",properties:{segment_number:Number(e)},time:a.effects.getCurrentTime(),session_id:a.effects.getCurrentSession(),view_id:a.effects.getCurrentView()})))),l=e=>{if(0==e.length)return;const t=(0,n.zG)(e,Rt.tS((0,n.ls)(u,o.UI(c),o.fS((()=>Rt.bM())))));l(t)};for(const t of e.events.historical)yield,c(t);(0,n.zG)(Object.keys(t),l);for(const t of e.events.new)switch(yield,t.name){case"SegmentEntry":case"SegmentExit":case"PageviewComplete":break;default:c(t)}return(0,n.zG)(Object.keys(t),l),a.effects.getSegmentsArray()["1p"]})),_i=(e,t)=>r=>R.Y3((()=>e.append(t,r)),(e=>`Failed to append lifted state: ${e}`));class gi{segments;segmentsArray=void 0;lastEvent=(()=>o.YP)();effects;constructor(e,t){const r=(0,n.zG)(t,Ce.UI(Ce.hX((e=>!0===e))));this.segments={...r,"1p":{}};const i=(0,n.zG)(this.segments,Ce.UI(Object.keys));this.effects={getLookalikeModels:()=>e,getSegments:()=>this.segments,getSegmentsArray:()=>(this.segmentsArray||(this.segmentsArray={...i,"1p":Object.keys(this.segments["1p"])}),this.segmentsArray),setSegmentActivation:()=>{},getCurrentTime:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>new Date),(e=>e.time))),getCurrentSession:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.session_id))),getCurrentView:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.view_id)))}}get1pSegments(){return this.effects.getSegmentsArray()["1p"]}getSegmentResult(e){return this.segments["1p"][e]??!1}processEvent(e){if("SegmentEntry"===e.name){const t=e.properties.segment_number;t&&this.processSegmentEntry([t])}else if("SegmentExit"===e.name){const t=e.properties.segment_number;t&&this.processSegmentExit([t])}else if("PageviewComplete"===e.name){const t=e.properties.aggregations;t?.SegmentEntry&&this.processSegmentEntry(t.SegmentEntry),t?.SegmentExit&&this.processSegmentExit(t.SegmentExit)}this.lastEvent=o.G(e)}processSegmentEntry(e){for(const t of e)t in this.segments["1p"]||(this.segments["1p"][t]=!0,this.segmentsArray=void 0)}processSegmentExit(e){for(const t of e)t in this.segments["1p"]&&(delete this.segments["1p"][t],this.segmentsArray=void 0)}}const hi=(e,t)=>async()=>{let r=performance.now();const n=t();for(;;){performance.now()-r>e&&(await new Promise((e=>setTimeout(e))),r=performance.now());const t=n.next();if(t.done)return t.value}},mi=e=>i.dQ((e=>{let{previousState:t}=e;return{value:o.YP,state:s.a9(t)}})),vi=e=>i.dQ((t=>{let{previousState:r}=t;const i=(0,n.zG)(r,o.DT(_.El),o.xH,o.hX(D.HD)),a=(0,n.zG)(i,o.EQ((()=>!1),(t=>t===e.sessionId)));if(!e.metrics.isEnabled()||Math.random()>.1||a)return{value:o.YP,state:s.a9(r)};const[c,u]=s.Ue(s.a9("pending"));return{value:o.G((t=>{let{downloadCloudLiftQueries:r,externalState:n}=t;const[i,s]=ui({downloadCloudLiftQueries:r,externalState:n,historicalEvents:e.priorEvents,metrics:e.metrics,processingDelayMs:6e4,queries:e.customQueries});return u(i),s})),state:(0,n.zG)(s.xH(c),s.UI((0,n.ls)(o.DT((e=>"in_progress"===e||"finished"===e)),o.UI((()=>e.sessionId)),o.wp((()=>i)))))}})),bi=e=>(0,n.zG)(i.K4((t=>{let{stopped:r}=t;const[i,a]=s.Ue(s.a9(p.of(o.YP)));let c;const u=new Promise((e=>{c=e}));return{priorEvents:()=>u.then((e=>e())),externalStateDelta:s.xH(i),newEvents:(0,n.zG)(s.vP(e.newEvents,r),s.UI((e=>{let[t,r]=e;return r?()=>[]:t}))),setCachedPriorEvents:c,setExternalStateDelta:a}})),i.ak("segmentationValidation",(t=>{let{priorEvents:r}=t;return(0,n.zG)(e.eventsCache,R.EQ((()=>mi),(()=>vi)),(t=>t({...e,sessionId:e.sessionId.current,priorEvents:r})))})),i.ak("segmentationService",(t=>{let{newEvents:r,priorEvents:o,externalStateDelta:a,segmentationValidation:c}=t;return(0,n.zG)(Rn({...e,externalStateDelta:a,newEvents:r,priorEvents:o,validationService:c,userGroupCohorts:e.userGroupCohorts}),i.bw((t=>(0,n.zG)(t.errors,s.UI((t=>(0,n.zG)(t(),Rt.UI((t=>e.reportError(`Query Language: ${t}`,{userId:e.groupId}))))))))))})),i.UI((t=>(0,n.zG)(t.segmentationService.events,s.En(4,Rt.uZ()),(r=>{let[i,c,u,l]=r;return{...t,newEvents:i,realtime:(0,n.zG)(c,s.Rp(!1,((e,t)=>{const r=t();return e||r.some((e=>{let[,t]=e;return"Pageview"===t.name}))})),(e=>s.vP(e,t.segmentationService.processing)),s.UI((e=>{let[t,r]=e;return t&&!r})),s.u4(((e,t)=>e||t))),currentPageviewSegments:(f={processedEvents:(0,n.zG)(u,s.UI(p.UI(Rt.UI(a.Yg)))),segments:t.segmentationService.segments,viewId:e.viewId},(0,n.zG)(s.vP(f.processedEvents,f.viewId,f.segments),s.Rp({pageviewProcessed:!1,resolvePageviewSegments:e=>{},segments:kn({all:[],custom:[],standard:[]}),viewId:""},((e,t)=>{let[r,i,s]=t;const a=r();return(0,n.zG)(e,o.DT((e=>e.viewId===i)),o.EQ((()=>{if((0,n.zG)(a,Rt.G((e=>"Pageview"===e.name&&e.view_id===i))))return{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:s,viewId:i};{const e=(0,_.b2)();return{pageviewProcessed:!1,resolvePageviewSegments:t=>e.resolve(zn(t)()),segments:ai(Gn(s),(()=>e.promise)),viewId:i}}}),(e=>e.pageviewProcessed?{...e,segments:s}:(0,n.zG)(a,Rt.G((e=>"Pageview"===e.name&&e.view_id===i)))?(e.resolvePageviewSegments(s),{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:s,viewId:i}):{...e,segments:s})))})),s.UI((e=>e.segments)))),lastProcessedEvents:(0,n.zG)(l,s.UI(p.UI(Rt.UI(a.Yg))))};var f})))),i.Hr("cohorts",(t=>{let{segmentationService:r}=t;return(0,n.zG)(s.fF(e.nonQlCohorts),s.UI(o.UI((e=>(0,n.zG)(r.segments,Cn((e=>e.all)),Cn(Rt.UI(String)),ri,(t=>({query_language:t,...e})))))))})),i.ak("stateSync",(t=>{let{segmentationService:r,lastProcessedEvents:n}=t;return Ft({eventSourceId:e.eventSourceId,groupId:e.groupId,groupIdIsNewlyGenerated:e.groupIdIsNewlyGenerated,internalStateDiff:r.internalStateDiff,internalStateMap:r.internalStateMap,lastProcessedEvents:n,logger:e.logger,permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,queryLanguageProcessing:r.processing,reportError:e.reportError,sessionId:e.sessionId,viewId:e.viewId})})),i.bw((e=>{let{stateSync:t,setExternalStateDelta:r}=e;return r(t.externalStateDelta)})),i.ak("segmentTransitions",(t=>{let{segmentationService:r}=t;return(e=>(0,n.zG)(i.vP({currentSegmentsSet:i.K4((()=>(0,n.zG)(e.segments,s.UI(u))))}),i.ak("transitionsSinceInit",(e=>{let{currentSegmentsSet:t}=e;return i.of(c(t))})),i.UI((e=>{let{currentSegmentsSet:t,...r}=e;return r}))))({segments:(0,n.zG)(On(r.segments),s.UI((e=>e.all))),viewId:e.viewId})})),i.Hr("cohortsRef",(e=>{let{cohorts:t}=e;return(0,n.zG)(t,s.VS(o.EQ((()=>s.a9(Rt.bM())),(0,n.ls)((e=>Object.values(e)),Rt.UI((0,n.ls)(ni,(e=>e.all),On,s.D8(Rt.Eh(D.Eq)))),Rt.vP(s.g1),s.UI(Rt.xH)))))})),i.Hr("createTrackRequest",(t=>{let{cohortsRef:r,segmentationService:i}=t;return(0,n.zG)(s.vP({cohorts:(0,n.zG)(r,s.UI(o.G)),qlSegments:(0,n.zG)(On(i.segments),s.UI(o.G)),webClient:e.webClient}),s.UI((0,we.Yt)(o.G5)),s.UI(o.UI((t=>{let{cohorts:r,qlSegments:n,webClient:i}=t;return t=>({...t,segments:n.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...i,...t.properties.client??{}}}})}))))})),i.Hr("eventsToPublishOnPageUnload",(t=>e.trackPageviewComplete?(0,n.zG)(t.segmentationService.unprocessedPageviewComplete,s.UI(Rt.pc(o.UI((e=>(0,n.bc)(`PageviewComplete-${e.view_id}`,e))))),(e=>s.vP(t.createTrackRequest,e)),s.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.EQ((()=>Rt.cS),(e=>(0,n.zG)(r,Rt.UI((0,a.H5)(e))))))}))):s.a9(Rt.cS))),i.ak("eventCache",(t=>{let{newEvents:r,setCachedPriorEvents:o}=t;return(0,n.zG)(e.eventsCache,R.EQ((e=>(o(e),i.of({newEvents:r}))),(e=>(0,n.zG)((e=>i.K4((()=>({newEvents:(0,n.zG)(e.newEvents,s.UI(p.UI((0,_.bw)(Rt.UI((t=>{let[,r]=t;oi.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))))({eventsCache:e,newEvents:r}),i.UI((e=>{let{newEvents:t,priorEvents:r}=e;return o(r),{newEvents:t}}))))))})),i.UI((e=>({...e,newEvents:e.eventCache.newEvents}))),i.Hr("eventsToPublish",(t=>{let{cohorts:r,newEvents:i,segmentationService:c}=t;return(0,n.zG)(s.vP(i,e.webClient,c.segments,(0,n.zG)(r,s.UI(o.UI((0,n.ls)((e=>Object.values(e)),Rt.UI(ni),Rt.UI((e=>e.all)))))),(0,n.zG)(e.viewId,s.Rp(new Set,((e,t)=>new Set([...e,t]))))),s.UI((t=>{let[r,i,s,c,u]=t;return(0,n.zG)(o.Do,o.Qt("webClient",i),o.Qt("cohorts",c),o.ak("events",(()=>(0,n.zG)(r(),Rt.hX((e=>{let[,t]=e;return"PageviewComplete"!==t.name||u.has(t.view_id)})),o.DT(Rt.Od)))),pt,Ot("segments",(()=>(0,n.zG)(zn(s),_t))),At((e=>(0,n.zG)(e.cohorts,lt.uU(Dn(1e3)),lt.UI(Rt.xH),lt.UI((t=>({...e,cohorts:t})))))),vt((t=>{let{cohorts:r,events:i,segments:s,webClient:o}=t;return(0,n.zG)(i,Rt.UI((0,a.H5)((t=>({...t,segments:s.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...o,...t.properties.client??{}}}})))))})),lt.UI(o.fS((()=>Rt.bM()))))})),(e=>{const[t,r]=s.gS(Rt.uZ());return(0,n.zG)(e,s.UI((e=>e().then(r)))),t}))})));var yi=r(710);function wi(e){return t=>(0,n.zG)(s.oQ(e),s.UI((0,_.rO)({backoffAfterErrorMs:e=>e??0,backoffAfterSuccessMs:e=>e??0})),(e=>i.dQ((r=>{let{previousState:i}=r;const[a,c]=s.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(i)),u=(0,n.zG)(s.vP(a,e),s.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:a,value:(0,n.ls)(o.DT((()=>Date.now()>=u.current)),o.UI(t),o.UI((0,_.bw)((e=>e.then((()=>c({...a.current,lastSuccess:Date.now()})),(()=>c({...a.current,lastError:Date.now()})))))))}}))))}const Si=function(e,t){return i.of(o.YP)};var Ii=r(919);const ki=function(e,t){return(0,n.zG)(Gi(e),wi({backoffAfterErrorMs:6e5}),i.VS((e=>Ii.m((0,n.zG)(t,s.UI((0,_.rO)({tpdUsage:o.UI((0,n.ls)(Ce.UI(Ce.z7((e=>["eyeota","liveramp_IPSOS","liveramp_Acxiom","liveramp_Ibotta","liveramp_Compass","liveramp_180byTWO","liveramp_MeritDirect","liveramp_PlaceIQ","liveramp_NCS","liveramp_Bombora","liveramp_Webbula","liveramp_IRI","liveramp_123Push","liveramp_Fluent","liveramp_AffinityAnswers","liveramp_AmeribaseDigital","liveramp_Clickagy","liveramp_FreckleIoT","liveramp_Lifesight","liveramp_StartApp","liveramp_AudienceElements","liveramp_Illion","liveramp_Comscore","liveramp_Alliant","liveramp_Factual","liveramp_EngageDMi","liveramp_33across","liveramp_Epsilon","liveramp_IXIDigital","liveramp_AnalyticsIQ","liveramp_Zeotap","liveramp_Liveramp_France","liveramp_DLG","liveramp_CoreLogic","liveramp_Kantar","liveramp_OnAudience","liveramp_Mastercard","liveramp_RoyMorgan","liveramp_Yougov","liveramp_CACI","liveramp_DunandBradstreet","liveramp_StatSocial","liveramp_Experian","liveramp_ShareThis","liveramp_Stirista","liveramp_killi"].includes(e)))),Ce.hX((0,Ae.ff)(Ce.xb))))})),s.UI((t=>{let{tpdUsage:r,userId:i}=t;return{validityKey:()=>i,freshnessKey:(0,n.ls)((()=>r),o.EQ((()=>0),(0,n.ls)(JSON.stringify,_.vp))),refresh:(0,n.zG)(r,o.hX((e=>Object.keys(e).length>0)),o.UI((t=>()=>De.Y3((()=>(0,n.zG)(e({user_id:i,time:new Date,tpd_segments:t}),o.fS((()=>Promise.reject("Blocked by backoff."))))),(e=>`Failed to report TPD usage. Got ${e}`)))))}})))))),i.UI(n.Q1))};const Gi=e=>t=>{const{config:r,metrics:n,permutiveApi:i,permutiveUrls:s}=e,a=n.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:s.getEndpointUrl("/tpd/usage",o.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",a),e)))};var zi=function(e){return function(t){return function(r){return e(t(r))}}},Ui=n.a9;Be.F4,Be.Xl;function Ei(e){return function(t){return function(){return e.of(t)}}}function xi(e){return function(t){return function(r){return function(n){return e.map(r(n),t)}}}}function Pi(e){return function(t){return function(r){return function(n){return e.ap(r(n),t(n))}}}}function qi(e){return function(t){return function(r){return function(n){return e.chain(r(n),(function(e){return t(e)(n)}))}}}}function Ci(e){return function(t){return(0,n.ls)(t,e.of)}}lt.PM;var Ai=Ui,Di=(lt.tD,zi(lt.tD),function(e,t){return(0,n.zG)(e,Oi(t))}),Oi=xi(lt.dO),Ti=(lt.Hi,Ei(lt.PM)),Mi=(lt.UA,"ReaderTask"),ji={URI:Mi,map:Di},Ri={URI:Mi,of:Ti};Be.F4,Be.Xl;var Li=Ui,Fi=Fn.F2(Ri),Qi=(De.QM,De.lk,De.dk,De.Op,De.fj,Fn.UI(ji)),Yi=Fi;Be.F4,Be.Xl;function Ni(e,t){const r=["amp","gigya","pxid","sailthru"],a=(0,n.zG)(t.identities,s.UI(o.UI(Ce.z7((e=>!r.includes(e)))))),c=e=>(0,_.vp)(JSON.stringify(e)),u=e=>[c(e),e];return(0,n.zG)(i.vP({fetchFromNewEndpoint:(0,n.zG)($i(e),wi({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,n.zG)(Bi(e),wi({backoffAfterErrorMs:6e5}))}),i.VS((r=>{let{fetchFromNewEndpoint:c,fetchFromLegacyEndpoint:l}=r;return(0,n.zG)(Ii.m((0,n.zG)(s.vP(t.userId,t.sessionId,a),s.UI((t=>{let[r,i,s]=t;return{validityKey:()=>r,freshnessKey:()=>`${Hi(s)},${i}`,refresh:(0,n.zG)(s,o.UI((t=>()=>Ce.xb(t)?De.of({}):De.Y3((()=>(0,n.zG)((t=>(0,n.zG)(c(t),o.UI((e=>e.catch((()=>(0,n.zG)(l(t.identities),o.fS((()=>e))))))),o.wp((()=>l(t.identities))),o.UI((0,_.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(n.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))})))))({userId:r,identities:t}),o.fS((()=>Promise.reject("Blocked by persistent backoff"))))),(e=>`Error fetching TPD. Got ${e}`)))),o.UI(Qi(u)))}})))),Ii.d((e=>o.G((e=>Array.isArray(e)?e:u(e))(e)))),i.UI(s.UI(R.fS((t=>(e.logger.warn("[TPD]",`Failed to retrieve usable value, using zero value. ${t}`),o.G(u({}))))))),i.bw((0,n.ls)(s.UI(o.pC),s.UI((t=>{t&&e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"audience_matching_ready",time_origin:"sdk_init"})})))))})))}const $i=e=>async t=>{const r=e.metrics.startTimer("sdk_http_audience_matching_seconds",{}),i=await e.permutiveApi.req({url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",o.G("v1"),t.userId),payload:{identities:(0,n.zG)(t.identities,Ce.Yz,Rt.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"});return e.metrics.stopTimer("sdk_http_audience_matching_seconds",r),i.items},Bi=e=>async t=>{const r=e.metrics.startTimer("sdk_http_tpd_seconds",{}),n=await e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/tpd",o.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1});return e.metrics.stopTimer("sdk_http_tpd_seconds",r),n},Hi=(0,n.ls)(JSON.stringify,_.vp);const Vi=(e,t)=>(0,n.zG)(i.vP({data:Ni(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:ki(e,s.vP({tpdUsage:t.tpdUsage,userId:t.userId}))}),i.ak("analytics",(e=>{let{data:r}=e;return function(e){return i.dQ((t=>{let{previousState:r}=t;const[i,a]=s.gS(Rt.uZ());var c;return{state:(0,n.zG)(s.vP(e.userId,e.providerSegments,e.sessionId,e.viewId),s.D8(((e,t)=>{let[r,n]=e,[i,s]=t;return r===i&&n===s})),s.Rp(null!==(c=r)&&"object"==typeof c?c:{userId:"",providerHashes:{}},((e,t)=>{let[r,i,s,c]=t;const u=(0,n.zG)(i,o.fS((()=>({})))),l=(0,n.zG)(u,Ce.UI((0,_.SL)(_.vp))),f=(0,n.zG)(e,o.DT((e=>e.userId===r)),o.UI((e=>e.providerHashes)),o.fS((()=>({}))));return(0,n.zG)(u,Ce.z7((e=>l[e]!==(f[e]||0))),(e=>Object.entries(e)),Rt.UI((e=>{let[t,r]=e;return(0,n.bc)((0,_.k$)(),{name:"ThirdPartySegments",properties:{data_provider:t,segments:[...r]},session_id:s,time:new Date,view_id:c})})),a),{userId:r,providerHashes:l}}))),value:i}}))}({providerSegments:(0,n.zG)(r,s.UI(o.UI(yn.Yg))),sessionId:t.sessionId,userId:t.userId,viewId:t.viewId})})),i.UI((e=>{let{data:t,analytics:r}=e;return{data:t,analyticsEvents:r}}))),Ki=function(e){const t={include_geo:!0,include_isp:!0,include_ip_hash:!0,include_ip:!1},r=e.trace.startSpan("geoip_data_retrieval");return(0,n.zG)(Ii.m((0,n.zG)(e.sessionId,s.UI((r=>({validityKey:()=>(0,_.vp)(JSON.stringify(t)),freshnessKey:()=>r,refresh:o.G((()=>De.Y3((()=>Wi(e.permutiveApi,e.metrics,e.config,t,e.permutiveUrls)),(e=>`Error fetching geoip. Got ${e}`))))}))))),i.UI(s.UI(R.fS((t=>(e.logger.warn("[geoip]",`Failed to retrieve usable value, using zero value. ${t}`),o.G({})))))),i.bw((0,n.ls)(s.UI(o.pC),s.UI((t=>{t&&(e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"geoip_data_ready",time_origin:"sdk_init"},performance.now()),r.finish())})))))};const Wi=(e,t,r,n,i)=>{const s=[];n.include_geo&&s.push(["include","geo"]),n.include_isp&&s.push(["include","isp"]),n.include_ip&&s.push(["include","ip"]),n.include_ip_hash&&s.push(["include","ip_hash"]);const a=t.startTimer("sdk_http_geoip_seconds",{});return e.req({url:i.getEndpointUrl("/geoip",o.G(r.apiVersion),s),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(t.stopTimer("sdk_http_geoip_seconds",a),e)))},Xi=e=>t=>{const r=n=>{const i={...n};for(let s in n){const o=n[s];t.hasOwnProperty(o)?e?.dropUnenriched&&void 0===t[o]?delete i[s]:i[s]=t[o]:null!==o&&"object"==typeof o&&o.constructor===Object&&(i[s]=r(o))}return i};return r};var Zi=r(45),Ji=r(559);const es=function(e,t,r,a,c){const u=(0,Ji.Hn)(rs),l=u("ssps",Rt.cS),f=u("all_cohort_mapping",{}),p=l.includes("google_pps"),d=u("affinity_enabled",!1);return(0,n.zG)(c.consent,i.KD([[e=>!e,i.of(Nn(o.YP))],i.K4((i=>{let{stopped:u}=i;a.debug("[ssp] Addon started, affinity enabled: ",d);const l=(0,n.zG)(c.cohorts,$n((0,n.ls)(Rt.hX((e=>e in f)),Rt.tS((e=>f[e]))))),p=(0,n.zG)(s.vP(c.url,u),s.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.hX((()=>d&&!r)))})),s.UI(o.UI((r=>De.Y3((()=>e.req({method:"GET",url:t.getEndpointUrl("/standard-audiences/v1/affinity",o.YP,[["url",r]]),withCredentials:!1,dataType:"json"})),String)))),s.UI(o.UI(De.Vn((0,_.bw)((e=>r(`Failed to fetch affinity cohorts: ${e}`)))))),s.UI(o.UI(De.UI((e=>e.affinity_values)))),s.UI(o.fS((()=>De.of(Rt.bM())))),s.VS(Hn(Rt.bM())));return(0,n.zG)((0,we.gz)(Xn)(l,p),$n(Rt.xH),$n((e=>[...new Set(e)])),$n(o.G))}))]),i.UI(s.xH),i.UI((e=>({cohorts:(0,n.zG)(e,$n(o.fS((()=>Rt.bM()))),ei((e=>e),(e=>"dfp"===e.id&&p?o.G(ts):o.YP)),o.G),externalData:{[ns]:(0,n.zG)(On(e),s.UI(o.Uo),s.UI(o.xH),s.UI(o.UI(ts)),s.D8(o.Eh(Rt.Eh(D.Eq))),s.UI(o.UI((e=>({ssps:l,cohorts:e})))))}}))))};const ts=e=>[...new Set(e.map((e=>e.replace(/-ac$/,"").replace(/-aw$/,"").replace(/-c$/,""))))],rs="ssp";const ns="_pssps",is=(e,t)=>(0,n.zG)(es(e.permutiveApi,e.permutiveUrls,e.reportError,e.logger,t),i.UI((e=>{let{cohorts:t,externalData:r}=e;return{ssp:t,externalData:r}}))),ss="_pssps",os=(e,t)=>({ssp:o.uZ(si).concat(e.ssp,t.ssp),externalData:{[ss]:(0,n.zG)(s.vP(e.externalData._pssps,t.externalData._pssps),s.UI((e=>{let[t,r]=e;return o.uZ(as).concat(t,r)})))}}),as={concat:(e,t)=>({cohorts:e.cohorts.concat(t.cohorts),ssps:Array.from(new Set(e.ssps.concat(t.ssps)))})};function cs(e){return e.includes("cur")?e:["cur",...e]}const us=(e,t)=>i.K4((()=>{return e.logger.log("[curation]: running curation service",t.activationConfigs,["appnexus","ix","msft","openx","pubmatic"]),(0,n.zG)(t.cohorts,$n((r=e.logger,e=>t=>{const i=(0,n.zG)(t,Rt.tS((t=>(0,n.zG)(e[t],o.ij,o.fS((()=>Rt.bM()))))),cs);return r.log("[curation]: resolved curated cohorts",i),i})(t.activationConfigs)),ei((e=>e),(e=>(e.id,o.YP))),(e=>({ssp:o.G(e),externalData:{[ss]:(0,n.zG)(e,ii,s.UI((e=>o.G({ssps:["appnexus","ix","msft","openx","pubmatic"],cohorts:e}))))}})));var r})),ls=(e,t)=>us(e,t),fs=e=>{const t=(0,n.zG)(e?.dfp??[],Rt.UI(String),(e=>new Set(e)));return{id:"dfp",filterCohorts:Rt.hX((e=>t.has(e)))}};(0,Ji.Hn)("appnexus_adserver")("auto_init",!1);const ps=e=>{if(!e.metrics.isEnabled())return()=>{};const t=(0,n.zG)(e.adServers,Rt.UI((e=>(0,n.bc)(e.id,e))),Ce.sq,Ce.UI((t=>{const r=(0,n.zG)(e.cohorts,Ce.DZ((e=>e.byAdServer(t))),(e=>s.vP(e)),s.UI(Ce.UI((i=5e3,a="Timeout",e=>(0,n.zG)(e,Un(i),lt.UI(o.pF((()=>R.t$(a)))))))),s.UI((0,we.Yt)(lt.Hi)),s.UI(lt.UI((0,n.ls)(Ce.oh,Me.Vn(Ce.Su(((t,r)=>{e.logger.warn("[Targeting Metrics]",`[${t}]`,r)}))),Me.F2))),(e=>()=>e.current));var i,a;return(0,n.ls)(Rt.of,Rt.UI((e=>e.cohorts)),_s,Rt.UI((e=>{let[t,r]=e;return{allCohorts:new Set(t),cohortCountByType:ds(t),requestCount:r}})),(i=>(0,n.zG)(r(),lt.UI(Ce.Su(((t,r)=>(i,s)=>{(0,n.zG)(r,Rt.Hr("actualCohortCount",(e=>{let{cohortCountByType:t}=e;return(0,n.zG)(t,Ce.P5(i))})),Rt.UI((r=>{const a={cohort_type:i,target:t},c=s.reduce(((e,t)=>r.allCohorts.has(t)?e+1:e),0),u=s.length-c;e.metrics.track({name:"sdk_ad_request_missed_cohorts",labels:a,value:r.requestCount*u}),e.metrics.track({name:"sdk_ad_request_successful_cohorts",labels:a,value:r.requestCount*c}),(0,n.zG)(r.actualCohortCount,o.UI((t=>{const n=t-c;e.metrics.track({name:"sdk_ad_request_superfluous_cohorts",labels:a,value:r.requestCount*n})})))})))})(t.id,i))))),(e=>e()))})));return e=>{if("AdRequest"===e.name)(r=e.properties).ad_server_id in t&&t[r.ad_server_id](r);var r}},ds=e=>({ql:(0,n.zG)(e,Rt.u4(0,((e,t)=>isNaN(parseInt(t))?e:e+1)))}),_s=e=>(0,n.zG)(e,Rt.pO((e=>{const{init:t,rest:r}=(0,n.zG)(e,Rt.zT((t=>t===e[0])));return[t,r]})),Rt.UI((e=>[e[0],e.length]))),gs=e=>(0,n.zG)(e.viewId,s.UI((e=>{let t;return{viewId:e,cohortsP:new Promise((e=>{t=e})),resolveCohorts:t}})),(t=>s.vP(t,e.contextualCohorts)),s.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI(t.resolveCohorts)),(0,n.zG)((()=>t.cohortsP),En((0,n.zG)(r,o.fS((()=>({all:Rt.bM(),gam:Rt.bM(),xandrSsp:Rt.bM(),adswizz_keyvalue:Rt.bM()}))))))})),ti((e=>e.all),(e=>{switch(e.id){case"dfp_contextual":return o.G((e=>e.gam));case"xandr_ssp_contextual":return o.G((e=>e.xandrSsp));case"adswizz_keyvalue_contextual":return o.G((e=>e.adswizz_keyvalue));default:return o.YP}})),o.G);const hs=B.n_({cohorts:Rt.Eh((0,_.Or)()),ctx:(0,_.Or)()}),ms=Rt.cS;Promise.resolve(R.F2(ms)),B.n_({userId:(0,_.Or)(),lastSuccess:{equals:(e,t)=>e&&t&&hs.equals(e,t)||e===t}});function vs(e,t){return Object.keys(t).reduce(((r,n)=>void 0!==e[n]?{...r,[n]:t[n]+e[n]}:{...r,[n]:t[n]}),e)}function bs(e,t){return(0,n.zG)(Is(e),((e,t)=>r=>(0,n.zG)((e=>r(e)().then((e=>R.nM(e)?Promise.reject(e.left):e.right))),wi(e),i.UI((e=>r=>()=>(0,n.zG)(r,e,o.EQ((()=>Promise.resolve(R.t$(t))),(e=>e.then(R.F2,R.t$))))))))({backoffAfterErrorMs:6e5},"Advertiser segmentation request blocked by rate limiting."),i.VS((r=>i.dQ((i=>{let{previousState:a}=i;return e.logger.debug("[advertiser] previous state:",a),(0,n.zG)(t,s.Rp(s.a9(ws(e)(a)),Ss(e)(r)),s.xH,s.bw((t=>e.logger.debug("[advertiser] updated state:",t))),(e=>({state:(0,n.zG)(e,s.UI((e=>{let{userId:t,lastSuccess:r}=e;return{userId:t,lastSuccess:o.FS(r)}})),s.D8(Cs)),value:(0,n.zG)(e,s.UI((e=>{let{eventual:t}=e;return t})))})))})))))}const ys=e=>t=>(0,n.zG)(t,Cn(function(e){return t=>(0,n.zG)(t.cohorts,j.hX((r=>(0,n.zG)(r.groups,j.yW((i=>(0,n.zG)(o.ij(t.groups[i]),R.Yo((()=>`cohort [${r.code}] is missing group [${i}]`)),R.Vn((t=>e.error(`[advertiser] ${t}`))),R.UI((e=>e>0)),R.fS((()=>!0)))))))),j.UI((e=>{let{code:t}=e;return t})))}(e)),ti((e=>e),(e=>"dfp"===e.id?o.G((e=>e)):o.YP)),o.G),ws=e=>t=>(0,n.zG)(t,o.DT(As),o.fS((()=>Ds())),(e=>R.Y3((()=>({userId:e.userId,inFlight:!1,lastSuccess:o.ij(e.lastSuccess),view:Ps(),ctx:(0,n.zG)(o.ij(e.lastSuccess),o.UI((e=>{let[t]=e;return t}))),eventual:Os()})),(e=>`failed to parse existing persistent state: ${e}`))),R.fS((t=>(e.logger.error("[advertiser]",t),xs(""))))),Ss=e=>t=>(r,i)=>(0,n.zG)(r,s.VS((0,n.ls)(o.DT((e=>{let{userId:t}=e;return t===i.userId})),o.fS((()=>xs(i.userId))),(r=>{if(qs(r)===i.viewId)return e.logger.debug("[advertiser] view id is the same as previous, returning existing state",r),s.a9(r);if(r.inFlight)return e.logger.debug("[advertiser] in flight request",r),s.a9(r);{let a;e.logger.debug("[advertiser] fetching cohorts for view",r);const c=new Promise((e=>{a=e})),u=()=>c;return(0,n.zG)((0,we.gz)(lt.Hi)(i.customCohorts,i.standardCohorts),lt.tS((e=>{let[n,s]=e;return t([i.userId,o.FS(r.ctx),n,s])})),De.YO("response"),De.ak("cohorts",(t=>{let{response:r}=t;return(0,n.zG)(r.c,zs,(0,_.bw)(R.EQ((t=>{e.logger.error(`[advertiser] failed to decode data from response. ${t}`)}),(t=>{e.logger.debug("[advertiser] decoded data from response",t)}))),lt.of)})),De.Hr("view",(e=>{let{response:t,cohorts:r}=e;return(0,n.bc)(t.ctx,r)})),s.fF,s.UI((0,n.ls)(o.EQ((function(){return{...r,inFlight:!0,eventual:(0,n.bc)((0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>Es()))),u)}}),R.EQ((function(t){e.logger.error(`[advertiser] ${t}`);const s=(0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>Es())));return a(s),{userId:i.userId,lastSuccess:r.lastSuccess,ctx:r.ctx,view:(0,n.bc)(i.viewId,o.YP),inFlight:!1,eventual:[s,u]}}),(function(e){let{response:t,view:r}=e;const[,s]=r;return a(s),(0,n.zG)({userId:i.userId,lastSuccess:o.G(r),view:(0,n.bc)(i.viewId,o.G(s)),ctx:o.G(t.ctx),inFlight:!1,eventual:(0,n.bc)(s,u)})}))))))}})))),Is=e=>De.it((t=>e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",o.G("v4")),method:"POST",payload:ks(t),contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to fetch advertiser cohorts: ${e}`)),ks=e=>JSON.stringify(e),Gs=e=>{const t=(0,n.zG)(e,j.YM,R.Yo((()=>"Expected a value, found empty array")),R.tS((e=>"string"==typeof e?R.F2(e):R.t$("Expected a cohort code, found "+typeof e)))),r=(0,n.zG)(e,j.Gb,o.fS((()=>[])),R.DT(Array.isArray,(()=>"Expected an array of groups [integer], found "+typeof e[1])));return(0,n.zG)(t,R.tS((e=>(0,n.zG)(r,R.UI((t=>({code:e,groups:t})))))))};function zs(e){const[t,r]=e;return(0,n.zG)(t,j.fw(R.g1)(Gs),R.UI((e=>({cohorts:e,groups:r}))))}const Us=B.n_({cohorts:j.Eh(B.n_({code:D.Eq,groups:j.Eh(H.Eq)})),groups:j.Eh(H.Eq)}),Es=()=>({cohorts:[],groups:[]}),xs=e=>({inFlight:!1,userId:e,lastSuccess:o.YP,view:Ps(),ctx:o.YP,eventual:Os()}),Ps=()=>["",o.YP],qs=e=>e.view[0],Cs=B.n_({userId:(0,_.Or)(),lastSuccess:{equals:(e,t)=>e===t||!!e&&!!t&&B.bc(D.Eq,Us).equals(e,t)}}),As=e=>"object"==typeof e&&null!==e&&"userId"in e&&"lastSuccess"in e&&(void 0===e.lastSuccess||Array.isArray(e.lastSuccess)&&2===e.lastSuccess.length&&"string"==typeof e.lastSuccess[0]&&null!==e.lastSuccess[1]&&"object"==typeof e.lastSuccess[1]),Ds=()=>({userId:""}),Os=()=>(0,n.bc)(Es(),(()=>Promise.resolve(Es()))),Ts=(e,t)=>{const r=(0,n.zG)(t,o.UI((e=>e.all)),o.fS((()=>Nn(Rt.cS))),On,s.UI(o.Uo));return{_pcrdbs:s.a9(o.YP),_pcrprs:r}},Ms=function(e,t){return(0,n.zG)(t,i.KD([[e=>!e.consent,i.K4((()=>qn(Es())))],bs(e,t)]),i.UI((0,n.ls)(s.xH,(r=>(0,we.gz)(jn)(r,Pn((0,n.zG)(t,s.UI((e=>{let{events:t}=e;return t})),(t=>{return(r=e.logger,e=>t=>(0,n.zG)(t,s.UI((t=>(0,n.zG)(R.Y3((()=>{const i=t().filter((t=>{let[,r]=t;return"SlotViewable"===r.name&&(0,n.zG)(o.ij(r.properties.line_item_id),o.UI((e=>e.toString())),o.UI((t=>e.has(t))),o.fS((()=>!1)))})).map((e=>{let[t,r]=e;return r.properties.line_item_id.toString()}));return i.forEach((e=>t=>e.debug("[advertiser] impression event for deal_id:",t))(r)),(e=>e.reduce(((e,t)=>({...e,[t]:1})),{}))(i)}),(e=>`Caught error when processing deal id impressions on events. Got ${e}`)),R.fS((e=>(r.error("[advertiser]",e),{})))))),s.Rp({},vs),s.D8(((e,t)=>Bt(t))),s.D8(ar(H.Eq)),s.bw((e=>r.debug("[advertiser] impressions:",e)))))(new Set(["6301116389","6301116392","6353064435","6363477062","6755217812","6759626139","6763023740"]))(t);var r}))))),Cn((e=>{let[t,r]=e;return function(e,t,r){const i=(0,n.zG)(t.groups,j.Su(((i,s)=>{const a=(0,n.zG)((0,n.zG)(t.cohorts,j.hX((e=>{let{groups:t}=e;return t.includes(i)})),j.Lx(H.Pc)((t=>(0,n.zG)(o.ij(e[t.code]),o.fS((()=>[])),j.Lx(H.Pc)((e=>(0,n.zG)(o.ij(r[e]),o.fS((()=>0))))))))));return Math.max(0,s-a)})));return{cohorts:t.cohorts,groups:i}}({brrd:["6301116389"],brrp:["6301116392"],bsjo:["6353064435"],bska:["6363477062"],byfi:["6755217812"],bykc:["6759626139","6763023740"]},t,r)})),ys(e.logger))),i.bw((t=>{(0,n.zG)(t,o.UI(ii),o.fS((()=>s.a9([]))),(t=>(0,n.zG)(t,s.UI((t=>e.logger.debug("[advertiser] cohorts available for targeting:",t))))))})))};const js=(0,n.zG)(Ms,(e=>(t,r)=>(0,n.zG)(e(t,r),i.UI((e=>({cohorts:e,externalData:Ts(t.logger,e)})))))),Rs=function(){return i.of(o.YP)};const Ls=i.K4((()=>{}));const Fs=e=>t=>(0,n.zG)(e,Ce.UI((e=>t.reduce(((t,r)=>t+Number(e.has(r))),0)))),Qs=e=>t=>(0,n.zG)(De.Y3((()=>async function(e,t){return crypto.subtle.encrypt({name:"RSA-OAEP"},t,e)}(e,t)),(e=>new Error(String(e)))),De.UI(Ns)),Ys=e=>De.Y3((()=>async function(e){const t=function(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0,n=e.length;t<n;t++)r[t]=e.charCodeAt(t);return t}(atob(e));return crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}(e)),(e=>new Error(String(e))));function Ns(e){return btoa(String.fromCharCode(...new Uint8Array(e)))}function $s(e,t){return(0,n.zG)(i.K4((()=>(0,n.zG)(t,s.VS((e=>{let{userId:t}=e;return(0,n.zG)("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCr9hacCVXLRXBpawZHZd+7u/Cvl/lyVoPxavJ2P6DWR0YW5j3gtjALyf7YXnHN6grWSTvylg7XdCPLED7yEyFa1qU8WL3SJ7T1lqL57BvK9lRzW2kitgZ+lRPMNRCjBD0mNCgfty/luM5E2YWgQx2E6NxgZFAm4GqC8m/HLTx5MQIDAQAB",De.DT((e=>""!==e),(()=>new Error("Could not find public key"))),De.tS(Ys),De.tS(Qs(Bs(t))),s.fF)}))))),i.bw((t=>(0,n.zG)(t,s.bw(o.EQ((()=>e.logger.debug("[secure-signals] No signal generated")),R.Pd((t=>e.logger.error("[secure-signals] Error generating signal",t)),(t=>e.logger.log("[secure-signals] Signal generated",t)))))))),i.UI((e=>({signalRef:(0,n.zG)(e,s.UI(o.tS(o.Uo)),s.D8(ro()))}))))}const Bs=e=>{const t=Math.floor(Date.now()/1e3);let r=new Uint8Array(1);r[0]=1;const n=new Uint8Array(4);n[0]=t>>24&255,n[1]=t>>16&255,n[2]=t>>8&255,n[3]=255&t;const i=(new TextEncoder).encode(e);return new Uint8Array([...r,...n,...i])},Hs=e=>({ageInMs:Date.now(),id:e}),Vs=e=>(e=>Array.isArray(e)&&e.length>0)(e)?e:[],Ks=(e,t)=>{const r=(0,n.zG)(e,j.zo(t),j.jj((0,B.f7)(((e,t)=>D.Eq.equals(e.id,t.id)))));return r.length>3?(0,n.zG)(r,j.DY((0,A.Zt)(((e,t)=>H.Df.compare(e.ageInMs,t.ageInMs)))),j.Gb,o.fS((()=>[]))):r},Ws=(e,t)=>j.Eh(D.Eq).equals(e.cohorts,t.cohorts)&&j.Eh(D.Eq).equals(e.userIds,t.userIds),Xs=e=>({lastSentCohorts:e.lastSentCohorts,refreshAtEpoch:e.refreshAtEpoch}),Zs=(e,t,r)=>n=>(e=>"object"==typeof e&&null!==e&&"refreshAtEpoch"in e&&"number"==typeof e.refreshAtEpoch&&"lastSentCohorts"in e&&Array.isArray(e.lastSentCohorts))(t)?(e.logger.debug("[secure-signals] rebuilding state from previous state",t,r),{cohorts:n,userIds:r,lastSentCohorts:t.lastSentCohorts,refreshAtEpoch:t.refreshAtEpoch}):(e.logger.warn("[secure-signals] previous state is undefined or not valid",t),((e,t)=>({userIds:e,cohorts:t,lastSentCohorts:[],refreshAtEpoch:0}))(r,n)),Js=e=>(0,n.zG)(e,j.oA,j.UI(ii),(e=>s.vP(...e)),s.UI(Rt.xH)),eo=e=>t=>(0,n.zG)(t,s.VS((t=>j.xb(t.cohorts)?(e.logger.debug("[secure-signals] no cohorts to send to the Ingestion API",t.userIds,t.cohorts),s.a9(t)):(e=>e.refreshAtEpoch<=Date.now()||e.cohorts.length!==e.lastSentCohorts.length||!j.Eh(D.Eq).equals(e.cohorts,e.lastSentCohorts))(t)?(e.logger.debug("[secure-signals] processing API request for the Ingestion API",t.userIds,t.cohorts),(0,n.zG)(t,(e=>t=>{let{userIds:r,cohorts:n}=t;return De.Y3((()=>e.permutiveApi.req({url:`${e.config.apiProtocol}://${e.config.secureSignalsApiHost}/data/v1/cohorts`,method:"POST",payload:{userIds:r,cohorts:n},contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>t instanceof Error&&t.message.includes("Status code was 403")?(e.logger.debug("[secure-signals] Region not supported by Ingestion API, ignoring"),{error:t}):{error:(0,cr.w)(t)}))})(e),s.fF,s.bw((e=>t=>{(0,n.zG)(t,o.UI(R.EQ((t=>e.logger.error("[secure-signals] Error from the Ingestion API",t)),(t=>e.logger.log("[secure-signals] Response from the Ingestion API",t)))))})(e)),s.UI((e=>t=>{const[r,i]=(0,n.zG)(t,o.tS(o.Uo),o.EQ((()=>[e.lastSentCohorts,e.refreshAtEpoch]),(t=>[e.cohorts,t.refreshInMs+Date.now()])));return{...e,lastSentCohorts:r,refreshAtEpoch:i}})(t)))):(e.logger.debug("[secure-signals] cohorts are not stale, skipping sending to the Ingestion API",t),s.a9(t)))));function to(e,t){return(0,n.zG)(t,(e=>t=>(0,n.zG)(i.dQ((r=>{let{previousState:i}=r;return(0,n.zG)(t,s.UI((e=>{let{userId:t}=e;return t})),s.bw((t=>e.logger.debug("[secure-signals] Processing User:",t))),s.UI((0,n.ls)(Hs,j.of)),s.Rp(Vs(i),Ks),s.bw((t=>e.logger.debug("[secure-signals] Users after state update:",t))),(e=>({value:(0,n.zG)(e,s.UI(j.UI((e=>{let{id:t}=e;return t})))),state:e})))}))))(e),i.VS((r=>i.dQ((i=>{let{previousState:o}=i;return(0,n.zG)(o,((e,t,r)=>i=>(0,n.zG)(s.vP(t,r),s.VS((t=>{let[{advertiserCohorts:r,stdAudienceCohorts:o},a]=t;return(0,n.zG)([r,o],Js,s.UI((0,n.ls)(ts,Zs(e,i,a))),s.bw((t=>e.logger.debug("[secure-signals] state update complete",i,t))))}))))(e,t,r),s.D8(Ws),eo(e),s.UI(Xs),(e=>({value:void 0,state:e})))})))))}const ro=()=>o.Eh(D.Eq),no=function(e,t){return(0,n.zG)(i.vP({signal:$s(e,t),cohortStorage:to(e,t)}),i.UI((e=>{let{signal:t}=e;return t})))};const io=e=>t=>i.dQ((r=>{const i=oo(e.performance),a=(0,n.zG)(r.previousState,o.DT((e=>"string"==typeof e))),c={key:(0,n.zG)(a,o.fS((()=>e.sessionId.current))),reporting:!1},u=(0,n.zG)(e.sessionId,s.Rp(s.a9(c),((r,a)=>(0,n.zG)(r,s.VS((r=>{if(r.reporting)return s.a9(r);if(r.key===a)return s.a9(r);return(0,n.zG)(t,lt.gw(3e4),lt.tS((e=>i(50,(()=>function*(e,t){const r=Date.now(),i={},s=20;let o=0;for(const n of e){if(n.session_id===t)continue;o++,i[n.name]??={age_ms:0,count:0,eventName:n.name,size_bytes:0};const e=i[n.name].age_ms,a=r-n.time.getTime();a>e&&(i[n.name].age_ms=a),i[n.name].size_bytes+=2*JSON.stringify(n).length,i[n.name].count+=1,o%s==0&&(yield)}const a=Object.values(i);if(0===a.length)return[];const c=(0,n.zG)(a,Rt.u4({size_bytes:0,count:0,age_ms:0},((e,t)=>({size_bytes:e.size_bytes+t.size_bytes,count:e.count+t.count,age_ms:Math.max(e.age_ms,t.age_ms)}))),(e=>({...e,eventName:"*"})));return(0,n.zG)([...a,c],Rt.UI((e=>({...e,used_size_bytes:c.size_bytes}))))}(e,a))))),lt.UI((t=>(t.forEach((t=>{e.metrics.track({name:"sdk_event_cache_age_seconds",labels:{event_count:t.count,event_name:t.eventName,size_bytes:t.size_bytes,used_size_bytes:t.used_size_bytes},value:Math.ceil(t.age_ms/1e3)})})),{key:a,reporting:!1}))),s.fF,s.UI(o.fS((()=>({...r,reporting:!0})))))}))))),s.xH);return{value:void 0,state:s.UI((e=>e.key),u)}})),so=()=>i.dQ((e=>{let{previousState:t}=e;return{value:void 0,state:s.a9(t)}}));const oo=e=>(t,r)=>async()=>{let n=e.now();const i=r();for(;;){e.now()-n>t&&(await new Promise((e=>setTimeout(e))),n=e.now());const r=i.next();if(r.done)return r.value}},ao=e=>t=>{const{consent:r,currentTimestampSecs:c,identities:u,sessionId:l,userId:f,viewId:g,pageviewState:h}=t;return(0,n.zG)(i.K4((()=>{let r;const i=new Promise((e=>{r=e})),[a,c]=s.Ue(s.a9(o.YP));return{...t,adServers:[fs(e.optimisedActivationsConfig.dfp),{id:"dfp_contextual",filterCohorts:n.yR}],nonQlCohortsT:()=>i,setNonQlCohorts:r,setTpdUsage:c,tpdUsage:s.xH(a)}})),i.ak("geoip",(()=>(e=>(0,n.zG)(e,Ki,i.YO("data"),i.Hr("replacementMap",(e=>{let{data:t}=e;return(0,n.zG)(t,s.UI(o.UI((e=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info?.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash})))))})),i.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,n.zG)(t,s.UI(o.EQ((()=>({})),(e=>({isp:e.isp_info?.isp,organization:e.isp_info?.organization,autonomous_system_number:e.isp_info?.autonomous_system_number,autonomous_system_organization:e.isp_info?.autonomous_system_organization,continent:e.geo_info?.continent,country:e.geo_info?.country,city:e.geo_info?.city,province:e.geo_info?.province,postal_code:e.geo_info?.postal_code})))))}))))({...e,sessionId:l}))),i.Hr("watson",(t=>{let{webClient:r}=t;return(0,n.zG)(e.watson,o.fS((()=>(0,n.zG)(r,s.UI(o.UI((e=>e.url))),s.D8(o.Eh(D.Eq)),(t=>(0,Zi.watson)({...e,pageUrl:t,watsonEnabled:(0,n.zG)(h,s.UI((e=>e.watsonEnabled)))}))))))})),i.ak("audienceMatching",(t=>{let{tpdUsage:r}=t;return Vi(e,{identities:u,sessionId:l,tpdUsage:r,userId:f,viewId:g})})),i.UI((e=>{let{audienceMatching:{analyticsEvents:t,...r},newEvents:i,...o}=e;return{...o,audienceMatching:r,newEvents:(0,n.zG)(s.vP(i,t),s.UI(p.RD),s.UI(p.UI(Rt.xH)))}})),i.UI((e=>{const[t,r,i]=s.Ue(o.bM()),[a,c]=(0,n.zG)(e.newEvents,s.En(2,Rt.uZ())),u=(0,n.zG)(s.vP(a,t),s.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI((e=>(0,n.zG)(t,p.UI(Rt.UI((0,_.bw)((t=>{let[,r]=t;return e(r)}))))))),o.fS((()=>p.of(Rt.bM()))))})));return{...e,newEvents:u,newEventsForAdvertiserSegmentation:c,collectTargetingSuccessMetrics:e=>{r(o.G(e)),i()}}})),i.ak("enrichedEvents",(t=>{let{enrichmentReplacementMap:r,geoip:c,newEvents:u,watson:l}=t;return(0,n.zG)(s.vP({misc:r,geoip:c.replacementMap,watson:l.replacementMap}),s.UI((0,we.Yt)(o.G5)),s.UI(o.UI((e=>{let{misc:t,geoip:r,watson:n}=e;return{...t,...r,...n}}))),(t=>i.K4((()=>((e,t,r,i)=>((0,n.zG)(t,s.UI(o.pC),s.YP((t=>{t&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"event_enrichment_ready",time_origin:"sdk_init"})}))),(0,n.zG)(r,s.VS((()=>(0,n.zG)(s.vP((0,n.zG)(t,s.UI(o.UI(Xi({dropUnenriched:!0})))),i),s.UI((0,n.ls)((e=>{let[t,r]=e;return()=>(0,n.zG)(t,o.EQ((()=>[]),(e=>(0,n.zG)(r(),Rt.UI((0,a.H5)((0,_.rO)({properties:e})))))))})))))))))(e.metrics,t,f,u)))))})),i.UI((0,_.rO)({enrichedEvents:(0,wn.F)(e.metrics,"pageview_enriched")})),i.ak("lookalikeModels",(()=>(0,n.zG)(e.lookalikeModels,o.EQ((()=>(0,yi.lookalikeModelsService)({...e,consent:r,currentTimestampSecs:c})),i.of)))),i.ak("userGroupCohorts",(()=>Rs(e,s.vP({currentTimestampSecs:c,userId:f})))),i.ak("queryLanguage",(r=>{let{audienceMatching:o,nonQlCohortsT:a,enrichedEvents:c,lookalikeModels:u,setTpdUsage:l,userIdIsNewlyGenerated:p,userGroupCohorts:d}=r;return(0,n.zG)((_={...e,...t,newEvents:c,thirdPartyData:o.data,groupId:f,groupIdIsNewlyGenerated:p,nonQlCohorts:a,lookalikeModels:u,migratedStateMaps:e.migratedStateMaps,userGroupCohorts:d},(0,n.zG)(s.vP(_.eventSourceId,_.groupId,_.groupIdIsNewlyGenerated),s.D8((0,n.zG)(D.Eq,B.Uz((e=>{let[t]=e;return t})))),i.kR((e=>{let[t,r,s]=e;return(0,n.zG)(bi({..._,eventSourceId:t,groupId:r,groupIdIsNewlyGenerated:s,migratedStateMaps:_.migratedStateMaps}),i.yi(t))})),i.UI((e=>({stateMigratedThisInitialisation:(0,n.zG)(e,s.VS((e=>e.segmentationService.stateMigratedThisInitialisation))),cohorts:(0,n.zG)(e,s.VS((e=>e.cohortsRef))),currentPageviewSegments:{all:(0,n.zG)(e,s.VS((e=>e.currentPageviewSegments)),Cn((e=>e.all))),custom:(0,n.zG)(e,s.VS((e=>e.currentPageviewSegments)),Cn((e=>e.custom))),standard:(0,n.zG)(e,s.VS((e=>e.currentPageviewSegments)),Cn((e=>e.standard)))},eventsToPublish:(0,n.zG)(e,s.VS((e=>e.eventsToPublish))),eventsToPublishOnPageUnload:(0,n.zG)(e,s.VS((e=>e.eventsToPublishOnPageUnload))),realtime:(0,n.zG)(e,s.VS((e=>e.realtime)),s.Rp(!1,((e,t)=>e||t)),s.bw((e=>{e&&_.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_realtime",time_origin:"sdk_init"},performance.now())}))),segments:{all:(0,n.zG)(e,s.VS((e=>On(e.segmentationService.segments))),s.UI((e=>e.all))),custom:(0,n.zG)(e,s.VS((e=>On(e.segmentationService.segments))),s.UI((e=>e.custom))),standard:(0,n.zG)(e,s.VS((e=>On(e.segmentationService.segments))),s.UI((e=>e.standard)))},thirdPartyDataUsage:(0,n.zG)(e,s.VS((e=>e.segmentationService.tpdUsage))),transitionsSinceInit:(0,n.zG)(e,s.VS((e=>e.segmentTransitions.transitionsSinceInit)))}))))),i.bw((e=>{let{thirdPartyDataUsage:t}=e;return l(t)})));var _})),i.ak("classificationModels",(t=>{let{queryLanguage:n}=t;return Si(e,s.vP({consent:r,currentTimestampSecs:c,queryLanguageCohorts:Tn(n.currentPageviewSegments.all),realtime:n.realtime,userId:f}))})),i.ak("advertiserSegmentation",(t=>{let{queryLanguage:n,newEventsForAdvertiserSegmentation:i}=t;return js(e,s.vP({consent:r,customCohorts:Tn(n.currentPageviewSegments.custom),realtime:n.realtime,sessionId:l,standardCohorts:Tn(n.currentPageviewSegments.standard),userId:f,viewId:g,events:i}))})),i.ak("demandPartnersAndCuration",(r=>{let{queryLanguage:a,advertiserSegmentation:c}=r;const u=Zn(Rt.jG()),l=(0,n.zG)(c.cohorts,o.UI((e=>e.all)),o.fS((()=>Nn(Rt.cS)))),f=(0,n.zG)(a.currentPageviewSegments.all,Vn);return(0,n.zG)(i.vP({demandPartners:is(e,{cohorts:f,consent:t.consent,url:(0,n.zG)(t.webClient,s.UI(o.UI((e=>e.url))))}),curation:ls(e,{activationConfigs:e.optimisedActivationsConfig.curation_platforms,cohorts:u.concat(l,f)})}),i.UI((e=>{let{demandPartners:t,curation:r}=e;return os(t,r)})))})),i.ak("ipIdentifier",(e=>{let{userId:t,geoip:r}=e;return(0,n.zG)(r.data,s.UI(o.tS(o.KQ((e=>e.ip))))),Ls})),i.ak("secureSignal",(t=>{let{advertiserSegmentation:r,demandPartnersAndCuration:o}=t;return(0,n.zG)(no(e,(0,n.zG)(f,s.UI((e=>({userId:e,advertiserCohorts:r.cohorts,stdAudienceCohorts:o.ssp}))))),i.UI((e=>{let{signalRef:t}=e;return t})))})),i.Hr("nonQlCohorts",(e=>{let{advertiserSegmentation:t,classificationModels:r,contextualCohorts:i,userGroupCohorts:s,setNonQlCohorts:o,demandPartnersAndCuration:a,viewId:c}=e;return(0,n.zG)(Ce.oA({advertiser:t.cohorts,userGroup:s,classificationModel:r,contextual:gs({contextualCohorts:i,viewId:c}),ssp:a.ssp}),(0,_.bw)(o))})),i.Hr("qlCohorts",(e=>{let{queryLanguage:t}=e;return(0,n.zG)(t.segments.all,s.UI(Rt.UI(String)))})),i.bw((t=>{return t.collectTargetingSuccessMetrics(ps({adServers:t.adServers,cohorts:{...t.nonQlCohorts,query_language:(r=t.qlCohorts,(0,n.zG)(r,Pn,ri))},logger:e.logger,metrics:e.metrics}));var r})),(0,n.ls)(i.Hr("eventsToPublish",(t=>{let{qlCohorts:r,queryLanguage:i,nonQlCohorts:o}=t;const a=(e=>{if(!e.metrics.isEnabled())return e=>{};const t=(0,n.zG)(e.cohortsByType,Ce.UI(s.Rp(new Set,((e,t)=>new Set([...e,...t])))),(e=>s.vP(e)));return r=>{"Pageview"===r.name&&(0,d.HJ)((()=>(0,n.zG)(r.cohorts,Fs(t.current),Ce.Su(((t,r)=>e.metrics.track({name:"sdk_pageview_cohort_count",labels:{cohort_type:t},value:r}))))))}})({cohortsByType:(0,n.zG)(o,Ce.UI(ii),Ce.dx("query_language",r)),metrics:e.metrics});return(0,n.zG)(i.eventsToPublish,s.UI(p.UI(Rt.UI((0,_.bw)((e=>{let[,t]=e;return a(t)}))))))})),i.ak("eventsCacheReports",(()=>(0,n.zG)(e.eventsCache,R.EQ((()=>lt.of(Rt.cS)),(e=>()=>e.all())),(e=>{if(e.metrics.isEnabled()&&o.pC(e.performance)){const t=e.performance.value;return io({...e,performance:t})}return so})({metrics:e.metrics,sessionId:t.sessionId,performance:e.performance})))),i.UI((e=>{let{adServers:t,advertiserSegmentation:r,demandPartnersAndCuration:i,eventsToPublish:o,geoip:a,queryLanguage:c,nonQlCohorts:u,watson:l,secureSignal:f}=e;return{activations:(0,n.zG)(t,Rt.UI((e=>(0,n.zG)(Object.values(u),Rt.UI(ni),Rt.DZ((t=>t.byAdServer(e))),Rt.UI(On),Rt.UI(s.D8(Rt.Eh(D.Eq))),(e=>s.vP(...e)),s.UI(Rt.xH),s.UI((t=>(0,n.bc)(e.id,t)))))),(e=>s.vP(...e)),s.UI(Ce.sq)),cohorts:{all:c.cohorts,ql:c.segments.all,qlCustom:c.segments.custom,qlStandard:c.segments.standard},context:(0,n.zG)(s.vP(l.permutiveContext,a.permutiveContext),s.UI((e=>{let[t,r]=e;return{...t,...r}}))),eventsToPublish:o,eventsToPublishOnPageUnload:c.eventsToPublishOnPageUnload,externalData:s.vP({...r.externalData,...i.externalData}),geoIP:a.data,realtime:c.realtime,stateMigratedThisInitialisation:c.stateMigratedThisInitialisation,transitionsSinceInit:c.transitionsSinceInit,secureSignal:f}}))))}},707:(e,t,r)=>{r.d(t,{BJ:()=>f,El:()=>q,G6:()=>y,HD:()=>l,HP:()=>G,Kn:()=>u,Or:()=>I,PQ:()=>w,SL:()=>d,aT:()=>h,b0:()=>v,b2:()=>_,bw:()=>E,cO:()=>S,k$:()=>m,lo:()=>x,mQ:()=>z,rO:()=>U,vg:()=>k,vp:()=>p});var n=r(340),i=r(169),s=r(507),o=r(327),a=r(229),c=r(844);const u=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,l=e=>"string"==typeof e,f=e=>"number"==typeof e&&!Number.isNaN(e);function p(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function d(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}o.ff(a.xb);function _(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}let g=[];function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(g.unshift(e),g.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!s&&e){s=!0;const e=g;g=[],e.forEach((e=>{try{e()}catch{}}))}};let s=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&b(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function m(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function v(e,t){const r=Object.keys(e),n=r.length,i={};for(let o=0;o<n;o++){const n=r[o],a=t(n,e[n]);(0,s.pC)(a)&&(i[n]=a.value)}return i}function b(e){return/Mobi|Android/i.test(e)}function y(e){return/^((?!chrome|android).)*safari/i.test(e)}function w(e,t){return new Promise((r=>{(0,c.HJ)((()=>{Promise.resolve(e()).then(r)}),t?.timeout??0)}))}function S(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const I=()=>({equals:(e,t)=>Object.is(e,t)});function k(e){return t=>null!=t&&e in t?t[e]:void 0}function G(e){let t=s.YP;const r=(0,s.fS)((()=>{const r=e();return t=(0,s.G)(r),r}));return()=>r(t)}const z=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},U=e=>t=>{const r={...t};for(const n in e)r[n]=e[n]?.(t[n]);return r};function E(e){return t=>(e(t),t)}const x=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,s.DT(r),s.UI(n))})),s.fS((()=>o(t))))},P=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}};P(parseInt),P(parseFloat);function q(e){return"object"==typeof e&&null!==e&&"_tag"in e&&["None","Some"].includes(e._tag)}},710:(e,t,r)=>{r.r(t),r.d(t,{lookalikeModelsService:()=>y,realService:()=>S,stubService:()=>w});var n=r(169),i=r(507);const s=(e,t,r,n)=>t+(r-t)*n/(Math.pow(2,e)-1),o=(e,t)=>{const r=(e,t)=>{const r=e.toString(16);return("0".repeat(t)+r).slice(Math.min(-t,-r.length))};return`${r(e.getUint32(t),8)}-${r(e.getUint16(t+4),4)}-${r(e.getUint16(t+6),4)}-${r(e.getUint16(t+8),4)}-${r(e.getUint32(t+10),8)}${r(e.getUint16(t+14),4)}`},a=e=>{const t=[1,2],r=e.getInt8(0);if(1===r)return c(e);if(2===r)return u(e);{const n=(0,i.Y3)((()=>o(e,1))),s=(0,i.g_)((()=>"Couldn\'t decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${r}; ${s}`)}},c=e=>l(e,1),u=e=>l(e,2),l=(e,t)=>{const r=o(e,1),n=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),i=e.getInt8(18),s=e.getFloat32(19),a=e.getFloat32(23),[c,u]=((e,t,r,n,i,s)=>{const o={};let a=0;do{let r;1===s?(a=e.getUint16(t),r=e.getUint16(t+2),t+=4):(a=e.getUint32(t),r=e.getUint16(t+4),t+=6),o[0===a?"const":a]=r.toString(36)}while(0!==a);return[o,t]})(e,27,0,0,0,t);return[{version:t,id:r,data_preference:n,weights:c,precision:i,min:s,max:a},u]};var f=r(6),p=r(46),d=r(844),_=r(313),g=r(683),h=r(144),m=r(919),v=r(707);const b=()=>i.G({}),y=S;function w(e){return _.K4((()=>g.a9(b())))}function S(e){e.logger.warn("add cleanup of legacy LAL cache");const t=e.trace.startSpan("lookalike_models_data_retrieval_duration");return(0,n.zG)(m.m((0,n.zG)(g.vP(e.consent,e.currentTimestampSecs),g.UI((t=>{let[r,o]=t;return{currentTimestampSecs:o,validity:{maxAge:604800,key:()=>"_"},freshness:{maxAge:86400,key:()=>"_"},refresh:(0,n.zG)(r,i.DT(Boolean),i.UI((()=>()=>f.fF(function(e){const t="Failed fetching binary models, reverting to JSON.\\nError: ",r="Failed fetching json models.\\nError: ";return(0,n.zG)(f.Y3((()=>k(e)),(e=>e.message)),d.N1,f.oU((e=>()=>function(e){const t=[];let r=0;for(;r<e.byteLength;){const[n,i]=a(new DataView(e,r));t.push(n),r+=i}return t}(e))),d.N1,f.UI(I((e=>{let{precision:t,max:r,min:n}=e;return{"1p":{},precision:t,min:n,max:r}}))),f.Vn((r=>(e.logger.log(t+r),e.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),r))),f.wp((()=>(0,n.zG)(f.Y3((()=>G(e)),(e=>e.message)),f.UI((e=>e.models)),f.UI(I((()=>({"1p":{}}))))))),f.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},r=Object.keys(e),n=e=>{const t={"1p":{}},{precision:r,min:n,max:i}=e,o=e["1p"],a=Object.keys(o);for(let e=0;e<a.length;e++){const c=a[e],u=parseInt(o[c],36);t["1p"][c]=s(r,n,i,u)}return t};for(let i=0;i<r.length;i++){const s=r[i],o=e[s];t[s]=n(o)}return t})(e):e)),f.fS((t=>(e.reportError(r+t),p.of({})))))}(e)))))}})))),_.UI(g.UI((0,n.ls)(h.fS((t=>(e.logger.warn("[LAL]",`Failed to refresh, using zero value. ${t}`),b()))),(0,v.bw)(i.UI((()=>{t.finish(),e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"lookalike_models_ready",time_origin:"sdk_init"})})))))))}function I(e){return t=>{const r={};for(let n=0;n<t.length;n++){const i=t[n],{id:s,weights:o}=i;if(void 0===s||void 0===o)continue;const a=e(i);Object.keys(o).forEach((e=>{a["1p"][e]=o[e]})),r[s]=a}return r}}const k=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))},G=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))};function z(e,t,r){const n=`${e}://${t}`;switch(r){case"binary":return`${n}/models/v2/e1cef1f0-495f-4973-ba1c-880786e73a66-models.bin`;case"json":return`${n}/models/e1cef1f0-495f-4973-ba1c-880786e73a66-models.json`}}},405:(e,t,r)=>{r.d(t,{K:()=>E,O:()=>z});let n,i;const s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap;let l={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return d(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(_(this),r),d(s.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e.apply(_(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const s=e.call(_(this),t,...n);return a.set(s,t.sort?t.sort():[t]),d(s)}}function p(e){return"function"==typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));o.set(e,t)}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,l):e);var t}function d(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(d(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=p(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const _=e=>u.get(e);const g=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],m=new Map;function v(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(m.get(t))return m.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=h.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!g.includes(r))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return n&&(s=s.index(a.shift())),(await Promise.all([s[r](...a),i&&t.done]))[0]};return m.set(t,s),s}l=(e=>({...e,get:(t,r,n)=>v(t,r)||e.get(t,r,n),has:(t,r)=>!!v(t,r)||e.has(t,r)}))(l);var b=r(654),y=r(144),w=r(169),S=r(46),I=r(6),k=r(707),G=r(844);const z="[IDB]",U=(e,t,r,n,i,s)=>(0,w.zG)((0,S.of)(e.getNamespacedStorageKey(i)),(0,S.tS)((e=>(0,I.Y3)((async()=>r.put(n,s,e)),b.w))),(0,S.UI)((0,y.g_)((e=>{throw t.error(z,`Failed to store crypto key to ${n} due to unexpected error,\\n`,e),e}),(()=>s))),(e=>e()));class E{namespace;logger;cryptoAlg;idb;mainObjectStore;keyObjectStore;keyObjectKey;cryptoKey;MAX_CONSECUTIVE_PUTS=30;puts=1;hasForcedCompaction=!1;constructor(e,t,r,n,i,s,o,a){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=i,this.keyObjectStore=s,this.keyObjectKey=o,this.cryptoKey=a,this.logDebug("Created",this.idb)}static initialise(e,t,r,n,i,s,o,a,c,u){const l=(0,k.G6)(navigator.userAgent)&&!1,f=[u,n.isAvailable(),!l].every((e=>!0===e)),p=async(t,i,s)=>(0,w.zG)(await t.get(s,e.getNamespacedStorageKey(i)),(async e=>e??n.generateKey(!1)),(async n=>U(e,r,t,o,a,await n))).catch((e=>{const t=(0,b.w)(e);throw r.error(z,"Get crypto key failed. Got\\n",t),t})),d=(e,t,r)=>t.includes(r)?(0,w.Q1)():e.createObjectStore(r),_=()=>x(i,c,{upgrade:e=>{const t=[...e.objectStoreNames];d(e,t,s),d(e,t,o)}}).then((e=>{const t=[...e.objectStoreNames];return t.includes(s)&&t.includes(o)?e:Promise.reject(new Error("Object store(s) missing."))})),g=f?(0,y.Y3)((()=>function(e){if(!(0,k.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally((0,G.GL)(e)));t=(0,G.UM)(n,100),n()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(t).then((()=>_())).catch((e=>(r.error(`Re-creating IDB database ${i} due to error`,e),P(i).then((()=>_())))))),String):(0,y.t$)("Connection not attempted. Default to localStorage");return(0,y.g_)((e=>(0,I.t$)(e)),(t=>(0,w.zG)((0,I.Y3)((()=>t.then((async e=>({db:e,cryptoKey:await p(e,a,o)})))),String),(0,I.UI)((t=>{let{db:i,cryptoKey:c}=t;return new E(e,r,n,i,s,o,a,c)})))))(g)}async put(e,t){return(0,w.zG)((async()=>(0,w.bc)(JSON.stringify(e),this.cryptoKey)),(0,S.tS)((e=>{let[t,r]=e;return(0,S.of)(this.cryptoAlg.encrypt(r,t))})),(0,S.tS)((e=>async()=>(await this.recreateIfNecessary(this.puts++),e))),(0,S.tS)((e=>(0,I.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),b.w))),(0,S.UI)((0,y.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \\n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}get(e){return(0,w.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((async e=>e?JSON.parse(await this.cryptoAlg.decrypt(this.cryptoKey,e)):null)).catch((t=>{const r=(0,b.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,w.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),P(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return x(e).then((t=>(t.close(),P(e))))}recreateIfNecessary(e){return(0,k.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.recreate():Promise.resolve()}async recreate(){const e=this.idb.name,t=this.idb.version,r=await this.idb.getAllKeys(this.mainObjectStore),n=[];for(const e of r)n.push([e,await this.idb.get(this.mainObjectStore,e)]);await this.deleteStore(),this.idb=await x(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),await Promise.all(n.map((e=>{let[t,r]=e;return this.idb.put(this.mainObjectStore,r,t)}))),await U(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(z,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(z,...t)}}const x=(0,w.ls)((function(e,t){let{blocked:r,upgrade:n,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=d(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(d(o.result),e.oldVersion,e.newVersion,d(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}),G.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,w.ls)(e.createObjectStore.bind(e),w.Q1),delete:(0,w.ls)(e.delete.bind(e),G.t_),get:(0,w.ls)(e.get.bind(e),G.t_),getAllKeys:(0,w.ls)(e.getAllKeys.bind(e),G.t_),get name(){return e.name},get objectStoreNames(){return e.objectStoreNames},put:(0,w.ls)(e.put.bind(e),G.t_),get version(){return e.version}}))))),P=(0,w.ls)((function(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),d(r).then((()=>{}))}),G.t_)},616:(e,t,r)=>{r.r(t),r.d(t,{make:()=>o});var n=r(169),i=r(405);const s=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(()=>{return e=super.put.bind(this),t=i,n=()=>!r.current,function(){return(n()?t:e)(...arguments)};var e,t,n})()}},o=(e,t,r,o,a,c,u,l,f,p,d)=>(0,n.zG)(i.K,s({logger:f,consent:p,prefix:i.O})).initialise(e,t,f,r,o,a,c,u,l,d)},45:(e,t,r)=>{r.r(t),r.d(t,{watson:()=>l});var n=r(683),i=r(169),s=r(507),o=r(144),a=r(812),c=r(229),u=r(644);const l=e=>(0,i.zG)(p(e),n.YO("data"),n.Hr("replacementMap",(e=>{let{data:t}=e;return(0,i.zG)(t,s.YO("data"),s.Hr("taxonomyLabels",(e=>{let{data:t}=e;return function(e){const t=e=>{const t=e.split("/").filter((e=>e));return t.map(((e,r)=>"/"+t.slice(0,r+1).join("/")))},r=a.xH(e.filter(Boolean).map((e=>t(e.label))));return a.jj(c.Eq)(r)}(t.taxonomy??[])})),s.UI((e=>{let{data:t,taxonomyLabels:r}=e;return{$alchemy_concepts:t.concepts??[],$alchemy_document_emotion:t.emotion?.document?.emotion??null,$alchemy_document_sentiment:t.sentiment?.document??null,$alchemy_entities:t.entities??[],$alchemy_entity_names:(0,i.zG)(t.entities??[],a.UI((e=>e.text))),$alchemy_keywords:t.keywords??[],$alchemy_taxonomy:t.taxonomy??[],$alchemy_taxonomy_labels:r,$taxonomy_labels:r}})))})),n.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,i.zG)(t,s.EQ((()=>({})),(e=>({watson:e}))))})),(e=>({permutiveContext:(0,i.zG)(e,n.UI((e=>e.permutiveContext))),replacementMap:(0,i.zG)(e,n.UI((e=>e.replacementMap)))}))),f=()=>n.a9(s.G({})),p=e=>(0,i.zG)(n.vP(e.watsonEnabled,e.pageUrl),n.UI((0,i.ls)(s.DT(u.li),s.tS(u.Yg))),n.UI(s.UI((0,i.ls)(d(e.permutiveApi,e.metrics,e.config,e.permutiveUrls,e.trace),n.p4,n.UI(s.UI(o.fS((()=>({})))))))),n.VS(s.fS(f))),d=(e,t,r,n,i)=>o=>{const a=t.startTimer("sdk_http_watson_seconds",{}),c=i.startSpan("watson_data_retrieval");return e.req({url:n.getEndpointUrl("/watson",s.G(r.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:o,classify:!0}}).then((e=>(t.stopTimer("sdk_http_watson_seconds",a),t.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"watson_data_ready",time_origin:"sdk_init"},performance.now()),c.finish(),e)))}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(844),t=__webpack_require__(683),r=__webpack_require__(169),n=__webpack_require__(313),i=__webpack_require__(507),s=__webpack_require__(812),o=__webpack_require__(707),a=__webpack_require__(6);function c(e,n){return(0,r.zG)(a.Y3((()=>e.get(n)),(e=>`Failed to read previous state from IndexedDB: ${e}.`)),a.UI((e=>e??void 0)),a.UI((i=>s=>(0,r.ls)((0,o.rO)({previousState:()=>i}),s,(s=>{let{value:a,state:c}=s;const[u,l]=t.Ue(!1),f=(0,r.zG)(c,t.Rp(-1,(e=>e+1)));return{value:(0,r.bc)(u,a),state:(0,r.zG)(t.vP(c,f),(0,o.bw)(t.YP((t=>{let[r,s]=t;if(0!==s||r!==i)switch(l(!1),typeof r){case"undefined":e.delete(n).then((()=>l(!0)));break;case"object":null===r?e.delete(n).then((()=>l(!0))):e.put(r,n).then((()=>l(!0)));break;default:e.put(r,n).then((()=>l(!0)))}}))))}})))))}function u(e){return n=>(0,r.ls)((0,o.rO)({previousState:t=>e.current?t:void 0}),n,(0,o.rO)({state:(0,r.ls)((r=>t.vP(e,r)),t.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}var l=__webpack_require__(144);class f extends Error{static errorName="NetworkRequestFailedError";name=(()=>f.errorName)();constructor(){super(f.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class p extends Error{static errorName="NetworkRequestTimeoutError";name=(()=>p.errorName)();constructor(){super(p.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}var d=__webpack_require__(614),_=function(e){return"Left"===e._tag},g=function(e){return"Right"===e._tag};function h(e){return{_tag:"Left",left:e}}function m(e){return{_tag:"Right",right:e}}function v(e,t){return{_tag:"Both",left:e,right:t}}var b=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},y=b;y(m,h,(function(e,t){return v(t,e)}));var w=m,S="These";r.yR,r.yR,d.Xl;class I{metrics;logger;constructor(e,t){this.metrics=t,this.logger=e.withPrefix("network")}req(e){return this.logger.withPrefix("request").debug(e.method,e.url,..."POST"===e.method?[{payload:e.payload}]:[]),this.reqImpl(e).then((e=>(0,r.MZ)(e))).then((t=>(this.logger.withPrefix("response").debug(e.method,e.url,{response:t}),t)),(t=>{throw this.logger.withPrefix("response").error(e.method,e.url,t),t}))}reqWithBeacon(e){let{url:t,payload:r}=e;const n=JSON.stringify(r),i=navigator?.sendBeacon?.(t,JSON.stringify(r))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!i,request:{method:"POST",url:t,content_length:n.length}}),i}reqImpl(t){const n="arraybuffer",{url:s,dataType:a,contentType:c,method:u,withCredentials:_,timeout:g}=t;return new Promise(((h,b)=>{const y=new XMLHttpRequest,w="POST"===t.method?"string"==typeof(S=t.payload)?S:JSON.stringify(S):null;var S;const I=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:u,url:s,content_length:w?.length??0},response:e});y.onload=(0,e.GL)((()=>{return(0,r.zG)(y.status,l.DT((e=>e<400),(()=>{const e="text"===y.responseType||""===y.responseType?y.responseText:"Couldn\'t access response text";return`Failed ajax request. Status code was ${y.status}. ${e}`})),l.tS((()=>"json"===a?y.responseText?l.Y3((()=>JSON.parse(y.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(y.responseText)}. Got ${e}`)):l.F2(null):"text"===a?l.F2(y.responseText):l.F2(y.response))),(0,o.bw)((0,r.ls)(i.IS,(e={content_length:"text"===y.responseType||""===y.responseType?y.responseText?.length??0:y.responseType===n?y.response.byteLength:0,response_time_ms:self.performance.now()-k,status_code:y.status},function(t){return d.Wi(t)?m(e):v(t.value,e)}),I)),l.EQ(b,h));var e})),y.onerror=(0,e.GL)((()=>{I(l.t$("network error")),b(new f)})),y.ontimeout=(0,e.GL)((()=>{I(l.t$("timeout")),b(new p)})),y.open(u,s,!0),c&&y.setRequestHeader("content-type",c),y.timeout=g||y.timeout,y.withCredentials=_||y.withCredentials,y.responseType="binary"===a?n:y.responseType;const k=self.performance.now();y.send(w)}))}trackRequestMetrics(e){if(!this.metrics?.isEnabled())return;const t=new URL(e.request.url).pathname;if(t.includes("metrics"))return;const n=r=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:t,request_content_length:e.request.content_length,...r}});var s;!0===e.is_beacon?n({is_beacon:!0,is_error:e.is_error}):(0,r.zG)((s=e.response,_(s)?d.YP:(g(s),d.G(s.right))),i.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!g(e.response),...t})),n)}}class k{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const s=this.getUrlPrefix(e),o=(0,i.g_)((()=>""),(e=>`/${e}`))(r),a=`${this.getBaseUrl()}${s}${o}${t}`;return this.makeUrlWithQueryParams(a,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}var G=__webpack_require__(405),z=__webpack_require__(945);class U{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=(()=>P())();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=x(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,r.zG)(z.gz(i.G5)(this.timeOriginForContext,this.timeOriginSdkInit),i.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,r.zG)(this.synchroniseTimeBetweenContexts(n),i.UI((e=>(e-this.sdkInitTimestamp)/1e3)),i.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class E{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const x=(e,t)=>({...e,value:e.value+t}),P=()=>(0,r.zG)(i.Y3((()=>performance.timeOrigin)),i.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var q=__webpack_require__(644);class C{sdkInitTimestamp;prefix;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.initialPrefix;this.sdkInitTimestamp=e,this.prefix=t}static initialPrefix=(()=>[D("Permutive"),self.document?D("M","#43dde2"):D("W","#FF5C00")])();get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}debug(){return console.debug.bind(self.console,`%c%s${this.prefixTemplate}`,"color: blue;",this.timeDeltaFromInit,...this.prefixContent)(...arguments)}warn(){return console.warn.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}error(){return console.error.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}withPrefix(e,t){return new C(this.sdkInitTimestamp,[...this.prefix,D(e,t)])}get prefixTemplate(){return this.prefix.map(q.li).join("")}get prefixContent(){return this.prefix.map(q.Yg).flat()}}class A{log(){}debug(){}warn(){}error(){}withPrefix(){return this}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#0469d0";const r=[`background-color: ${t}`,"color:white",`border:1px solid ${t}`,"padding: 0px 2px","margin: 0px 1px","border-radius: 2px"].join(";");return["%c%s",[r,e]]}class O{crypto=(()=>self.crypto||self.msCrypto)();ALG_NAME="AES-GCM";isAvailable(){return!!this.crypto?.subtle}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,e.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],i=t.slice(16,16+n);return this._decrypt(e,r,i).then(this.bytes2str)}_encrypt(t,r){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,e.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},t,r)),n]}_decrypt(t,r,n){return(0,e.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:r},t,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}class T{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var M=__webpack_require__(46),j=__webpack_require__(694),R=__webpack_require__(450),L=__webpack_require__(327),F=__webpack_require__(214);var Q=__webpack_require__(654),Y=__webpack_require__(573);class N{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,o.aT)(e)}debounce(t,r,n,i){let s,a,c,u=[];return l=>{i&&(c=i.concat(c??i.empty,l));const f=(0,o.b2)();u.push(f);return s?.(),s=(0,e.HJ)((()=>{a?.(),a=void 0;const e=t(c||l);u.forEach((t=>t.resolve(e))),c=i?.empty,u=[]}),r),a||(a=(0,e.HJ)((()=>{s?.(),a=void 0;const e=t(c||l);u.forEach((t=>t.resolve(e))),c=i?.empty,u=[]}),n)),f.promise}}}class $ extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const B="permutive-events-cache",H="permutive-events-for-page",V="[EVENTSCACHE]",K=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class W{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=(()=>this.makeEventsRepository(B))();eventsForPage=(()=>this.makeEventsRepository(H))();eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new N(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,n,i,s,o,c){return(0,r.zG)(c(),a.UI((r=>new W(e,t,n,i,s,o,c,r))))}constructor(e,t,n,s,a,c,u,l){this.config=e,this.logger=t,this.reportError=n,this.trace=s,this.metrics=a,this.userId=c,this.makeEventsStore=u,this.eventStore=l,this.eventsTTLInMilliseconds=(0,r.zG)((0,i.ij)(this.config.eventsTTLInDays),(0,i.tS)((e=>"number"==typeof e&&e>0?(0,i.G)(24*e*3600):i.YP))),this.eventsCache.events=(0,o.HP)((()=>(0,o.PQ)((0,r.zG)(M.tD((()=>this.trace.startSpan("load_event_cache"))),M.tS((e=>(0,r.zG)(this.loadFromDisk(),M.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),c.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,M.pE)((e=>(0,a.Y3)((()=>e.flush()),Q.w)));return(0,r.zG)([this.eventsForPage,this.eventsCache],t,(0,M.UI)((t=>{const r=s.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\\n${r.join("\\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(s.xH)}async add(e,t){let{persistOnDisk:n}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,r.zG)(this.eventsForPage.events,M.UI((t=>[...t,e])),o.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,r.zG)(this.eventsTTLInMilliseconds,i.EQ((()=>r.yR),(e=>s.hX((t=>e>Date.now()-t.time.getTime())))));return(0,r.zG)(M.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),M.YO("loadEventsCacheTask"),M.ak("eventsFromDisk",(()=>(0,r.zG)(s.nI([this.eventStore.get(B),this.eventStore.get(H)]),s.UI(a.LV((0,o.lo)([[e=>e instanceof $,(0,r.ls)(e,M.of)],t=>(0,r.zG)(M.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),M.tS((()=>()=>this.reset("historical"))),M.UI(e))]),(0,r.ls)(i.fS(e),M.of))),s.vP(M.qA)))),M.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),M.UI((0,r.ls)((0,o.vg)("eventsFromDisk"),s.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),s.UI(Y.k),t)))}async reset(e){return(0,r.zG)(M.tD((()=>this.logDebug("Resetting Events Cache"))),M.tS((()=>this.eventStore.deleteStore())),a.tS((()=>this.makeEventsStore())),a.Zl((t=>(this.eventStore=t,"historical"===e?z.gz(a.Ij)(this.eventsCache.reset,this.eventsForPage.flush):z.gz(a.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),a.wE((()=>()=>this.all())),a.fS((()=>M.of(X()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(l.F2((0,r.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,r.zG)(M.tD((()=>this.logDebug(`Writing ${e.length} events to ${_.key}`))),M.tS((()=>this.eventStore.put(e.map(Y.X),_.key))),a.UI(r.Q1)),i=(0,r.zG)(M.tD((()=>this.logDebug(`Deleting events for ${_.key}`))),M.tS((()=>this.eventStore.delete(_.key))),a.Vn(Q.w)),s=(0,r.ls)(M.of,M.At((e=>()=>this.logError(`Events cache failed to put ${_.key}. Got ${e}`))),M.tS((0,o.lo)([[e=>K(e)&&_.retryAttempts<9,()=>(0,r.zG)(M.tD((()=>{_.retryAttempts+=1,this.logDebug(`Attempt #${_.retryAttempts} to write ${_.key} to EventsStore`)})),M.tS((()=>d)),M.tS((()=>u)))],[e=>K(e),e=>(0,r.zG)(M.tD((()=>this.logDebug(`Attempted ${_.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),M.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${_.key}. Got ${e}`,userId:this.userId.current}))),M.tS((()=>a.t$(e))))],a.t$]))),c=e=>a.tD((()=>{this.logDebug(`Successfully wrote events for ${_.key} after ${_.retryAttempts} attempts`),_.retryAttempts=0,_.sizeInBytes=2*JSON.stringify(e).length,_.sizeInBytesLastSuccessfulWrite=_.sizeInBytes})),u=(0,r.zG)((()=>_.events()),M.tS((e=>(0,r.zG)(n(e),M.mU(l.EQ(s,(()=>c(e)))))))),f=(e,t)=>(0,r.zG)(e.events,M.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=M.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),p=(e,t)=>{let[n,...i]=e;return n&&0!==t?(0,r.zG)(f(n,t),M.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),p(i,e))))):M.of((0,r.Q1)())},d=(0,r.zG)(a.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),a.fX(l.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),a.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,r.zG)(p(n,t),a.fF)}))),_={key:e,events:M.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,r.zG)(M.tD((()=>this.trace.startSpan(`write_${_.key}`))),M.tS((e=>(0,r.zG)(u,M.At((()=>()=>e.finish()))))),t),reset:()=>(0,r.zG)(M.tD((()=>{_.events=M.of([]),_.sizeInBytes=0,_.sizeInBytesLastSuccessfulWrite=0})),M.tS((()=>i)),t)};return _}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(V,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(V,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(V,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(V,...t)}}const X=()=>[],Z=`permutive.${self.document?"main":"worker"}.`;class J{config;shouldUsePerformanceMark=!1;constructor(e){this.config=e,this.shouldUsePerformanceMark=(self.performance?.mark&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(t){const r=this.generateSpan(`${t}_since_init`);return r.start({startTime:e.NC}),{spanId:r.spanId,finish:r.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=J.generateUniqueMarkerNames(e);return{spanId:r,start:e=>self.performance?.mark(r,e),finish:e=>{self.performance?.mark(n,{startTime:e?.startTime??performance.now()}),self.performance?.measure?.(t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${Z}${e}`,r=`${t}${J.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}class ee{db;static version=3;static connect(t,n,i,s,o,c,u,l,f,p){return(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,616))),String),e.N1,a.tS((e=>e.make(t,n,i,s,o,c,u,ee.version,l,f,p))),a.UI((e=>new ee(Promise.resolve(e)))))}constructor(e){this.db=e}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new $(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,a.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,Q.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),(e=>{const t=(0,Q.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const te=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};class re{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>i.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=s,this.webClient=o}async reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const o=(0,Q.w)(e);if(this.logError("Reporting error:\\n",o),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const a=(0,r.zG)(this.webClient,j.UI(i.fS((()=>({domain:self.location?.hostname??"",referrer:"document"in self?self.document?.referrer:"",url:self.location?.href??"",user_agent:navigator?.userAgent??""})))),j.UI((e=>{const r={error_message:o?.message?.toString()??"",stack_trace:o?.stack?.split("\\n")},i=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.61.0",ql_runtime_version:"v14.1.0",timestamp:n,domain:e.domain,url:te(e.url),referrer:te(e.referrer),user_agent:e.user_agent,error_message:r.error_message??String(o),stack_trace:r.stack_trace,...i}}))),c=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",i.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),u=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,r.zG)([f,p],s.Ew((e=>o.name===e.errorName||o.message.indexOf(e.errorName)>=0||o.message.indexOf(e.defaultMessage)>=0)),i.g_((()=>{const e=a();return c(e).catch((0,r.ls)(Q.w,(e=>this.logError(e))))}),(async e=>u(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}var ne=__webpack_require__(987);const ie=e=>{const t=se(e.javaScriptInput),{env:r,...n}=(0,ne.N)({hash:e.hash,runtimeInput:t});return n},se=e=>{if(e&&"object"==typeof e)return e;throw new Error("Invalid runtime input specified.")},oe=("undefined"!=typeof globalThis?globalThis:void 0)?.crypto||("undefined"!=typeof global?global:void 0)?.crypto||("undefined"!=typeof window?window:void 0)?.crypto||("undefined"!=typeof self?self:void 0)?.crypto||("undefined"!=typeof frames?frames:void 0)?.[0]?.crypto;let ae;ae=oe?e=>{const t=[];for(let r=0;r<e;r+=4)t.push(oe.getRandomValues(new Uint32Array(1))[0]);return new ue(t,e)}:e=>{const t=[],r=e=>{let t=e,r=987654321;const n=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;let e=(r<<16)+t&n;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let n,i=0;i<e;i+=4){const e=r(4294967296*(n||Math.random()));n=987654071*e(),t.push(4294967296*e()|0)}return new ue(t,e)};class ce{static create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class ue extends ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=(()=>ae)();toString(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:le).stringify(this)}concat(e){const t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<i;e+=1){const i=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=i<<24-(n+e)%4*8}else for(let e=0;e<i;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=i,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const le={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new ue(r,t/2)}},fe={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new ue(r,t)}},pe={stringify(e){try{return decodeURIComponent(escape(fe.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>fe.parse(unescape(encodeURIComponent(e)))};class de extends ce{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ue,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=pe.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:r,blockSize:n}=this,i=r.words,s=r.sigBytes;let o=s/(4*n);o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0);const a=o*n,c=Math.min(4*a,s);if(a){for(let e=0;e<a;e+=n)this._doProcessBlock(i,e);t=i.splice(0,a),r.sigBytes-=c}return new ue(t,c)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class _e extends de{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new ce,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new ge(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class ge extends ce{constructor(e,t){super();const r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=pe.parse(n));const i=r.blockSize,s=4*i;n.sigBytes>s&&(n=r.finalize(t)),n.clamp();const o=n.clone();this._oKey=o;const a=n.clone();this._iKey=a;const c=o.words,u=a.words;for(let e=0;e<i;e+=1)c[e]^=1549556828,u[e]^=909522486;o.sigBytes=s,a.sigBytes=s,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}}const he=[];class me extends _e{_doReset(){this._hash=new ue([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],i=r[1],s=r[2],o=r[3],a=r[4];for(let r=0;r<80;r+=1){if(r<16)he[r]=0|e[t+r];else{const e=he[r-3]^he[r-8]^he[r-14]^he[r-16];he[r]=e<<1|e>>>31}let c=(n<<5|n>>>27)+a+he[r];c+=r<20?1518500249+(i&s|~i&o):r<40?1859775393+(i^s^o):r<60?(i&s|i&o|s&o)-1894007588:(i^s^o)-899497514,a=o,o=s,s=i<<30|i>>>2,i=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const ve=_e._createHelper(me),be=(_e._createHmacHelper(me),{stringify(e){const{words:t,sigBytes:r}=e,n=this._map;e.clamp();const i=[];for(let e=0;e<r;e+=3){const s=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)i.push(n.charAt(s>>>6*(3-t)&63))}const s=n.charAt(64);if(s)for(;i.length%4;)i.push(s);return i.join("")},parse(e){let t=e.length;const r=this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<r.length;e+=1)n[r.charCodeAt(e)]=e}const i=r.charAt(64);if(i){const r=e.indexOf(i);-1!==r&&(t=r)}return((e,t,r)=>{const n=[];let i=0;for(let s=0;s<t;s+=1)if(s%4){const t=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=t<<24-i%4*8,i+=1}return ue.create(n,i)})(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});const ye=function(e){let t=i.YP;const r=i.fS((()=>{const r=e();return t=i.G(r),r}));return()=>r(t)}((()=>({metadata:{107958:"0c8b70cdb7",114948:"f880a602f4",114954:"700000bf49",114956:"a9c5f5f06b",114957:"83953313c0",114962:"09d737f93f",114963:"00b1a33f5e",114964:"f882684943",114965:"ffb95cabdc",115051:"b566ab8df0",115052:"e2eccd637c",115053:"fe6704b1d0",115054:"2075b68f58",115055:"ecffb3cc54",115056:"88e4ec3b8c",115063:"710eb9239d",115064:"79a37ebd7c",115077:"a251b65c93",115078:"a068aa64ab",115203:"1cf5f2b985",115204:"47a2a4e8ac",115205:"379a6b935d",115206:"3b349c7ee1",115375:"1834024086",115376:"beb72361cd",115377:"9729c70f50",115378:"5d48dd928f",115379:"bf28e787e5",115380:"21c98cd7df",115385:"7402d22e4f",115386:"659379dfad",115389:"711f0dba88",115390:"3c4a290c43",115391:"5889b24523",115392:"0adcefd0d9",115393:"638322c762",115394:"55279ec362",115395:"d8ea31ebee",115396:"3e905378a2",115397:"4b03ca0b78",115398:"2318340a4a",121182:"ebadc5f848",121184:"d1bfddf441",121186:"23eb798b1a",121187:"ccceb16e0f",121188:"463549c048",121189:"c956472146",121190:"8fb8b346d1",121191:"e67b592a70",121192:"24e428ebe4",121194:"81e181549e",121196:"77abad5da7",121197:"39f7b91e6a",121198:"1171df6f47",121199:"d53b054433",122797:"455b3609e8",122798:"bff73acfe2",127892:"cec976edd8",128001:"0340d8513b",128002:"cf38265eea",128003:"9304ef1578",128004:"31da693c74",128006:"62cbfce6cf",128007:"e411765088",128008:"aee7d70570",128009:"f651193b5f",128010:"044527cd5b",128011:"2a499ab15f",128012:"eaaf63707e",128013:"2a6ae6319d",128014:"6fa1ac12a6",128015:"aaea0c4c9b",128016:"af2cd4f993",128017:"ad613b2d3a",128018:"f30c5db789",128488:"138a8ad0e4",128489:"504cfaf1e3",128631:"b4104b642f",128632:"17303187fa",128633:"aabcabc710",129507:"552632f344",129517:"cbc900269d",129538:"2830f560a4",129541:"21c8e5539b",130215:"e6d0ddbd7b",130216:"43df72f71f",130217:"258232bd5b",130218:"93880fc7cc",130219:"2d493322a3",130220:"0824202b62",130221:"ea66a78597",130222:"3a69cfdf33",130223:"399d4e1955",130225:"2c31ae2081",130226:"27e2ce19b3",130227:"e6326bb4c1",130228:"4e74c0d9dd",130230:"4c94272e1f",130682:"e9d4e577bc",130683:"b722cee081",130684:"8aa4b7c937",130685:"fa1876df0a",130686:"31ee25ab20",130687:"c80ae54269",130688:"2c295789f2",130689:"9d5b378c93",130690:"b5c7a929fb",130691:"9e77b361c8",130692:"805184b290",130693:"94a0466187",130694:"ed68adb26a",131557:"305e412be0",131558:"0949c42e44",131559:"231edbed1c",132127:"5e436d92a5",134583:"b8add16cd4",134584:"e835153e1f",136100:"364c6fbdf7",137184:"3f0238326a",137185:"4810b38066",137193:"d745353411",137194:"2697dfd1c4",137195:"4746370866",139765:"f7f0ba18e8",139766:"97da240512",139767:"9363a593a8",141800:"038f6c4fbe",147435:"7a198951ea",147436:"21d98a3c85",147437:"5c90c9fc29",147672:"db7323a5c6",147708:"5b2d27269f",147709:"ab0f00d435",147710:"399e4e2311",147711:"a4a16ceccb",147712:"2791a82da6",148309:"2a7c327c11",148310:"0b50e1fad2",148311:"c8cd462a05",148312:"9c5426ced6",148313:"8115af6fbf",148422:"5295ed8a98",148423:"6aaa36c6c2",148424:"437402ea40",148425:"cc820eae1a",148563:"51758905c7",148564:"6b64d02127",148565:"e4c3f7670c",148566:"0b8e59fbce",148567:"f6e5fd53ac",148860:"621b4b7425",148864:"10a3924dd8",148972:"67e5027c4e",148973:"d2d6246e23",148975:"81561fe821",148976:"045db6d135",148977:"afb991f3c1",148978:"3566cd2c4a",148979:"52a4fa3781",148980:"c3a2618ea9",148981:"4019bcd93a",151166:"c89c579631",153458:"ddec0c0283",153484:"e528e82c4e",153485:"0b219bc795",153486:"0db0c1a5ba",153499:"c672c0a900",153500:"b9e64565e8",153501:"d0e3fae2ff",153502:"ea903e6fea",153504:"7eb783a7cf",153505:"6f4569e0fa",153506:"99d4954031",153905:"3a5a75c738",155015:"7d172926ec",155141:"2bd716e223",155142:"e4ab69e0d7",155496:"ee3f811479",155497:"15689187a2",155857:"18ab0f4a74",158768:"d2f6018013",158772:"e9e289b83e",165230:"b9feb1f7b0",166706:"47c1006b26",172118:"99b3cc21bf",174010:"045066d39a",174011:"cc278be4c7",174012:"ac67846a91",175948:"03330717ef",177390:"9e08606576",179312:"82691f9444",179313:"656ca05cf3",179314:"7a61a29f78",179315:"9c4145d01f",179316:"c82ad952c0",179317:"7536f76ac3",179320:"3ed485bdc3",179322:"f4cdfa600e",179323:"7ab9d5a5bd",181454:"be4bf2de73",183713:"73766a4b6a",183714:"b020a2f11c",183723:"0b296f3d1e",183909:"edfa9f1077",183931:"1a380417bc",183935:"d2f664deef",185385:"bcd5b3ed12",185734:"1bee54e3a0",185735:"a2d549268f",185736:"d8c2bc9afa",185737:"39c2c0282e",185738:"e6e7bfb079",185739:"c8f0a47856",185740:"f9efefa103",185741:"a2e161db2c",185742:"b880e89518",185743:"adc0c7109d",185744:"11613eb656",185745:"acfe0f03f3",185746:"4ca056cd87",185747:"08d24db45d",185748:"e856f10e69",185749:"af1f4de212",185750:"7e8d3b8e11",185751:"d62ebb8da4",185752:"34a7a311f6",185753:"f6f53a2494",185754:"105a66ad8d",185755:"caa4dcc81d",185756:"9712215526",185757:"df2a629103",185758:"9b4460666e",185759:"b70891bf3e",185760:"80727f443b",185761:"9fa0f33f25",185762:"0a0a3c6784",185763:"0f4229310f",185764:"cb7b8a103c",185765:"d7ad40a9c3",185766:"78f22d13ee",185767:"15efb47022",185784:"20779ccc45",185785:"02fd3111b2",185786:"55612f9411",185787:"15b737305c",185788:"1b6f014134",185789:"80b8250288",185790:"db9836d4aa",185791:"60ba9720cb",185792:"219b1a8605",185793:"034b7cc21c",185794:"82139de2ea",187163:"81857ec9b7",187343:"fba7dfd5d9",187787:"b64d1fd9f4",187995:"e2a8469bf0",188028:"9431dd70c6",188129:"a090c1f8ab",188130:"29cf33e127",188131:"d3ee5115f4",188132:"ec62228849",192190:"f9fdbaa236",193038:"9730ba826b",193393:"f64499bc65",193394:"493e1a2d16",193435:"76855d96dd",194009:"b803e29baf",194011:"5a5db1788a",194385:"6ad7b989d8",195815:"90276d1b75",197117:"98e6948fcf",213221:"9f2b49dc8a",239440:"1b5bd46775",239961:"2e27a8111c",239975:"c7021e2509",240097:"37cc4cfbce",240543:"0b69ea133c",240900:"c393b9679e",240953:"aed1e851a9",241455:"8fe91b9ce7",242474:"c95bb4418c",252176:"0dd16457fa",252185:"aff15ca9e5",253398:"82184c2629",253400:"aff45808ab",253406:"41e789999b",253408:"02be0b0978",253420:"d2b71a2029",253421:"13320319ec",253481:"1229e08e2b",253491:"6414f11357",253492:"2bbe6942b5",253642:"2d82072768",253778:"5441984784",253779:"b64170fc08",253794:"97bacb5d09",253795:"2c6ae7ca4b",253796:"8d4121d7c7",253797:"cc70e206d1",253798:"5e414343e0",254301:"5a7be86800",254305:"ca943c74ef",254308:"0bacc0f6b2",254313:"25b5860e07",254314:"65b40bf5ba",254315:"5c3fb9e25e",254316:"f926c2451c",254319:"24bf94a831",1e7:"11c975d76e",10000001:"b50d886098",10000002:"669634872b",10000003:"12d834dd50",10000004:"eea69f6b3b",10000005:"ebe292d8b6",10000006:"81b26ba127",10000007:"cea60ef9e0",10000008:"91aa2055b2",10000010:"7ee9b26adf",10000011:"d241094fdd",10000012:"a44a8eab5c",10000013:"6e4d12ddb5",10000014:"11757b88ba",10000015:"945ed0a170",10000016:"32e441bdeb",10000017:"d218bdacd2",10000018:"58becb7493",10000019:"1aa1bbb29d",10000020:"d0a8fd9652",10000021:"21514fb47e",10000022:"32a7d59500",10000023:"aebc4d2a9d",10000024:"d56c9050ba",10000025:"730dc045ea",10000026:"1e4d6b70c4",10000035:"307c11f72f",10000036:"6ff7f4b3fc",10000037:"fced62a41e",10000038:"27b00d7382",10000039:"11f9ba5de1",10000040:"d9bbed78fd",10000041:"ea8a453c55",10000042:"e749840796",10000043:"c82d1737c1",10000044:"24b7e42429",10000045:"d0cad77633",10000046:"5973aa854f",10000047:"584a8b96b4",10000048:"4ec5310347",10000049:"50a3fe4097",10000050:"0a23f838eb",10000051:"11bf7e3970",10000052:"ccf828d45f",10000053:"b21fbc41bc",10000054:"c5c1eb51f2",10000055:"5e65cebb81",10000056:"19eb777327",10000057:"0faf6d25ec",10000058:"b17cffa5ce",10000059:"1c9e56d780",10000060:"ce5bd11fe7",10000061:"0e63c9bc0f",10000062:"3b776bae75",10000063:"f97beb318f",10000064:"eb0a668371",10000065:"79a2595e43",10000066:"d502c18c55",10000067:"96110e718b",10000068:"fb7cfe71a6",10000069:"75113b6f05",10000070:"3f7de466b0",10000071:"2a6f06847b",10000072:"bb57c68153",10000073:"53d334a73a",10000074:"c5a96c7bea",10000075:"eade4d8a41",10000076:"9398dc5856",10000077:"5241636ad5",10000078:"2809553348",10000079:"758ca7e6d0",10000080:"ed88eb23c3",10000081:"882ede3f1e",10000082:"f441d474f9",10000083:"afb35bfdba",10000084:"cbc3ab14a3",10000085:"aa634388d5",10000086:"2c67cb7344",10000087:"e25c79f4be",10000088:"f292eea329",10000089:"fbfa6daf07",10000090:"68c6f128b5",10000324:"ad3868300f",10000325:"02c28e8877",10000327:"89d277605e",10000328:"352b1ec645",10000329:"a300370f5c",10000330:"8c88804594",10000687:"f7a7638665",10000688:"dd6d9d26cf",10000689:"4224169f0a",10000690:"a5755fc2f7",10000691:"26a77b0cbe",10000692:"1fe66e3c20",10000693:"e76168b4c5",10000694:"1713162d40",10000695:"2387afa064",10000696:"5bc9c044fd",10000697:"c0228e6179",10000698:"32a7fef483",10000699:"4cf535803c",10000700:"afbc74dfa0",10000701:"e523baf3d0",10000702:"0775017dc5",10000703:"bfdf3e1d4c",10000704:"bec1212f4d",10000705:"6137f6a7c1",10000706:"1e2ea12169",10000707:"eeb0f6228f",10000708:"5ab9703878",10000709:"20fad72e21",10000710:"0f514d5741",10000711:"eba7c94341",10000712:"a9a1d35baa",10000713:"882b83de8d",10000714:"3b70532969",10000715:"16f9be4863",10000716:"24e30a7671",10000717:"1d8f4fd1a4",10000718:"65d58a5062",10000719:"1699ef8445",10000720:"f76fb433d5",10000721:"678ab5cd40",10000722:"85044e9260",10000723:"81daba6e42",10000724:"af24df1baf",10000725:"99459141ce",10000726:"127f3667cb",10000727:"d1419bdd3c",10000728:"794286afce",10000729:"e0060afbd7",10000730:"3997010595",10000731:"214e74bd4d",10000732:"20b93ba9e4",10000733:"442d46338f",10000734:"52c4e5a8cc",10000735:"f1a55fc056",10000736:"71b0f76eb8",10000737:"6d4ccb9344",10000738:"a4c602bb4a",10000739:"e6d3396627",10000740:"1a57c60ff9",10000741:"768405a84a",10000742:"caa0b19636",10000743:"f9c6b8a08e",10000744:"7d0d909ef1",10000745:"58d239c0a4",10000746:"09ee3ad0a9",10000747:"da902d9427",10000748:"0f919c2850",10000749:"719fb46b47",10000750:"8c079158b5",10000751:"d1ef146292",10000752:"22207d1058",10000753:"8b1548b1a1",10000754:"8af5f7a884",10000755:"a8eb503756",10000756:"cf7ec6836a",10000757:"e8a14d646e",10000758:"4fc4376e7f",10000759:"b387ef2298",10000760:"2b7c1cfdcf",10000761:"e3d729caa8",10000762:"cc5913f888",10000763:"8ee10fe1d6",10000764:"13b563c7ca",10000765:"b7390a7f76",10000766:"f6b4d875d0",10000767:"e21a82c0aa",10000768:"6d696d3233",10000769:"0ea96ce452",10000770:"4e7fb168f5",10000771:"982f94f160",10000772:"977bd11740",10000773:"0215a29f51",10000774:"a75b74e775",10000775:"e948144098",10000776:"d471328a28",10000777:"29cfc3dd82",10000778:"eba1625606",10000779:"564a426ef9",10000780:"c0ec545ea8",10000781:"ada089f800",10000782:"85b8faa9f0",10000783:"42594b6228",10000784:"b7af9c0fab",10000785:"6c8167a54e",10000786:"368644729b",10000787:"3f53151409",10000788:"ebf406df5b",10000789:"b38ea19992",10000790:"c29391a64c",10000791:"8e7992ae19",10000792:"5af49fb54c",10000793:"b8406b2588",10000794:"e09caffae2",10000795:"ffb675958a",10000796:"d72a2ca0ad",10000797:"8355efd392",10000798:"6b1e96da04",10000799:"a1024f3665",10000800:"88f054825a",10000801:"bef23f23bd",10000802:"65b69fc8fb",10000803:"1f970f1d4a"},runtime:ie({hash:function(e){return ve(e).toString(be).slice(0,8)},javaScriptInput:{ahoCorasickLookup:e=>[],eventSegments:e=>({"!UpdateLookalikeModels":["148422","148423","148424","148425","148563","148564","148565","148566","148567","148972","148973","148975","148976","148977","148978","148979","148980","148981","153458","153484","153485","153486","153905","155857","187995","188028","193435","194009","194011","197117","213221","239440","241455","253778","253779","253794","253795","253796","253797","253798","254314","254315","254316","254319"],"!UpdateThirdPartyData":["121182","121184","121186","121187","121188","121189","121190","121191","121192","121194","121196","121197","121198","121199","129507","129517","129538","129541","130225","130230","130685","130686","134583","134584","141800","147435","147436","147437","147672","155015","158768","158772","181454","185385","185784","185785","185786","185787","185788","185789","185790","185791","185792","185793","185794","187787","188129","188132","192190","193038","193393","195815","239961","240097","252176"],Audio_Start:["175948","179323","183909","185734","185735","185736","185737","185738","185739","185740","185741","185742","185743","185744","185745","185746","185747","185748","185749","185750","185751","185752","185753","185754","185755","185756","185757","185758","185759","185760","185761","185762","185763","185764","185765","185766","185767","253421","253642","254308"],LinkClick:["187163"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000055","10000056","10000057","10000058","10000059","10000060","10000061","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000089","10000090","10000324","10000325","10000327","10000328","10000329","10000330","10000687","10000688","10000689","10000690","10000691","10000692","10000693","10000694","10000695","10000696","10000697","10000698","10000699","10000700","10000701","10000702","10000703","10000704","10000705","10000706","10000707","10000708","10000709","10000710","10000711","10000712","10000713","10000714","10000715","10000716","10000717","10000718","10000719","10000720","10000721","10000722","10000723","10000724","10000725","10000726","10000727","10000728","10000729","10000730","10000731","10000732","10000733","10000734","10000735","10000736","10000737","10000738","10000739","10000740","10000741","10000742","10000743","10000744","10000745","10000746","10000747","10000748","10000749","10000750","10000751","10000752","10000753","10000754","10000755","10000756","10000757","10000758","10000759","10000760","10000761","10000762","10000763","10000764","10000765","10000766","10000767","10000768","10000769","10000770","10000771","10000772","10000773","10000774","10000775","10000776","10000777","10000778","10000779","10000780","10000781","10000782","10000783","10000784","10000785","10000786","10000787","10000788","10000789","10000790","10000791","10000792","10000793","10000794","10000795","10000796","10000797","10000798","10000799","10000800","10000801","10000802","10000803","107958","114948","114954","114956","114957","114962","114963","114964","114965","115051","115052","115053","115054","115055","115056","115063","115064","115077","115078","115203","115204","115205","115206","115375","115376","115377","115378","115379","115380","115385","115386","115389","115390","115391","115392","115393","115394","115395","115396","115397","115398","122797","122798","127892","128001","128002","128003","128004","128006","128007","128008","128009","128010","128011","128012","128013","128014","128015","128016","128017","128018","128631","128632","128633","130215","130216","130217","130218","130219","130220","130221","130222","130223","130226","130227","130228","130682","130683","130684","130687","130688","130689","130690","130691","130692","130693","130694","131557","131558","131559","132127","136100","137193","137194","137195","139765","139766","139767","148309","148310","148311","148312","148313","155141","155142","155496","155497","172118","183909","194385","240543","240900","240953","253406","253421","253642"],PageviewComplete:["148860","148864","153499","153500","153501","153502","153504","153505","153506","183909","253400"],PageviewEngagement:["148860","148864","153499","153500","153501","153502","153504","153505","153506","183713","183714","183723","183909","253400"],Purchase:["166706"],SegmentEntry:["253398","253400","253406","253408","253420","253421","253481","253491","253492","253642","254301","254305","254313"],SegmentExit:["253398","253400","253406","253408","253420","253421","253481","253491","253492","253642","254301","254305","254313"],SlotClicked:["128488","128489","147708","147709","147710","147711","147712","151166","165230","174010","174011","174012","177390","179312","179313","179314","179315","179316","179317","179320","179322","183909","183931","183935","187343","193394","239975","242474","252185","253406"],SlotViewable:["137184","137185","188130","188131","252185"]}),eventsLookup:e=>["Pageview","Audio_Start","SlotClicked","PageviewEngagement","PageviewComplete","SlotViewable","LinkClick","Purchase"],interpretOnlyQueries:e=>({}),literalsLookup:e=>e.frontDecode("/art and entertainment/books and literature\\t43\\t/poetry\\t23\\tcomics and animation\\t23\\tdance\\t23\\tmovies and tv\\t36\\t/animated\\t37\\tchildren\'s\\t38\\tomedies\\t37\\tdocumentaries\\t37\\treality\\t38\\tomantic comedies\\t37\\ttelevision\\t24\\tusic/music genres/classical music\\t42\\topera\\t42\\tpop music\\t42\\tsoundtracks\\t23\\tshows and events/classical concert\\t23\\ttheatre\\t2\\tutomotive and vehicles/cars/luxury\\t25\\tmotorcycles\\t1\\tbusiness and industrial\\t24\\t/fashion industry\\t1\\teducation/adult education\\t11\\tlanguage learning\\t1\\tfamily and parenting\\t2\\tinance/accounting and auditing/tax preparation and planning\\t9\\tfinancial news\\t2\\tood and drink/dining out\\t16\\tfood/fruits and vegetables\\t21\\tsalads\\t16\\thealthy eating\\t16\\tvegan\\t19\\tetarian\\t1\\thealth and fitness\\t2\\tobbies and interests/arts and crafts/photography\\t23\\tbirdwatching\\t3\\tme and garden/gardening and landscaping\\t17\\thome improvement and repair\\t1\\tpets/birds\\t6\\tlarge animals\\t1\\tsociety/crime\\t9\\tdating\\t2\\tports/diving\\t8\\thorse racing\\t13\\ts\\t8\\tolympics/paralympic games\\t8\\tskiing\\t8\\tvolleyball/beach volleyball\\t2\\ttyle and fashion/beauty/cosmetics\\t1\\ttechnology and computing/consumer electronics/tv and video equipment\\t\\t1\\t1\\t10\\t2\\t5\\t2\\t9\\t1\\t22\\t1\\t32\\t1\\t47\\t1\\t50\\t3\\t0s\\t2\\t6\\t2\\t9\\t1\\t60\\t3\\t0s\\t1\\t700s\\t2\\t4\\t2\\t6\\t2\\t8\\t1\\t80\\t3\\t0s\\t2\\t4\\t2\\t6\\t1\\t900s\\t\\t201\\t1\\t10\\t2\\t6\\t1\\t21\\t2\\t3\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t9\\t1\\t33\\t1\\t43\\t2\\t8\\t1\\t59\\t1\\t74\\t2\\t5\\t1\\t82\\t2\\t6\\t\\t301\\t1\\t24\\t1\\t31\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t8\\t2\\t9\\t1\\t50\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t60\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t9\\t1\\t70\\t2\\t2\\t2\\t3\\t2\\t7\\t2\\t8\\t1\\t80\\t2\\t2\\t2\\t3\\t2\\t6\\t2\\t9\\t1\\t90\\t2\\t1\\t\\t400\\t2\\t4\\t2\\t7\\t1\\t2\\t1\\t3\\t2\\t2\\t1\\t47\\t1\\t53\\t1\\t64\\t2\\t7\\t1\\t73\\t1\\t8\\t2\\t3\\t1\\t96\\t2\\t9\\t\\t50\\t2\\t0\\t1\\t11\\t2\\t4\\t2\\t8\\t1\\t2\\t2\\t6\\t1\\t42\\t1\\t52\\t1\\t96\\t2\\t7\\t\\t628\\t1\\t40\\t2\\t4\\t1\\t50\\t2\\t3\\t1\\t77\\t1\\t80\\t2\\t2\\t2\\t9\\t1\\t94\\t2\\t5\\t\\t72\\t\\t80\\t1\\t6\\t\\t92\\t1\\t4\\t1\\t6\\t1\\t7\\t1\\t9\\t\\tAI\\t1\\tnimal\\t1\\trchaeology\\t\\tBird\\t1\\tullseye with Jesse Thorn\\t\\tCamping\\t2\\tr\\t3\\t Talk\\t1\\tonsider This from NPR\\t1\\trime fiction\\t\\tEarth\\t1\\tcology\\t\\tFiction\\t2\\tlm\\t1\\tood\\t\\tHiking\\t2\\tstorical fiction\\t6\\ty\\t1\\tome Improvement\\t5\\tinsurance\\t2\\tuse\\t\\tIraq War\\t\\tLake\\t2\\tw\\t1\\tife Kit\\t\\tMountain\\t\\tNational park\\t3\\tural environment\\t5\\te\\t1\\tew Deal\\t1\\tovel\\t\\tOcean\\t\\tPop Culture Happy Hour\\t1\\troperty tax\\t\\tREAL ID\\t1\\tainforest\\t1\\tesearch\\t1\\tiver\\t\\tScience\\t1\\thort Wave\\t6\\tstory\\t1\\tlavery\\t1\\tpeculative fiction\\t1\\tun\\t3\\tlight\\t\\tTED Radio Hour\\t1\\television\\t2\\tsla\\t1\\trail\\t2\\topics\\t\\tUp First\\t\\tWilderness\\t1\\torld War\\t\\taccounting\\t1\\tfghanistan\\t1\\tgriculture\\t3\\tonomist\\t1\\ti assistant\\t1\\tlbania\\t2\\tgeria\\t3\\torithm\\t1\\tmazon\\t6\\t prime video\\t2\\terican art\\t1\\tndorra\\t3\\troid\\t2\\tgola\\t2\\tthropic\\t7\\tologist\\t3\\tigua\\t1\\tpple\\t5\\t tv\\t1\\trgentina\\t2\\tmenia\\t2\\ttificial intelligence\\t4\\tst\\t1\\tstronomer\\t1\\tthletic\\t1\\tustralia\\t5\\tia\\t1\\tzerbaijan\\t\\tbahamas\\t3\\train\\t2\\tngladesh\\t2\\trbados\\t1\\telarus\\t3\\tgium\\t3\\tize\\t2\\tnin\\t1\\tiden\\t2\\tll of rights\\t2\\tography\\t3\\tlogist\\t2\\tsexual\\t1\\tolivia\\t2\\tok\\t2\\trder patrol\\t2\\tsnia\\t2\\ttanist\\t3\\tswana\\t1\\trazil\\t2\\tunei\\t1\\tulgaria\\t2\\trkina faso\\t3\\tma\\t3\\tundi\\t2\\tsiness\\t1\\tytedance\\t\\tcabo verde\\t2\\tmbodia\\t3\\teroon\\t2\\tnada\\t2\\tyman islands\\t1\\tentral african republic\\t4\\tury\\t1\\thad\\t3\\ttgpt\\t2\\temist\\t2\\tile\\t3\\tna\\t1\\titizenship\\t2\\tvil war\\t1\\tlimate\\t3\\tnton\\t1\\told case\\t5\\twar\\t3\\tombia\\t4\\tnial\\t2\\tmoros\\t3\\tputer\\t2\\tngo\\t3\\tservation\\t2\\tok islands\\t2\\tsta rica\\t2\\tte d\'ivoire\\t1\\trime junkie\\t2\\toatia\\t2\\typto\\t1\\tuba\\t1\\tyber\\t2\\tprus\\t1\\tzechia\\t\\td.h.s\\t1\\tata\\t4\\tbase\\t3\\teline\\t1\\tecade\\t2\\tepmind\\t2\\tforestation\\t2\\tmocrat\\t2\\tnmark\\t2\\tportation\\t1\\ths\\t1\\tisney\\t2\\ty\\t1\\tjibouti\\t1\\toge\\t2\\tminica\\t1\\trag\\t3\\twing\\t\\tecologist\\t3\\tnom\\t3\\tsystem\\t2\\tuador\\t1\\tducation\\t1\\tgypt\\t1\\tisenhower\\t1\\tl salvador\\t1\\tpidemiologist\\t1\\tritrea\\t1\\tspn\\t2\\ttonia\\t2\\twatini\\t1\\tthiopia\\t1\\txercise\\t\\tfacebook\\t1\\tederal reserve system\\t1\\tiction\\t2\\tji\\t2\\tnance\\t3\\tland\\t1\\tlood\\t1\\tood\\t2\\trest\\t1\\trance\\t\\tgabon\\t2\\tmbia\\t2\\ty\\t1\\tender identity\\t6\\tfluid\\t3\\teticist\\t2\\tographer\\t3\\tlogist\\t3\\trgia\\t2\\trmany\\t1\\thana\\t1\\toogle\\t2\\tp\\t1\\treece\\t3\\tnada\\t1\\tuatemala\\t2\\tinea\\t2\\tyana\\t\\thaiti\\t1\\tbo\\t1\\tealth\\t6\\t care\\t2\\trzegovina\\t1\\tgtv\\t1\\tigh school\\t2\\tstorian\\t6\\ty\\t1\\tolocaust\\t2\\tme buyer\\t5\\tdepot\\t5\\tinsurance\\t5\\towner\\t5\\tprice\\t4\\tland security\\t4\\towner\\t2\\tnduras\\t2\\tusing market\\t8\\tprice\\t8\\tshortage\\t1\\tulu\\t2\\tngary\\t\\tiab_2.0\\t1\\tceland\\t1\\tmmigration\\t1\\tndia\\t3\\tonesia\\t2\\tstagram\\t2\\tterest rate\\t5\\tnet\\t1\\tran\\t3\\tq\\t2\\teland\\t1\\tsrael\\t1\\ttaly\\t\\tjamaica\\t2\\tpan\\t1\\tordan\\t\\tkazakhstan\\t1\\tenya\\t1\\tiribati\\t1\\torea\\t2\\tsovo\\t1\\tuwait\\t1\\tyrgyzstan\\t\\tlaos\\t2\\ttvia\\t1\\tebanon\\t2\\tsbian\\t3\\totho\\t1\\tgbt\\t4\\tq\\t1\\tiberia\\t3\\tya\\t2\\techtenstein\\t2\\tfe kit\\t4\\tkit\\t2\\tthuania\\t1\\toan\\t2\\twe\\t1\\tuxembourg\\t1\\tyndon johnson\\t\\tmacedonia\\t2\\tdagascar\\t2\\tha\\t2\\tlawi\\t4\\tysia\\t3\\tdives\\t3\\ti\\t3\\tta\\t2\\trriage equality\\t3\\tshall islands\\t3\\ttin luther king jr\\t2\\turitania\\t6\\tius\\t2\\ty day\\t1\\tedicine\\t2\\tmoir\\t4\\trial day\\t2\\tta\\t3\\teorologist\\t2\\txico\\t1\\ticronesia\\t5\\tsoft\\t2\\tddle east\\t2\\tgrant\\t1\\todern art\\t2\\tldova\\t2\\tnaco\\t3\\tgolia\\t3\\ttenegro\\t2\\trocco\\t2\\tzambique\\t1\\turder\\t2\\tseum of art\\t\\tnamibia\\t2\\tto\\t3\\ture\\t2\\turu\\t1\\tejm ai\\t2\\tpal\\t2\\ttflix\\t3\\therlands\\t2\\tw zealand\\t1\\ticaragua\\t2\\tger\\t2\\tue\\t1\\tonbinary\\t2\\trway\\t2\\tvel\\t5\\tist\\t1\\tutrition\\t\\tobama\\t1\\tceanographer\\t1\\tman\\t1\\tpenai\\t3\\tra\\t\\tpainting\\t2\\tkistan\\t2\\tlau\\t3\\teontologist\\t4\\tstine\\t2\\tnama\\t2\\traguay\\t4\\tmount\\t1\\teacock\\t2\\tru\\t1\\thillipines\\t2\\totographer\\t10\\ty\\t5\\tville\\t2\\tysical medicine\\t9\\ttherapy\\t6\\tist\\t1\\toland\\t3\\ticy\\t2\\trtugal\\t1\\tremier league\\t2\\tide\\t2\\tonouns\\t\\tqueer\\t\\trainbow flag\\t4\\tforest\\t1\\tefugee\\t2\\tpublican\\t2\\tstaurant\\t1\\tussia\\t1\\twanda\\t\\tsaint kitts\\t6\\tlucia\\t2\\tme-sex marriage\\t3\\toa\\t2\\tn marino\\t2\\to tome\\t2\\tudi arabia\\t1\\tcience\\t5\\ttist\\t2\\tulpture\\t1\\teismologist\\t2\\tnegal\\t2\\trbia\\t3\\tial killer\\t2\\tychelles\\t1\\tierra leone\\t2\\tngapore\\t1\\tlovakia\\t4\\tenia\\t1\\tocial media\\t7\\tnetwork\\t2\\tftware\\t2\\tlomon islands\\t2\\tuth africa\\t1\\tpain\\t2\\tort\\t1\\tri lanka\\t1\\ttate department\\t1\\tudan\\t2\\tpreme court\\t2\\triname\\t1\\tweden\\t2\\titzerland\\t1\\tyria\\t\\ttajikistan\\t2\\tnzania\\t2\\triff\\t2\\tx\\t1\\tech\\t2\\td bundy\\t4\\tradio hour\\t1\\thailand\\t2\\te arts\\t3\\tatre\\t2\\troughline\\t1\\tiktok\\t2\\tmor-leste\\t1\\togo\\t2\\tnga\\t1\\trail\\t3\\tns\\t2\\tinidad and tobago\\t2\\tue crime\\t3\\tmp\\t1\\tunisia\\t2\\trkey\\t4\\tmenistan\\t2\\tvalu\\t\\tuganda\\t1\\tkraine\\t1\\tltramarathon\\t1\\tnited arab emirates\\t7\\tkingdom\\t3\\tversity\\t1\\truguay\\t1\\tzbekistan\\t\\tvanuatu\\t2\\ttican\\t1\\tenezuala\\t1\\tietnam\\t7\\t war\\t2\\tsual arts\\t\\twarner bro\\t1\\thite house\\t1\\tildfire\\t1\\torld war\\t\\tyemen\\t\\tzambia\\t1\\timbabwe\\t1\\toologist"),propertiesLookup:e=>[["value"],["taxonomy"],["classifications_watson","taxonomy_labels"],["media","program"],["advertiser_id"],["client","title"],["content","parents"],["aggregations","PageviewEngagement","engaged_time"],["line_item_id"],["client","type"],["client","url"],["client","user_agent"],["user","loginStatus"]],queries:e=>({1e7:e.r(45,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"137"),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,137),e.y_(1,400)),"/education/graduate school",1,2,"/science",1,1,1),10000001:e.r(36,"/automotive and vehicles",e.y_(0,50)),10000002:e.r(46,2,102),10000003:e.r(38,20,"/finance",["properties","contextual","classifications","categories"],e.y_(0,149),e.y_(1,400)),10000004:e.r(38,"/careers",22,["properties","contextual","classifications","categories"],e.e_(0,"123"),e.y_(1,400)),10000005:e.r(37,"/education",75),10000006:e.r(45,e.pc_(2,"/society/social institution/marriage"),e.ref(83),24,1,2,41,1,1,1),10000007:e.r(44,1,3,12,13,16,17,"/art and entertainment/visual art and design/art museums and galleries","/art and entertainment/visual art and design/arts education","/art and entertainment/visual art and design/performance art","/art and entertainment/visual art and design/restoration","/art and entertainment/visual art and design/sculpture","/education/art history",34,e.y_(0,72)),10000008:e.r(45,e.pc_(2,"/food and drink/food and grocery retailers"),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,73),e.y_(1,400)),"/business and industrial/food industry",1,2,"/food and drink",1,1,1),10000010:e.r(38,30,33,["properties","contextual","classifications","categories"],e.y_(0,76),e.y_(1,400)),10000011:e.r(36,"/hobbies and interests",e.e_(0,"239")),10000012:e.r(37,"/home and garden",20),10000013:e.r(38,"/art and entertainment/movies",4,["properties","contextual","classifications","categories"],e.y_(0,90),e.y_(1,400)),10000014:e.r(36,"/art and entertainment/music",e.y_(0,92)),10000015:e.r(42,"/business and industrial/business news",26,"/law, govt and politics","/news",40,"/sports/sports news","/technology and computing/tech news","379"),10000016:e.r(45,e.pc_(2,"/finance/personal finance"),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,128),e.y_(1,400)),"/finance/bank",1,2,26,1,1,1),10000017:e.r(36,"/pets",e.e_(0,"422")),10000018:e.r(40,"/art and entertainment/celebrity fan and gossip",9,11,14,134),10000019:e.r(36,"/real estate",e.e_(0,"441")),10000020:e.r(36,"/shopping",e.y_(0,139)),10000021:e.r(38,33,"/sports",["properties","contextual","classifications","categories"],e.y_(0,141),e.y_(1,400)),10000022:e.r(38,21,"/style and fashion",["properties","contextual","classifications","categories"],e.y_(0,152),e.y_(1,400)),10000023:e.r(45,e.pc_(2,"/technology and computing"),e.ref(77),"/business and industrial/automation",1,2,"/science/computer science",1,1,1),10000024:e.r(40,"/art and entertainment/movies and tv/movies/reviews",11,4,49,156),10000025:e.r(36,"/travel",e.y_(0,159)),10000026:e.r(38,"/hobbies and interests/games/video and computer games","/technology and computing/consumer electronics/game systems and consoles",["properties","contextual","classifications","categories"],e.y_(0,161),e.y_(1,400)),10000035:e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,"/science/engineering"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/science/physics"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"105"),e.y_(1,400)),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(77),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"471"),e.y_(1,400)),e.ge(1),1),2592e6)])),10000036:e.r(36,"/automotive and vehicles/buying and selling cars",e.e_(0,"30")),10000037:e.r(36,"/automotive and vehicles/motor shows",e.e_(0,"36")),10000038:e.r(38,"/automotive and vehicles/cars/hybrid","/automotive and vehicles/electric vehicles",["properties","contextual","classifications","categories"],e.e_(0,"22"),e.y_(1,400)),10000039:e.r(36,19,e.e_(0,"27")),10000040:e.r(36,"/automotive and vehicles/cars/performance vehicles",e.e_(0,"24")),10000041:e.r(38,2,"/art and entertainment/comics and animation/comics",["properties","contextual","classifications","categories"],e.e_(0,"46"),e.y_(1,400)),10000042:e.r(36,"/business and industrial/business operations",e.e_(0,"53")),10000043:e.r(36,41,e.e_(0,"188")),10000044:e.r(36,24,e.e_(0,"192")),10000045:e.r(36,3,e.e_(0,"203")),10000046:e.r(36,"/art and entertainment/visual art and design",e.e_(0,"204")),10000047:e.r(36,"/food and drink/beverages/alcoholic beverages",e.e_(0,"211")),10000048:e.r(36,"/food and drink/barbecues and grilling",e.e_(0,"215")),10000049:e.r(38,"/food and drink/desserts and baking","/food and drink/food and grocery retailers/bakeries",["properties","contextual","classifications","categories"],e.e_(0,"217"),e.y_(1,400)),10000050:e.r(38,27,"/food and drink/food/fast food",["properties","contextual","classifications","categories"],e.e_(0,"218"),e.y_(1,400)),10000051:e.r(36,"/food and drink/food allergies",e.e_(0,"219")),10000052:e.r(40,28,29,"/food and drink/health and lowfat cooking",30,75),10000053:e.r(36,32,e.e_(0,"213")),10000054:e.r(38,"/health and fitness/exercise","/health and fitness/sports medicine",["properties","contextual","classifications","categories"],e.y_(0,77),e.y_(1,400)),10000055:e.r(36,"/health and fitness/men\'s health",e.e_(0,"228")),10000056:e.r(36,"/health and fitness/nutrition",e.y_(0,80)),10000057:e.r(36,"/health and fitness/women\'s health",e.e_(0,"238")),10000058:e.r(49,e.e_(0,"284")),10000059:e.r(36,"/art and entertainment/movies and tv/action",e.e_(0,"325")),10000060:e.r(36,5,e.e_(0,"329")),10000061:e.r(36,6,e.e_(0,"334")),10000062:e.r(36,"/art and entertainment/movies and tv/horror",e.e_(0,"336")),10000063:e.r(36,40,e.y_(0,122)),10000064:e.r(38,"/law, govt and politics/law enforcement","/law, govt and politics/legal issues",["properties","contextual","classifications","categories"],e.y_(0,124),e.y_(1,400)),10000065:e.r(36,"/news/national news",e.e_(0,"385")),10000066:e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,"/law, govt and politics/government"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/law, govt and politics/politics"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(42),e.ge(1),1),2592e6)])),10000067:e.r(36,"/science/weather",e.y_(0,127)),10000068:e.r(36,38,e.e_(0,"423")),10000069:e.r(36,"/pets/cats",e.e_(0,"424")),10000070:e.r(36,"/pets/dogs",e.e_(0,"425")),10000071:e.r(36,39,e.e_(0,"427")),10000072:e.r(36,"/pets/reptiles",e.e_(0,"429")),10000073:e.r(36,"/sports/football",e.e_(0,"484")),10000074:e.r(36,"/sports/baseball",e.e_(0,"545")),10000075:e.r(36,"/sports/basketball",e.e_(0,"547")),10000076:e.r(36,"/sports/bodybuilding",e.e_(0,"549")),10000077:e.r(36,"/sports/bowling",e.e_(0,"550")),10000078:e.r(36,"/sports/boxing",e.e_(0,"485")),10000079:e.r(36,"/sports/bicycling",e.e_(0,"492")),10000080:e.r(36,"/sports/fishing",e.y_(0,146)),10000081:e.r(36,"/sports/golf",e.e_(0,"512")),10000082:e.r(36,"/sports/hunting and shooting",e.y_(0,147)),10000083:e.r(36,"/sports/rugby",e.e_(0,"527")),10000084:e.r(36,46,e.e_(0,"531")),10000085:e.r(36,"/sports/tennis",e.e_(0,"539")),10000086:e.r(36,"/sports/walking",e.y_(0,151)),10000087:e.r(39,"/business and industrial/tanning","/style and fashion/beauty",48,"/style and fashion/beauty/cosmetology and beauty professionals","553"),10000088:e.r(38,"/style and fashion/beauty/tattoos","/style and fashion/body art",["properties","contextual","classifications","categories"],e.e_(0,"574"),e.y_(1,400)),10000089:e.r(36,"/style and fashion/men\'s fashion",e.e_(0,"579")),10000090:e.r(36,"/technology and computing/consumer electronics",e.e_(0,"632")),10000324:e.r(36,20,e.e_(0,"90")),10000325:e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,"/business and industrial/company/annual report"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/business and industrial/company/bankruptcy"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/business and industrial/company/earnings"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/business and industrial/company/joint venture"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/business and industrial/company/merger and acquisition"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.y_(0,167),e.y_(1,400)),e.ge(1),1),2592e6)])),10000327:e.r(36,"/finance/personal finance/debt management",e.e_(0,"405")),10000328:e.r(36,"/finance/personal finance/insurance",e.e_(0,"398")),10000329:e.r(45,e.pc_(2,25),e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"415"),e.y_(1,400)),"/finance/accounting and auditing/billing and invoicing",1,2,"/finance/accounting and auditing/bookkeeping",1,1,1),10000330:e.r(36,"/finance/investing",e.e_(0,"410")),10000687:e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,"/science/social science"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(42),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(75),e.ge(1),1),2592e6)])),10000688:e.r(37,23,79),10000689:e.r(38,19,"/automotive and vehicles/scooters and mopeds",["properties","contextual","classifications","categories"],e.e_(0,"29"),e.y_(1,400)),10000690:e.r(43,"/automotive and vehicles/vehicle brands/fiat","/automotive and vehicles/vehicle brands/ford","/automotive and vehicles/vehicle brands/honda","/automotive and vehicles/vehicle brands/hyundai","/automotive and vehicles/vehicle brands/nissan","/automotive and vehicles/vehicle brands/peugeot","/automotive and vehicles/vehicle brands/subaru","/automotive and vehicles/vehicle brands/suzuki",e.e_(0,"17")),10000691:e.r(44,18,"/automotive and vehicles/vehicle brands/audi","/automotive and vehicles/vehicle brands/bentley","/automotive and vehicles/vehicle brands/ferrari","/automotive and vehicles/vehicle brands/lamborghini","/automotive and vehicles/vehicle brands/land rover","/automotive and vehicles/vehicle brands/maserati","/automotive and vehicles/vehicle brands/mercedes-benz","/automotive and vehicles/vehicle brands/porsche","/automotive and vehicles/vehicle brands/rolls-royce","/automotive and vehicles/vehicle brands/toyota","/automotive and vehicles/vehicle brands/volkswagen","/automotive and vehicles/vehicle brands/volvo",e.e_(0,"23")),10000692:e.r(36,"/automotive and vehicles/cars/coupe",e.e_(0,"9")),10000693:e.r(38,"/automotive and vehicles/auto parts","/automotive and vehicles/auto repair",["properties","contextual","classifications","categories"],e.e_(0,"32"),e.y_(1,400)),10000694:e.r(36,"/automotive and vehicles/cars",e.e_(0,"25")),10000695:e.r(36,"/automotive and vehicles/cars/sedan",e.e_(0,"4")),10000696:e.r(36,"/art and entertainment/books and literature/children\'s books",e.e_(0,"45")),10000697:e.r(36,1,e.e_(0,"49")),10000698:e.r(38,"/careers/career advice","/careers/resume writing and advice",["properties","contextual","classifications","categories"],e.e_(0,"125"),e.y_(1,400)),10000699:e.r(36,"/careers/telecommuting",e.e_(0,"130")),10000700:e.r(36,"/careers/career planning",e.e_(0,"126")),10000701:e.r(38,"/careers/job fairs","/careers/job search",["properties","contextual","classifications","categories"],e.e_(0,"128"),e.y_(1,400)),10000702:e.r(36,22,e.e_(0,"133")),10000703:e.r(36,"/education/distance learning",e.e_(0,"148")),10000704:e.r(36,"/education/special education",e.e_(0,"136")),10000705:e.r(46,23,79),10000706:e.r(45,e.pc_(2,"/education/teaching and classroom resources/school supplies"),e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"146"),e.y_(1,400)),"/education/homework and study tips",1,2,"/education/teaching and classroom resources/lesson plans",1,1,1),10000707:e.r(36,34,e.e_(0,"206")),10000708:e.r(36,17,e.e_(0,"209")),10000709:e.r(36,13,e.e_(0,"208")),10000710:e.r(39,30,31,32,"/pets/animal welfare","212"),10000711:e.r(36,"/food and drink/beverages/non alcoholic beverages",e.e_(0,"222")),10000712:e.r(45,e.pc_(2,32),e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"220"),e.y_(1,400)),"/food and drink/kosher food",1,2,31,1,1,1),10000713:e.r(36,"/food and drink/cuisines",e.e_(0,"214")),10000714:e.r(43,"/food and drink/food/condiments and dressings","/food and drink/food/frozen food",28,"/food and drink/food/grains and pasta","/food and drink/food/herbs and spices",29,"/food and drink/food/snack foods","/food and drink/gastronomy/slow food",e.y_(0,74)),10000715:e.r(36,"/health and fitness/aging",e.e_(0,"230")),10000716:e.r(36,"/health and fitness/weight loss",e.e_(0,"231")),10000717:e.r(36,"/hobbies and interests/arts and crafts",e.y_(0,83)),10000718:e.r(38,"/hobbies and interests/collecting","/hobbies and interests/collecting/stamps and coins",["properties","contextual","classifications","categories"],e.e_(0,"261"),e.y_(1,400)),10000719:e.r(36,"/hobbies and interests/games/board games and puzzles",e.e_(0,"269")),10000720:e.r(36,"/hobbies and interests/magic and illusion",e.e_(0,"241")),10000721:e.r(36,"/art and entertainment/music/musical instruments",e.y_(0,82)),10000722:e.r(38,35,38,["properties","contextual","classifications","categories"],e.y_(0,84),e.y_(1,400)),10000723:e.r(38,"/art and entertainment/radio","/technology and computing/consumer electronics/radios",["properties","contextual","classifications","categories"],e.e_(0,"245"),e.y_(1,400)),10000724:e.r(38,"/art and entertainment/books and literature/fan fiction","/art and entertainment/books and literature/science fiction",["properties","contextual","classifications","categories"],e.e_(0,"246"),e.y_(1,400)),10000725:e.r(36,"/home and garden/appliances",e.e_(0,"277")),10000726:e.r(36,37,e.e_(0,"280")),10000727:e.r(12,e.tw(e.cb(0,e.pc_(2,"/art and entertainment/visual art and design/design/interior design"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/art and entertainment/visual art and design/drawing"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/art and entertainment/visual art and design/painting"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/hobbies and interests/arts and crafts/woodworking"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,37),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/home and garden/remodeling and construction"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"276"),e.y_(1,400)),e.ge(1),1),2592e6)),10000728:e.r(49,e.y_(0,86)),10000729:e.r(41,"/home and garden/bed and bath/bathroom","/home and garden/bed and bath/bedroom","/home and garden/home furnishings","/home and garden/home furnishings/lamps and lighting","/home and garden/interior decorating","283"),10000730:e.r(36,"/art and entertainment/movies and tv/independent",e.e_(0,"328")),10000731:e.r(36,8,e.e_(0,"332")),10000732:e.r(36,"/art and entertainment/movies and tv/dramas",e.e_(0,"333")),10000733:e.r(36,10,e.e_(0,"326")),10000734:e.r(47,10,"330"),10000735:e.r(48,116),10000736:e.r(48,121),10000737:e.r(36,"/art and entertainment/music/music genres/jazz",e.y_(0,109)),10000738:e.r(36,12,e.y_(0,98)),10000739:e.r(36,"/art and entertainment/music/music genres/blues",e.y_(0,112)),10000740:e.r(36,"/art and entertainment/music/music genres/country music",e.y_(0,102)),10000741:e.r(36,"/art and entertainment/music/music genres/hip hop",e.y_(0,107)),10000742:e.r(36,14,e.y_(0,93)),10000743:e.r(38,"/art and entertainment/music/music genres/electronic music",14,["properties","contextual","classifications","categories"],e.y_(0,103),e.y_(1,400)),10000744:e.r(45,e.pc_(2,16),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,99),e.y_(1,400)),12,1,2,13,1,1,1),10000745:e.r(36,"/news/local news",e.e_(0,"384")),10000746:e.r(36,"/news/international news",e.y_(0,123)),10000747:e.r(36,"/finance/personal finance/financial planning/retirement and pension",e.e_(0,"416")),10000748:e.r(38,25,"/finance/personal finance/financial planning",["properties","contextual","classifications","categories"],e.e_(0,"396"),e.y_(1,400)),10000749:e.r(50,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"497"),e.y_(1,400))),10000750:e.r(36,"/pets/aquariums",e.e_(0,"426")),10000751:e.r(47,10,"440"),10000752:e.r(36,"/real estate/architects",e.e_(0,"445")),10000753:e.r(36,"/real estate/apartments",e.e_(0,"442")),10000754:e.r(39,"/business and industrial/agriculture and forestry","/business and industrial/agriculture and forestry/organic farming",35,39,"449"),10000755:e.r(36,"/real estate/buying and selling homes",e.e_(0,"451")),10000756:e.r(36,47,e.e_(0,"548")),10000757:e.r(36,"/sports/water polo",e.e_(0,"543")),10000758:e.r(36,"/sports/table tennis and ping-pong",e.e_(0,"538")),10000759:e.r(36,"/sports/softball",e.e_(0,"535")),10000760:e.r(38,"/sports/volleyball",47,["properties","contextual","classifications","categories"],e.e_(0,"541"),e.y_(1,400)),10000761:e.r(36,45,e.e_(0,"494")),10000762:e.r(36,"/sports/rowing",e.y_(0,150)),10000763:e.r(36,"/sports/badminton",e.e_(0,"534")),10000764:e.r(36,"/sports/sailing",e.e_(0,"530")),10000765:e.r(50,e.pc_(2,"/sports/polo")),10000766:e.r(36,"/sports/skating/figure skating",e.e_(0,"510")),10000767:e.r(36,"/sports/cheerleading",e.e_(0,"486")),10000768:e.r(36,"/sports/auto racing",e.y_(0,148)),10000769:e.r(36,"/sports/weightlifting",e.e_(0,"544")),10000770:e.r(36,"/sports/gymnastics",e.e_(0,"513")),10000771:e.r(36,"/sports/swimming",e.e_(0,"537")),10000772:e.r(36,"/sports/running and jogging",e.e_(0,"540")),10000773:e.r(38,"/sports/hockey","/sports/hockey/field hockey",["properties","contextual","classifications","categories"],e.e_(0,"509"),e.y_(1,400)),10000774:e.r(36,42,e.e_(0,"495")),10000775:e.r(10,[e.tw(e.cb(0,e.pc_(2,"/sports/bicycling/mountain biking"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/canoeing and kayaking"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/climbing"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,42),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/go kart"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/parachuting"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/scuba diving"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/skating"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,46),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/skiing/waterskiing"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/snowboarding"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,"/sports/surfing and bodyboarding"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"498"),e.y_(1,400)),e.ge(1),1),2592e6)]),10000776:e.r(36,"/sports/wrestling",e.e_(0,"546")),10000777:e.r(38,"/sports/olympics",45,["properties","contextual","classifications","categories"],e.e_(0,"521"),e.y_(1,400)),10000778:e.r(36,"/sports/martial arts",e.e_(0,"520")),10000779:e.r(36,"/sports/cricket",e.e_(0,"491")),10000780:e.r(36,"/sports/soccer",e.e_(0,"533")),10000781:e.r(42,"/art and entertainment/shows and events",18,21,27,"/home and garden/luxury homes","/style and fashion/fashion designers","/style and fashion/luxury goods","576"),10000782:e.r(36,"/style and fashion/beauty/hair care",e.e_(0,"590")),10000783:e.r(45,e.pc_(2,"/style and fashion/jewelry"),e.af_u(["properties","contextual","classifications","categories"],e.e_(0,"555"),e.y_(1,400)),"/style and fashion/accessories",1,2,48,1,1,1),10000784:e.r(36,"/style and fashion/clothing",e.e_(0,"566")),10000785:e.r(36,"/business and industrial/automation/robotics",e.e_(0,"638")),10000786:e.r(37,"/science/computer science/artificial intelligence",68),10000787:e.r(38,8,49,["properties","contextual","classifications","categories"],e.e_(0,"648"),e.y_(1,400)),10000788:e.r(38,9,49,["properties","contextual","classifications","categories"],e.e_(0,"651"),e.y_(1,400)),10000789:e.r(47,49,"646"),10000790:e.r(38,4,49,["properties","contextual","classifications","categories"],e.e_(0,"647"),e.y_(1,400)),10000791:e.r(38,5,49,["properties","contextual","classifications","categories"],e.e_(0,"641"),e.y_(1,400)),10000792:e.r(38,6,49,["properties","contextual","classifications","categories"],e.e_(0,"645"),e.y_(1,400)),10000793:e.r(36,"/travel/tourist destinations/seaside resort",e.e_(0,"673")),10000794:e.r(36,"/travel/tourist destinations/africa",e.e_(0,"656")),10000795:e.r(36,"/travel/tourist facilities/camping",e.y_(0,160)),10000796:e.r(36,"/travel/tourist destinations/south america",e.e_(0,"662")),10000797:e.r(36,"/travel/transports/road travel/road accident",e.e_(0,"670")),10000798:e.r(36,"/travel/tourist destinations/japan",e.e_(0,"657")),10000799:e.r(36,"/travel/tourist destinations/australia and new zealand",e.e_(0,"658")),10000800:e.r(41,"/travel/tourist destinations/eastern europe","/travel/tourist destinations/europe","/travel/tourist destinations/france","/travel/tourist destinations/greece","/travel/tourist destinations/italy","659"),10000801:e.r(36,"/travel/specialty travel/adventure travel",e.e_(0,"665")),10000802:e.r(36,"/travel/business travel",e.e_(0,"676")),10000803:e.r(36,"/travel/traveling with kids",e.e_(0,"666")),107958:e.r(8,0,1,1),114948:e.q(e.ocqs([e.vq(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,127),e.y_(0,170),e.y_(0,87),e.y_(0,138),e.y_(0,51)]),e.y_(1,400)),e.ge(1),1)),e.vq(e.cb(0,e.ref(21),e.ge(1),1)),e.vq(e.cb(0,e.ref(54),e.ge(1),1))])),114954:e.r(34,2,2,2,2,2,2,54,21,127,138,87,170),114956:e.q(e.vq(e.cb(0,e.o([e.ref(95),e.af_u(["properties","contextual","classifications","concepts"],e.s_(0,"Business"))]),e.ge(1),1))),114957:e.r(57,0,2,2,16),114962:e.r(77,60,1),114963:e.q(e.tw(e.cb(0,e.a([e.ref(60),e.ref(1)]),e.ge(2),2),6048e5)),114964:e.r(73,83),114965:e.r(57,0,2,2,83),115051:e.r(73,78),115052:e.r(57,0,2,2,78),115053:e.r(73,30),115054:e.r(57,0,2,2,30),115055:e.r(76,47,93,165,80,77),115056:e.r(57,0,2,2,3),115063:e.r(75,72,29,[e.y_(0,163),e.y_(0,162),e.y_(0,157),e.y_(0,78),e.y_(0,117),e.y_(0,65),e.y_(0,141)],1,400),115064:e.r(63,2,2,117,141,78,65),115077:e.r(73,4),115078:e.r(61,2,2,82,50,64,125),115203:e.r(74,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,159),e.y_(0,144),e.y_(0,130)]),e.y_(1,400)),e.ref(14)),115204:e.r(59,2,2,130,144,159),115205:e.r(73,100),115206:e.r(57,0,2,2,100),115375:e.r(73,94),115376:e.r(57,0,2,2,94),115377:e.r(73,59),115378:e.r(57,0,2,2,59),115379:e.r(77,70,40),115380:e.r(57,0,2,2,53),115385:e.r(73,92),115386:e.r(57,0,2,2,92),115389:e.r(72,[e.y_(0,161),e.y_(0,159),e.y_(0,156),e.y_(0,155),e.y_(0,152),e.y_(0,139),e.y_(0,136),e.y_(0,134),e.y_(0,132),e.y_(0,92),e.y_(0,90),e.y_(0,72),e.y_(0,70),e.y_(0,57)]),115390:e.r(57,0,2,2,6),115391:e.r(75,86,76,[e.y_(0,152),e.y_(0,133),e.y_(0,83),e.y_(0,72)],1,400),115392:e.r(57,0,2,2,58),115393:e.r(72,[e.y_(0,158),e.y_(0,121),e.y_(0,120),e.y_(0,116),e.y_(0,115),e.y_(0,114),e.y_(0,113),e.y_(0,112),e.y_(0,111),e.y_(0,110),e.y_(0,109),e.y_(0,108),e.y_(0,107),e.y_(0,106),e.y_(0,105),e.y_(0,104),e.y_(0,103),e.y_(0,102),e.y_(0,101),e.y_(0,100),e.y_(0,99),e.y_(0,98),e.y_(0,97),e.y_(0,96),e.y_(0,95),e.y_(0,93),e.y_(0,69),e.y_(0,82),e.y_(0,59)]),115394:e.r(58,2,2,69,82),115395:e.r(73,88),115396:e.r(57,0,2,2,88),115397:e.r(73,23),115398:e.r(57,0,2,2,23),121182:e.r(26,"6672","121182","1823","121182","1000458566","121182"),121184:e.q(e.ocqs([e.itp("eyeota","293",!1,"121184"),e.itp("eyeota","227",!1,"121184"),e.itp("liveramp_killi","1006833061",!1,"121184"),e.itp("liveramp_Experian","1004999699",!1,"121184"),e.itp("liveramp_Experian","1004999709",!1,"121184"),e.itp("liveramp_Experian","1004999719",!1,"121184"),e.itp("liveramp_Experian","1004999729",!1,"121184"),e.itp("liveramp_Acxiom","1838",!1,"121184")])),121186:e.r(27,"32002","121186","eyeota","35430","121186","liveramp_Epsilon","1000458576","121186"),121187:e.r(26,"35431","121187","32003","121187","1003071356","121187"),121188:e.r(30,"1000458596","121188","eyeota","6677","121188","32004","121188"),121189:e.r(26,"35433","121189","32005","121189","1003071406","121189"),121190:e.r(21,"eyeota","35434",!1,"121190","liveramp_Acxiom","10786",!1,"121190","liveramp_Epsilon","1000458616",!1,"121190","liveramp_Epsilon","1003071386",!1,"121190"),121191:e.r(24,"6681","121191","liveramp_Epsilon","1003069936","121191","liveramp_Acxiom","10901","121191"),121192:e.r(26,"35435","121192","10797","121192","1003069926","121192"),121194:e.r(10,[e.itp("liveramp_Epsilon","1000458676",!1,"121194"),e.itp("liveramp_Epsilon","1000458646",!1,"121194"),e.itp("liveramp_Epsilon","1000458766",!1,"121194"),e.itp("liveramp_Epsilon","1000458666",!1,"121194"),e.itp("liveramp_Epsilon","1000458656",!1,"121194"),e.itp("liveramp_Epsilon","1000458686",!1,"121194"),e.itp("liveramp_Epsilon","1000458696",!1,"121194"),e.itp("liveramp_Experian","1004602249",!1,"121194"),e.itp("liveramp_Experian","1004602239",!1,"121194"),e.itp("liveramp_Experian","1005797971",!1,"121194"),e.itp("liveramp_Acxiom","1932",!1,"121194"),e.itp("liveramp_Acxiom","1931",!1,"121194"),e.itp("liveramp_Acxiom","1930",!1,"121194"),e.itp("liveramp_Acxiom","1929",!1,"121194"),e.itp("liveramp_Acxiom","1928",!1,"121194"),e.itp("liveramp_Acxiom","1927",!1,"121194"),e.itp("liveramp_Acxiom","1926",!1,"121194")]),121196:e.r(23,"liveramp_Experian","1004602269","121196","liveramp_Epsilon","1000458716","121196","800885412","121196","1000458706","121196","1004602259","121196","800885411","121196"),121197:e.r(23,"liveramp_Epsilon","1000458736","121197","liveramp_Experian","1004602289","121197","10807","121197","1000458726","121197","1004602279","121197","10806","121197"),121198:e.r(30,"1000458746","121198","liveramp_Experian","1004602299","121198","10808","121198"),121199:e.r(27,"10809","121199","liveramp_Epsilon","1000458756","121199","liveramp_Experian","1004602309","121199"),122797:e.q(e.tw(e.cb(0,e.o([e.ref(60),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,227),e.s_(0,335),e.s_(0,350),e.s_(0,353),e.s_(0,406),e.s_(0,436),e.s_(0,562)]))]),e.ge(4),4),6048e5)),122798:e.r(57,0,4,4,16),127892:e.r(57,0,4,4,53),128001:e.r(62,4,4,62,32,80,73,171),128002:e.r(57,0,4,4,88),128003:e.r(58,4,4,82,69),128004:e.r(57,0,4,4,58),128006:e.r(57,0,4,4,6),128007:e.r(57,0,4,4,92),128008:e.q(e.tw(e.cb(0,e.o([e.ref(90),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,131),e.y_(0,135),e.y_(0,129)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,193),e.y_(0,207),e.y_(0,194)]))]),e.ge(4),4),6048e5)),128009:e.r(57,0,4,4,94),128010:e.r(57,0,4,4,100),128011:e.r(59,4,4,159,130,144),128012:e.r(57,0,4,4,4),128013:e.r(63,4,4,65,78,117,141),128014:e.r(57,0,4,4,3),128015:e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,172),e.y_(0,53),e.y_(0,81),e.y_(0,88)]),e.y_(1,400)),e.ref(73)]),e.ge(4),4),6048e5)),128016:e.r(61,4,4,26,15,76,88),128017:e.r(57,0,4,4,83),128018:e.r(34,4,4,4,4,4,4,21,54,138,87,170,127),128488:e.r(9,[4751592148,5027161889,4848250988,49069832,4537794659,4482311944,4838649344,5195841772,82728152,5188564507,4861362372,19560872]),128489:e.r(9,[19558592,5167797242,5175850985,19576352,80651072,19569032,4708816795,19558952,4925702078,49069832,4938210625,19580312,42219752,19560032,5053584658,5195296742,19556912,4439110718,31504952,4478075494,4513137246,4853316141,29160512,43234712,5161611007]),128631:e.r(57,0,4,4,43),128632:e.r(57,0,2,2,43),128633:e.r(71,e.a([e.ref(36),e.ref(48)])),129507:e.r(25,"6710","129507","liveramp_Alliant","1001433239","129507","liveramp_Alliant","1002760526","129507","liveramp_Epsilon","1003067316","129507","liveramp_NCS","1001591956","129507"),129517:e.q(e.ocqs([e.itp("liveramp_Bombora","1004559099",!1,"129517"),e.itp("eyeota","34814",!1,"129517"),e.itp("liveramp_AnalyticsIQ","1003514579",!1,"129517")])),129538:e.r(25,"34943","129538","liveramp_DunandBradstreet","1000870866","129538","eyeota","6534","129538","liveramp_Bombora","1004559069","129538","eyeota","34872","129538"),129541:e.r(1,[e.itp("eyeota","235",!1,"129541"),e.itp("liveramp_Experian","1004256419",!1,"129541"),e.itp("liveramp_Acxiom","33086",!1,"129541")],[e.itp("liveramp_Acxiom","1010",!1,"129541"),e.itp("liveramp_Experian","1004268299",!1,"129541")]),130215:e.r(76,8,7,88,137,66),130216:e.r(62,2,2,8,7,66,88,137),130217:e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,88),e.y_(0,66),e.y_(0,137)]),e.y_(1,400)),e.ref(8),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,230),e.s_(0,242),e.s_(0,250),e.s_(0,266),e.s_(0,272),e.s_(0,291),e.s_(0,342),e.s_(0,"evologist"),e.s_(0,364),e.s_(0,365),e.s_(0,366),e.s_(0,458),e.s_(0,491),e.s_(0,498),e.s_(0,511),e.s_(0,533),e.s_(0,534),e.s_(0,536),e.s_(0,605)]))]),e.ge(4),4),6048e5)),130218:e.r(57,0,2,2,46),130219:e.r(57,0,4,4,46),130220:e.r(73,46),130221:e.r(57,0,4,4,64),130222:e.r(57,0,2,2,64),130223:e.r(73,64),130225:e.r(22,"liveramp_ShareThis","1001599916","130225","liveramp_Fluent","1005080359","130225","liveramp_StatSocial","1006915621","130225"),130226:e.r(74,e.af_u(["properties","contextual","classifications","concepts"],e.o([e.e_(0,"World War II"),e.e_(0,"World War I"),e.y_(0,215),e.y_(0,203),e.y_(0,195),e.y_(0,191),e.y_(0,176)])),e.ref(2)),130227:e.r(64,4,4,e.y_(0,176)),130228:e.r(64,2,2,e.e_(0,"Arhcaeology")),130230:e.r(28,"1005390289","130230","1000311066","130230","6545","130230"),130682:e.q(e.vq(e.cb(0,e.o([e.ref(67),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,204),e.y_(0,186),e.y_(0,216),e.y_(0,214),e.e_(0,"Science fiction"),e.y_(0,190),e.y_(0,183)])),e.ref(34)]),e.ge(1),1))),130683:e.r(65,2,2,e.y_(0,186),e.y_(0,216),e.y_(0,214),e.y_(0,190),204,"Science Fiction",183),130684:e.r(65,4,4,e.e_(0,"speculative fiction"),e.e_(0,"short story"),e.e_(0,"science fiction"),e.e_(0,"crime fiction"),487,"historical fiction",351),130685:e.r(21,"liveramp_Epsilon","1000455706",!1,"130685","liveramp_Epsilon","1003067946",!1,"130685","liveramp_Epsilon","1003067896",!1,"130685","liveramp_Epsilon","1000455996",!1,"130685"),130686:e.r(24,"1658","130686","liveramp_Zeotap","1004737949","130686","liveramp_ShareThis","1003626319","130686"),130687:e.r(51,"Fresh Air",["125638008","125637934","381444908","13"]),130688:e.q(e.ocqs([e.tw(e.cb(0,e.ps(5,198),e.ge(2),2),6048e5),e.tw(e.cb(0,e.ref(45),e.ge(2),2),6048e5)])),130689:e.r(51,"Planet Money",["510362","589466438","93559255","135379435","510289","94427042","510325"]),130690:e.r(52,"Rough Translation","510324"),130691:e.r(52,"Throughline","510333"),130692:e.r(52,213,"510351"),130693:e.r(51,219,["57","510298"]),130694:e.r(52,224,"510318"),131557:e.r(53,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,123),e.y_(0,126),e.y_(0,54)]),e.y_(1,400)),e.ge(1),1,0,e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,228),e.s_(0,232),e.s_(0,233),e.s_(0,238),e.s_(0,240),e.s_(0,243),e.s_(0,246),e.s_(0,247),e.s_(0,252),e.s_(0,253),e.s_(0,254),e.s_(0,255),e.s_(0,256),e.s_(0,257),e.s_(0,258),e.s_(0,259),e.s_(0,260),e.s_(0,261),e.s_(0,262),e.s_(0,268),e.s_(0,271),e.s_(0,273),e.s_(0,274),e.s_(0,275),e.s_(0,276),e.s_(0,277),e.s_(0,278),e.s_(0,279),e.s_(0,282),e.s_(0,283),e.s_(0,284),e.s_(0,285),e.s_(0,286),e.s_(0,287),e.s_(0,289),e.s_(0,292),e.s_(0,293),e.s_(0,300),e.s_(0,302),e.s_(0,304),e.s_(0,306),e.s_(0,307),e.s_(0,"cot d\'ivoire"),e.s_(0,310),e.s_(0,312),e.s_(0,314),e.s_(0,315),e.s_(0,324),e.s_(0,329),e.s_(0,331),e.s_(0,337),e.s_(0,339),e.s_(0,341),e.s_(0,343),e.s_(0,345),e.s_(0,346),e.s_(0,347),e.s_(0,352),e.s_(0,354),e.s_(0,358),e.s_(0,359),e.s_(0,360),e.s_(0,367),e.s_(0,368),e.s_(0,369),e.s_(0,372),e.s_(0,373),e.s_(0,374),e.s_(0,375),e.s_(0,376),e.s_(0,377),e.s_(0,381),e.s_(0,394),e.s_(0,399),e.s_(0,401),e.s_(0,403),e.s_(0,404),e.s_(0,408),e.s_(0,409),e.s_(0,410),e.s_(0,411),e.s_(0,412),e.s_(0,413),e.s_(0,414),e.s_(0,415),e.s_(0,416),e.s_(0,417),e.s_(0,418),e.s_(0,419),e.s_(0,420),e.s_(0,421),e.s_(0,422),e.s_(0,423),e.s_(0,424),e.s_(0,425),e.s_(0,427),e.s_(0,430),e.s_(0,431),e.s_(0,432),e.s_(0,435),e.s_(0,438),e.s_(0,440),e.s_(0,441),e.s_(0,443),e.s_(0,445),e.s_(0,446),e.s_(0,447),e.s_(0,449),e.s_(0,451),e.s_(0,452),e.s_(0,459),e.s_(0,460),e.s_(0,462),e.s_(0,465),e.s_(0,466),e.s_(0,467),e.s_(0,468),e.s_(0,469),e.s_(0,470),e.s_(0,473),e.s_(0,474),e.s_(0,476),e.s_(0,478),e.s_(0,480),e.s_(0,481),e.s_(0,482),e.s_(0,483),e.s_(0,484),e.s_(0,486),e.s_(0,492),e.s_(0,496),e.s_(0,497),e.s_(0,499),e.s_(0,500),e.s_(0,501),e.s_(0,504),e.s_(0,505),e.s_(0,512),e.s_(0,514),e.s_(0,524),e.s_(0,525),e.s_(0,526),e.s_(0,527),e.s_(0,529),e.s_(0,530),e.s_(0,531),e.s_(0,532),e.s_(0,537),e.s_(0,538),e.s_(0,540),e.s_(0,541),e.s_(0,542),e.s_(0,543),e.s_(0,544),e.s_(0,548),e.s_(0,549),e.s_(0,550),e.s_(0,552),e.s_(0,554),e.s_(0,556),e.s_(0,557),e.s_(0,558),e.s_(0,559),e.s_(0,560),e.s_(0,561),e.s_(0,567),e.s_(0,572),e.s_(0,573),e.s_(0,574),e.s_(0,577),e.s_(0,580),e.s_(0,581),e.s_(0,582),e.s_(0,583),e.s_(0,584),e.s_(0,585),e.s_(0,587),e.s_(0,588),e.s_(0,590),e.s_(0,591),e.s_(0,592),e.s_(0,593),e.s_(0,595),e.s_(0,602),e.s_(0,603)])),e.ge(1),1),131558:e.r(33,4,4,4,4,54,126,123,"central african repbulic",432,481),131559:e.r(33,2,2,2,2,126,123,54,287,"liechentstein","new zeland"),132127:e.r(53,e.ps(5,198),e.ge(1),1,0,e.ref(45),e.ge(1),1),134583:e.r(22,"liveramp_Stirista","1000046684","134583","liveramp_AnalyticsIQ","1000693396","134583","liveramp_Epsilon","1000462846","134583"),134584:e.r(21,"eyeota","35482",!1,"134584","liveramp_Acxiom","1004908399",!1,"134584","liveramp_AnalyticsIQ","1000691456",!1,"134584","liveramp_killi","1006832911",!1,"134584"),136100:e.r(6,0),137184:e.r(70,[6216922495,6216922480]),137185:e.r(70,[6187789436,6187198933,6216922498,6216922486,6216922501,6216922489,6216922492,6216922483]),137193:e.r(54,85,11),137194:e.r(35,4,4,4,4,85,11),137195:e.r(35,2,2,2,2,85,11),139765:e.r(54,41,63),139766:e.r(35,2,2,2,2,41,63),139767:e.r(35,4,4,4,4,41,63),141800:e.r(25,"12689","141800","liveramp_killi","1006832981","141800","liveramp_Mastercard","1005907341","141800","liveramp_Alliant","1000846336","141800","liveramp_Alliant","1000847476","141800"),147435:e.r(21,"eyeota","35698",!1,"147435","liveramp_ShareThis","1005134239",!1,"147435","liveramp_Fluent","1005081849",!1,"147435","liveramp_AnalyticsIQ","1004391889",!1,"147435"),147436:e.r(21,"liveramp_DunandBradstreet","1000311616",!1,"147436","eyeota","6634",!1,"147436","liveramp_Bombora","1000095284",!1,"147436","liveramp_AnalyticsIQ","1000691256",!1,"147436"),147437:e.r(28,"1000884089","147437","1003342629","147437","34878","147437"),147672:e.r(22,"liveramp_Kantar","1004735079","147672","liveramp_Fluent","1005086809","147672","liveramp_Epsilon","1002215776","147672"),147708:e.r(3,2,1,1,80),147709:e.r(3,2,1,1,9),147710:e.r(9,[5267904932,4993833483,5224439235,5270806684,5286476846,4888100282,5219881146,5253163678,5233906208,5162993695,4456126448]),147711:e.r(9,[5258023111,5181715330,4988235521,4893324895,13642333463,5264463751,5042514146,5119323573,4537794659,5248735104,4531886358]),147712:e.r(9,[5285984311,4893332520,70153352,5225498631,4857320111,19562552,19563392,5228278544,4985916360,5270790901]),148309:e.r(52,"It\'s Been a Minute","510317"),148310:e.r(51,206,["93568166","510282"]),148311:e.r(51,"Code Switch",["219668222","173754155","510312"]),148312:e.r(51,178,["450276241","510309"]),148313:e.r(52,182,"510355"),148422:e.r(0,"b6b87112-87de-4629-9020-3c77a4e1db0c",.70881116,"130689"),148423:e.r(0,"e44357d7-9594-4d08-88d6-f99b1ae45443",.6965851,"130694"),148424:e.r(0,"a08ed2ea-8b96-4cf9-8da5-f345ece2d99c",.75863993,"130693"),148425:e.r(0,"fcfbb7fb-b97c-44b6-b82a-732ac08f94c7",.7012073,"130691"),148563:e.r(0,"c0be7967-9ea7-465a-a5d2-329fba443b45",.76178694,"148309"),148564:e.r(0,"d0219e4c-d042-40ec-98a1-a996ae86655e",.65781343,"148310"),148565:e.r(0,"f1bb2e5e-ede3-462b-8c2f-d081f5f8f069",.7277906,"148311"),148566:e.r(0,"53e0d600-4742-4b76-b262-411d8a64458d",.7280036,"148312"),148567:e.r(0,"8c68e1fa-b0d5-4323-a076-b495fbb4fe4e",.6848906,"148313"),148860:e.r(56,180),148864:e.r(55,4),148972:e.r(16,"b6b87112-87de-4629-9020-3c77a4e1db0c","130689",.70180404),148973:e.r(16,"e44357d7-9594-4d08-88d6-f99b1ae45443","130694",.6792194),148975:e.r(16,"a08ed2ea-8b96-4cf9-8da5-f345ece2d99c","130693",.6096735),148976:e.r(16,"fcfbb7fb-b97c-44b6-b82a-732ac08f94c7","130691",.72081447),148977:e.r(16,"c0be7967-9ea7-465a-a5d2-329fba443b45","148309",.75798106),148978:e.r(16,"d0219e4c-d042-40ec-98a1-a996ae86655e","148310",.6843441),148979:e.r(16,"f1bb2e5e-ede3-462b-8c2f-d081f5f8f069","148311",.7376218),148980:e.r(16,"53e0d600-4742-4b76-b262-411d8a64458d","148312",.7134667),148981:e.r(16,"8c68e1fa-b0d5-4323-a076-b495fbb4fe4e","148313",.7674739),151166:e.r(9,[5139961094,5253129723]),153458:e.r(18,.7740183),153484:e.r(16,"527b5808-2664-4cae-98c3-f4bd31d95973","147709",.74412566),153485:e.r(16,"d986a184-9da1-464b-bdb9-17a60a679595","147708",.6974428),153486:e.r(16,"eeed876f-4c0d-4a3a-8b65-927ad67fb635","147710",.81165403),153499:e.r(55,3),153500:e.r(55,2),153501:e.r(55,1),153502:e.r(56,150),153504:e.r(56,120),153505:e.r(56,90),153506:e.r(56,60),153905:e.r(18,.6401673),155015:e.r(21,"eyeota","6510",!1,"155015","liveramp_Acxiom","121801014",!1,"155015","liveramp_killi","1006991921",!1,"155015","liveramp_DunandBradstreet","1001204329",!1,"155015"),155141:e.r(60,2,2,160,151,150,147,146,145,143,127,84,79,86),155142:e.r(60,4,4,86,160,151,150,147,146,145,143,127,84,79),155496:e.r(57,0,2,2,35),155497:e.r(57,0,4,4,35),155857:e.r(16,"0283e6ae-c5ef-4fb8-9332-2af2f42c0961","155142",.66162175),158768:e.r(21,"liveramp_Acxiom","300456299",!1,"158768","liveramp_Experian","1007226711",!1,"158768","liveramp_IPSOS","1004367389",!1,"158768","liveramp_ShareThis","1001011799",!1,"158768"),158772:e.r(21,"eyeota","6700",!1,"158772","eyeota","6701",!1,"158772","liveramp_Acxiom","1904",!1,"158772","liveramp_Stirista","1000305986",!1,"158772"),165230:e.r(5,2,4,62176832),166706:e.r(6,7),172118:e.r(71,e.pe(11,"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)")),174010:e.r(3,2,2,2,80),174011:e.r(57,2,2,2,80),174012:e.r(57,2,1,1,80),175948:e.r(66,1,1,9,["ios",239]),177390:e.r(9,[89828792,98035472,4853759009,5261064144,5258384140]),179312:e.r(9,[4858792524,4860761739]),179313:e.r(3,2,1,1,22),179314:e.r(57,2,1,1,22),179315:e.r(57,2,2,2,22),179316:e.r(3,2,2,2,22),179317:e.r(57,2,1,1,9),179320:e.r(57,2,2,2,9),179322:e.r(3,2,2,2,9),179323:e.r(68,9,239),181454:e.q(e.ocqs([e.itp("liveramp_Mastercard","1005908181",!1,"181454"),e.itp("eyeota","35993",!1,"181454"),e.itp("liveramp_Epsilon","1000993689",!1,"181454"),e.itp("eyeota","1544",!1,"181454"),e.itp("liveramp_Epsilon","1003200409",!1,"181454"),e.itp("liveramp_Epsilon","1003026916",!1,"181454")])),183713:e.r(78,.5),183714:e.r(78,.75),183723:e.q(e.vq(e.mxw(3,e.t,["properties","completion"],e.ge(1)))),183909:e.r(11,e.cb(2,e.t,e.ge(2),2),e.scq(e.tw(e.sw(4,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),6048e5),e.vq(e.sw(3,e.t,["properties","engaged_time"])),e.g(300)),e.tw(e.dscq("Pageview",e.t,e.g(3),4),6048e5),e.tw(e.cb(1,e.t,e.ge(2),2),6048e5)),183931:e.r(8,2,2,2),183935:e.r(8,2,1,1),185385:e.r(29,"185385","1005390159","185385","liveramp_DunandBradstreet","1000310996","185385","liveramp_Bombora","1004558949","185385"),185734:e.r(67,["BWCO2h5g","kOhemE5q"]),185735:e.r(69,"All Things Considered"),185736:e.r(57,1,2,2,28),185737:e.r(68,3,206),185738:e.r(68,3,224),185739:e.r(69,"The NPR Politics Podcast"),185740:e.r(69,"The Indicator from Planet Money"),185741:e.r(68,3,213),185742:e.r(68,3,219),185743:e.r(68,3,182),185744:e.r(69,"State of the World from NPR"),185745:e.r(69,"NPR\'s Book of the Day"),185746:e.r(68,3,198),185747:e.r(69,"Here & Now"),185748:e.r(57,1,2,2,96),185749:e.r(67,["/QRJgLTN","P7UqoYi+","pqcYxBr8"]),185750:e.r(67,["BhKsYvUE","UVxfA40U"]),185751:e.r(57,1,2,2,55),185752:e.r(57,1,2,2,13),185753:e.r(66,2,2,3,["1A+","1A"]),185754:e.r(57,1,2,2,66),185755:e.r(68,3,178),185756:e.r(57,1,2,2,103),185757:e.r(57,1,2,2,52),185758:e.r(67,["50grn9Pf","bD0ZrFbF"]),185759:e.r(3,1,2,2,28),185760:e.r(3,1,2,2,52),185761:e.r(3,1,2,2,103),185762:e.r(4,1,2,2,3,["M476xIQ/"]),185763:e.r(3,1,2,2,66),185764:e.r(3,1,2,2,13),185765:e.r(3,1,2,2,55),185766:e.r(4,1,2,2,3,["/QRJgLTN","P7UqoYi+","S2GvBreL","pqcYxBr8"]),185767:e.r(3,1,2,2,96),185784:e.q(e.ocqs([e.itp("liveramp_IXIDigital","1000089024",!1,"185784"),e.itp("liveramp_IXIDigital","1000089004",!1,"185784"),e.itp("liveramp_IXIDigital","1000088994",!1,"185784"),e.itp("liveramp_IXIDigital","1000088974",!1,"185784"),e.itp("liveramp_IXIDigital","1000089014",!1,"185784"),e.itp("liveramp_IXIDigital","1000088984",!1,"185784"),e.itp("liveramp_Experian","1004267259",!1,"185784"),e.itp("liveramp_Experian","1004267279",!1,"185784"),e.itp("liveramp_Experian","1004267229",!1,"185784"),e.itp("liveramp_Experian","1004267299",!1,"185784")])),185785:e.r(32,"1000088964","185785","1004267209","185785"),185786:e.r(32,"1000088954","185786","1004267239","185786"),185787:e.r(21,"liveramp_IXIDigital","1000088944",!1,"185787","liveramp_Experian","1004267269",!1,"185787","liveramp_IXIDigital","1000088934",!1,"185787","liveramp_Experian","1004267289",!1,"185787"),185788:e.q(e.ocqs([e.itp("liveramp_IXIDigital","1000088924",!1,"185788"),e.itp("liveramp_IPSOS","1003132886",!1,"185788")])),185789:e.r(31,"1000088914","185789","300128608","185789"),185790:e.r(31,"1000088904","185790","300128609","185790"),185791:e.r(12,e.itp("liveramp_IXIDigital","1000088894",!1,"185791"),e.itp("liveramp_IPSOS","1003132906",!1,"185791"),e.itp("liveramp_Acxiom","300128610",!1,"185791"),e.itp("liveramp_IXIDigital","1000088874",!1,"185791"),e.itp("liveramp_IXIDigital","1000088884",!1,"185791"),e.itp("liveramp_IPSOS","1003132916",!1,"185791"),e.itp("liveramp_Experian","1004267249",!1,"185791")),185792:e.r(29,"185792","1004558949","185792","liveramp_Experian","1007229091","185792","liveramp_Compass","1000037944","185792"),185793:e.r(22,"liveramp_DunandBradstreet","1000310916","185793","liveramp_Bombora","1000096194","185793","liveramp_IPSOS","1003133096","185793"),185794:e.r(21,"liveramp_Mastercard","1005908111",!1,"185794","liveramp_Kantar","1004779859",!1,"185794","liveramp_Epsilon","1000988079",!1,"185794","liveramp_Experian","1004264699",!1,"185794"),187163:e.r(7,6,["dest_url"],"donations/support"),187343:e.r(5,2,4,5313486668),187787:e.r(21,"liveramp_DunandBradstreet","1000310076",!1,"187787","liveramp_IPSOS","1003133176",!1,"187787","liveramp_Bombora","1000093954",!1,"187787","eyeota","34867",!1,"187787"),187995:e.r(17,.7630219),188028:e.r(19,.7647666),188129:e.r(21,"liveramp_Bombora","1000096494",!1,"188129","eyeota","6535",!1,"188129","liveramp_Bombora","1000884099",!1,"188129","eyeota","34825",!1,"188129"),188130:e.r(70,[6603593476,6603593443,6604413722]),188131:e.r(70,[6706100601,6708071986,6708068851]),188132:e.r(22,"liveramp_AnalyticsIQ","1005534149","188132","eyeota","35475","188132","liveramp_Stirista","1001178159","188132"),192190:e.q(e.itp("liveramp_Experian","1005797871",!1,"192190")),193038:e.r(20,"liveramp_Experian","1007226711",!1,"193038","liveramp_IPSOS","1004367389",!1,"193038"),193393:e.r(20,"liveramp_Epsilon","1003024226",!1,"193393","liveramp_Experian","1007227851",!1,"193393"),193394:e.r(9,[20615312,4401646925,5341541475]),193435:e.r(16,"13c49c5d-0d35-48ea-aa88-218a607de27b","187343",.70038664),194009:e.r(16,"e25e2b8b-4383-43dd-b8be-71d2f4e51e74","114954",.72007215),194011:e.r(16,"9e53bef2-95e9-4b3c-ba04-8403df66b1be","128018",.7037469),194385:e.r(4,0,1,1,10,["QxeNtSbk"]),195815:e.q(e.ocqs([e.itp("liveramp_DunandBradstreet","1003342619",!1,"195815"),e.itp("liveramp_Bombora","1004559049",!1,"195815"),e.itp("liveramp_Bombora","1005389079",!1,"195815"),e.itp("liveramp_MeritDirect","1002715146",!1,"195815"),e.itp("liveramp_Stirista","1003719149",!1,"195815")])),197117:e.r(16,"65222375-783b-4b22-82f4-9104bac36712","128489",.74085206),213221:e.r(19,.8243148),239440:e.r(16,"bae93082-149b-438d-86cb-b274f10dbeb4","165230",.889749),239961:e.r(22,"liveramp_Mastercard","1005908111","239961","liveramp_Experian","1004264699","239961","liveramp_Epsilon","1000988079","239961"),239975:e.r(9,[19766312,4859952894,61943192,66507752,73612352,63722912,42855872,51231632,5313486668,5253924876,5778167244,50060312,5371148387,5363250640,5346243562,5123805596,5325669104,4451061554,5272529216,5253577379,5673535613,5261064144,4424440216,62176832]),240097:e.q(e.ocqs([e.itp("eyeota","35714",!1,"240097"),e.itp("liveramp_Acxiom","1005523959",!1,"240097"),e.itp("liveramp_StatSocial","1006913991",!1,"240097")])),240543:e.q(e.tw(e.cb(0,e.o([e.os(e.s,5,[267,332,361,362,363,426,429,448,485,516,517,518,519,528,576]),e.os(e.s,10,[267,332,361,"gender-identity",363,426,429,"marriage-equality",485,516,517,518,"rainbow-flag","same-sex-marriage",576]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,267),e.s_(0,332),e.s_(0,361),e.s_(0,362),e.s_(0,363),e.s_(0,426),e.s_(0,429),e.s_(0,448),e.s_(0,485),e.s_(0,516),e.s_(0,517),e.s_(0,518),e.s_(0,519),e.s_(0,528),e.s_(0,576)]),e.ge_(["confidence"],.6))]),e.ge(1),1),7776e6)),240900:e.q(e.cb(0,e.pc_(6,"g-s1-75877"),e.ge(1),1)),240953:e.r(7,0,10,"utm_source=npr_newsletter"),241455:e.r(17,.8049608),242474:e.r(9,[5852485587,5866154539,67290872,4424440216,62176832,5371148387,50060312,5253577379,4451061554]),252176:e.r(24,"243","252176","eyeota","35436","252176","liveramp_PlaceIQ","1002615766","252176"),252185:e.q(e.ocqs([e.tw(e.cb(2,e.pe(4,5255949102),e.ge(1),1),2592e6),e.tw(e.cb(5,e.pe(4,5255949102),e.ge(1),1),2592e6)])),253398:e.r(15,"185758","148976","148425","148977","115395","148564","115077","183909"),253400:e.r(2,[e.ifp("147711"),e.ifp("114962"),e.scq(e.sw(4,e.ref(19),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(3,e.ref(19),["properties","engaged_time"])),e.g(60))]),253406:e.r(2,[e.ifp("153485"),e.ifp("147708"),e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.e_(0,"62"),e.e_(0,"76")]),e.y_(1,400)),e.ge(1),1),e.ifp("174012"),e.ifp("174011"),e.ifp("174010"),e.tw(e.cb(2,e.ref(80),e.ge(1),1),2592e6),e.ifp("115077")]),253408:e.q(e.ocqs([e.ifp("153501"),e.ifp("148973"),e.ifp("153506"),e.ifp("148423"),e.ifp("153505"),e.ifp("153504")])),253420:e.r(1,[e.ifp("153501"),e.ifp("148973"),e.ifp("153506"),e.ifp("148423"),e.ifp("153505"),e.ifp("153504")],[e.ifp("185742"),e.ifp("148975"),e.ifp("148424"),e.ifp("130693")]),253421:e.q(e.ocqs([e.tw(e.cb(1,e.bsc_(3,["1sAVFbWH","6pKS9KyL","EUrJaWAX","LWykgLS2","M476xIQ/","Mv4Zkvka","Nwthg1b2","ncZikzNf","pqcYxBr8"]),e.ge(1),1),2592e6),e.cb(0,e.bsc_(5,["1/qGuir5","EUrJaWAX","G3iyzOyW","IdCO/7sO","JYQy+Gvh","M476xIQ/","Mv4Zkvka","Nwthg1b2","bIIcddqT","c9eWEdGL","hNF+jjch","lSGaoYUf","ncZikzNf"]),e.ge(1),1),e.ifp("148424"),e.ifp("148563"),e.ifp("148975"),e.ifp("148422"),e.ifp("148972"),e.ifp("148309")])),253481:e.r(13,e.ifp("185749"),e.ifp("185766"),"185742","185740","148422","148972","130689","148975","148424","130693"),253491:e.r(15,"148564","148978","148977","115389","115392","148565","148979","153501"),253492:e.q(e.ocqs([e.ifp("153501"),e.ifp("148973"),e.ifp("148980"),e.ifp("148975"),e.ifp("148423")])),253642:e.r(13,e.tw(e.cb(1,e.bsc_(3,["6pKS9KyL","LWykgLS2","M476xIQ/","Mv4Zkvka","Nwthg1b2","ncZikzNf","pqcYxBr8"]),e.ge(1),1),2592e6),e.cb(0,e.bsc_(5,["1/qGuir5","IdCO/7sO","JYQy+Gvh","M476xIQ/","Mv4Zkvka","bIIcddqT","c9eWEdGL","hNF+jjch","lSGaoYUf","ncZikzNf"]),e.ge(1),1),"148424","185759","148975","148422","148972","185736","253778","114962"),253778:e.r(16,"e6004f39-dcb4-4e3e-b12d-d33bc505afe7","147711",.7021931),253779:e.r(16,"a4903d63-c6d7-4936-8650-5026bad222b7","114962",.7080267),253794:e.r(16,"bdd3eb42-20cc-46bd-97f3-6d52e1894f60","185739",.50571036),253795:e.r(16,"78c72395-fc10-4f0b-92a2-423b3f03c68b","240900",.6614286),253796:e.r(16,"949805fb-c76c-4b3b-b921-601983201290","185744",.4924223),253797:e.r(16,"5a37c9af-428f-4509-af2a-2b83d91a42bb","185759",.6446771),253798:e.r(16,"f1de2164-11fb-400d-9f5d-77149e665c3c","185763",.56106716),254301:e.r(14,"185742","115379","153501","148424","153506","148973"),254305:e.r(11,e.ifp("153501"),e.ifp("153506"),e.ifp("253798"),e.ifp("115393")),254308:e.r(4,1,1,1,3,["6pKS9KyL","sR4d2PQg"]),254313:e.r(14,"153501","153506","254314","148980","115389","115077"),254314:e.r(16,"b8252813-3df4-4c73-83dc-0e84fec2b00c","185762",.5752282),254315:e.r(16,"9230df14-34b0-4f6b-a6ec-b35fd055f50e","185764",.6124783),254316:e.r(16,"cde1d578-b77e-424f-8e71-bc03938ca256","185738",.5561128),254319:e.r(16,"a6a40607-9f3e-4f5e-9d15-140552978f98","185751",.97327346)}),rootCompressionLookup:e=>[(t,r,n)=>e.q(e.acqs([e.lm(t,e.ge(r)),e.fm(e.n0,e.ifp(n))])),(t,r)=>e.q(e.acqs([e.ocqs(t),e.ocqs(r)])),t=>e.q(e.acqs([e.ocqs([e.ifp("185758"),e.ifp("148976"),e.ifp("148563"),e.ifp("148425"),e.ifp("148977"),e.ifp("115395"),e.ifp("148564"),e.ifp("115077"),e.ifp("183909")]),e.ocqs(t)])),(t,r,n,i)=>e.q(e.cb(t,e.ref(i),e.ge(n),r)),(t,r,n,i,s)=>e.q(e.cb(t,e.bsc_(i,s),e.ge(n),r)),(t,r,n)=>e.q(e.cb(t,e.pe(r,n),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(12,!0),e.ge(1),1)),(t,r,n)=>e.q(e.cb(t,e.ps(r,n),e.ge(1),1)),(t,r,n)=>e.q(e.cb(t,e.t,e.ge(n),r)),t=>e.q(e.cb(2,e.os(e.e,4,t),e.ge(1),1)),t=>e.q(e.ocqs(t)),(t,r,n,i)=>e.q(e.ocqs([t,r,n,i])),(t,r,n,i,s,o,a)=>e.q(e.ocqs([t,r,n,i,s,o,a])),(t,r,n,i,s,o,a,c,u,l)=>e.q(e.ocqs([t,r,e.ifp(n),e.ifp(i),e.ifp(s),e.ifp(o),e.ifp(a),e.ifp(c),e.ifp(u),e.ifp(l)])),(t,r,n,i,s,o)=>e.q(e.ocqs([e.ifp(t),e.ifp(r),e.ifp(n),e.ifp(i),e.ifp(s),e.ifp("153505"),e.ifp(o)])),(t,r,n,i,s,o,a,c)=>e.q(e.ocqs([e.ifp(t),e.ifp(r),e.ifp("148563"),e.ifp(n),e.ifp(i),e.ifp(s),e.ifp(o),e.ifp(a),e.ifp(c)])),(t,r,n)=>e.q(e.ocqs([e.lm(t,e.ge(n)),e.ifp(r)])),t=>e.q(e.ocqs([e.lm("1091a86e-6f93-4fbf-be8d-f13bd9cb6cd2",e.ge(t)),e.ifp("147712")])),t=>e.q(e.ocqs([e.lm("2b4962d0-a0cd-4f6b-aa64-d4d54c6d04c0",e.ge(t)),e.ifp("151166")])),t=>e.q(e.ocqs([e.lm("6ea10714-f3a5-491a-9229-3a1d180b4a5a",e.ge(t)),e.ifp("187163")])),(t,r,n,i,s,o,a,c)=>e.q(e.ocqs([e.itp(t,r,n,i),e.itp(s,o,a,c)])),(t,r,n,i,s,o,a,c,u,l,f,p,d,_,g,h)=>e.q(e.ocqs([e.itp(t,r,n,i),e.itp(s,o,a,c),e.itp(u,l,f,p),e.itp(d,_,g,h)])),(t,r,n,i,s,o,a,c,u)=>e.q(e.ocqs([e.itp(t,r,!1,n),e.itp(i,s,!1,o),e.itp(a,c,!1,u)])),(t,r,n,i,s,o,a,c,u,l,f,p,d,_)=>e.q(e.ocqs([e.itp(t,r,!1,n),e.itp(i,s,!1,o),e.itp("liveramp_Acxiom",a,!1,c),e.itp("liveramp_Epsilon",u,!1,l),e.itp("liveramp_Experian",f,!1,p),e.itp("liveramp_Acxiom",d,!1,_)])),(t,r,n,i,s,o,a,c)=>e.q(e.ocqs([e.itp("eyeota",t,!1,r),e.itp(n,i,!1,s),e.itp(o,a,!1,c)])),(t,r,n,i,s,o,a,c,u,l,f,p,d,_)=>e.q(e.ocqs([e.itp("eyeota",t,!1,r),e.itp(n,i,!1,s),e.itp(o,a,!1,c),e.itp(u,l,!1,f),e.itp(p,d,!1,_)])),(t,r,n,i,s,o)=>e.q(e.ocqs([e.itp("eyeota",t,!1,r),e.itp("liveramp_Acxiom",n,!1,i),e.itp("liveramp_Epsilon",s,!1,o)])),(t,r,n,i,s,o,a,c)=>e.q(e.ocqs([e.itp("liveramp_Acxiom",t,!1,r),e.itp(n,i,!1,s),e.itp(o,a,!1,c)])),(t,r,n,i,s,o)=>e.q(e.ocqs([e.itp("liveramp_Bombora",t,!1,r),e.itp("liveramp_DunandBradstreet",n,!1,i),e.itp("eyeota",s,!1,o)])),(t,r,n,i,s,o,a,c,u)=>e.q(e.ocqs([e.itp("liveramp_DunandBradstreet","1001640126",!1,t),e.itp("liveramp_Bombora",r,!1,n),e.itp(i,s,!1,o),e.itp(a,c,!1,u)])),(t,r,n,i,s,o,a)=>e.q(e.ocqs([e.itp("liveramp_Epsilon",t,!1,r),e.itp(n,i,!1,s),e.itp("liveramp_Acxiom",o,!1,a)])),(t,r,n,i)=>e.q(e.ocqs([e.itp("liveramp_IXIDigital",t,!1,r),e.itp("liveramp_Acxiom",n,!1,i)])),(t,r,n,i)=>e.q(e.ocqs([e.itp("liveramp_IXIDigital",t,!1,r),e.itp("liveramp_Experian",n,!1,i)])),(t,r,n,i,s,o,a,c,u,l)=>e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,s),e.y_(0,o),e.y_(0,a)]),e.y_(1,400)),e.ge(n),t),6048e5),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,228),e.s_(0,232),e.s_(0,233),e.s_(0,238),e.s_(0,240),e.s_(0,243),e.s_(0,246),e.s_(0,247),e.s_(0,252),e.s_(0,253),e.s_(0,254),e.s_(0,255),e.s_(0,256),e.s_(0,257),e.s_(0,258),e.s_(0,259),e.s_(0,260),e.s_(0,261),e.s_(0,262),e.s_(0,268),e.s_(0,271),e.s_(0,273),e.s_(0,274),e.s_(0,275),e.s_(0,276),e.s_(0,277),e.s_(0,278),e.s_(0,279),e.s_(0,282),e.s_(0,283),e.s_(0,284),e.s_(0,285),e.s_(0,286),e.s_(0,c),e.s_(0,289),e.s_(0,292),e.s_(0,293),e.s_(0,300),e.s_(0,302),e.s_(0,304),e.s_(0,306),e.s_(0,307),e.s_(0,308),e.s_(0,310),e.s_(0,312),e.s_(0,314),e.s_(0,315),e.s_(0,324),e.s_(0,329),e.s_(0,331),e.s_(0,337),e.s_(0,339),e.s_(0,341),e.s_(0,343),e.s_(0,345),e.s_(0,346),e.s_(0,347),e.s_(0,352),e.s_(0,354),e.s_(0,358),e.s_(0,359),e.s_(0,360),e.s_(0,367),e.s_(0,368),e.s_(0,369),e.s_(0,372),e.s_(0,373),e.s_(0,374),e.s_(0,375),e.s_(0,376),e.s_(0,377),e.s_(0,381),e.s_(0,394),e.s_(0,399),e.s_(0,401),e.s_(0,403),e.s_(0,404),e.s_(0,408),e.s_(0,409),e.s_(0,410),e.s_(0,411),e.s_(0,412),e.s_(0,413),e.s_(0,414),e.s_(0,415),e.s_(0,416),e.s_(0,417),e.s_(0,418),e.s_(0,419),e.s_(0,420),e.s_(0,421),e.s_(0,422),e.s_(0,423),e.s_(0,424),e.s_(0,425),e.s_(0,427),e.s_(0,430),e.s_(0,431),e.s_(0,u),e.s_(0,435),e.s_(0,438),e.s_(0,440),e.s_(0,441),e.s_(0,443),e.s_(0,444),e.s_(0,445),e.s_(0,446),e.s_(0,447),e.s_(0,449),e.s_(0,451),e.s_(0,452),e.s_(0,459),e.s_(0,460),e.s_(0,462),e.s_(0,465),e.s_(0,466),e.s_(0,467),e.s_(0,468),e.s_(0,469),e.s_(0,470),e.s_(0,473),e.s_(0,474),e.s_(0,476),e.s_(0,478),e.s_(0,480),e.s_(0,l),e.s_(0,482),e.s_(0,483),e.s_(0,484),e.s_(0,486),e.s_(0,492),e.s_(0,496),e.s_(0,497),e.s_(0,499),e.s_(0,500),e.s_(0,501),e.s_(0,504),e.s_(0,505),e.s_(0,512),e.s_(0,514),e.s_(0,524),e.s_(0,525),e.s_(0,526),e.s_(0,527),e.s_(0,529),e.s_(0,530),e.s_(0,531),e.s_(0,532),e.s_(0,537),e.s_(0,538),e.s_(0,540),e.s_(0,541),e.s_(0,542),e.s_(0,543),e.s_(0,544),e.s_(0,548),e.s_(0,549),e.s_(0,550),e.s_(0,552),e.s_(0,554),e.s_(0,556),e.s_(0,557),e.s_(0,558),e.s_(0,559),e.s_(0,560),e.s_(0,561),e.s_(0,567),e.s_(0,572),e.s_(0,573),e.s_(0,574),e.s_(0,577),e.s_(0,580),e.s_(0,581),e.s_(0,582),e.s_(0,583),e.s_(0,584),e.s_(0,585),e.s_(0,587),e.s_(0,588),e.s_(0,590),e.s_(0,591),e.s_(0,592),e.s_(0,593),e.s_(0,594),e.s_(0,595),e.s_(0,602),e.s_(0,603),e.s_(0,604)])),e.ge(i),r),6048e5)])),(t,r,n,i,s,o,a,c,u,l,f,p)=>e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,u),e.y_(0,l),e.y_(0,f),e.y_(0,p),e.y_(0,51)]),e.y_(1,400)),e.ge(i),t),6048e5),e.tw(e.cb(0,e.ref(a),e.ge(s),r),6048e5),e.tw(e.cb(0,e.ref(c),e.ge(o),n),6048e5)])),(t,r,n,i,s,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.ref(s),e.ge(n),t),6048e5),e.tw(e.cb(0,e.ref(o),e.ge(i),r),6048e5)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],r,e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(r),e.ge(1),1),2592e6)])),(t,r,n,i,s)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(n,i,s),e.ge(1),1),2592e6)])),(t,r,n,i,s)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,s),e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.y_(0,s),e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,s),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,o),e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s,o,a,c)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,s),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,o),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,a),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,c),e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s,o,a,c,u)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,s),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,o),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,a),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,c),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],u,e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s,o,a,c,u,l,f,p,d,_)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,r),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,n),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,i),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,s),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,o),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,a),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,c),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,u),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,l),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,f),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,p),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,d),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],_,e.y_(1,400)),e.ge(1),1),2592e6)])),(t,r,n,i,s,o,a,c,u)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,n),e.ge(i),1),2592e6),e.tw(e.cb(0,e.pc_(s,o),e.ge(a),1),2592e6),e.tw(e.cb(0,t,e.ge(c),1),2592e6),e.tw(e.cb(0,r,e.ge(u),1),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,0),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(r),e.ge(1),1),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,7),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,t),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(0,r),e.y_(1,400)),e.ge(1),1),2592e6)])),t=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,15),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.y_(0,t),e.y_(1,400)),e.ge(1),1),2592e6)])),t=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,36),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],t,e.y_(1,400)),e.ge(1),1),2592e6)])),t=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(2,43),e.ge(1),1),2592e6),e.tw(e.cb(0,e.pc_(2,44),e.ge(1),1),2592e6),e.tw(e.cb(0,t,e.ge(1),1),2592e6),e.tw(e.cb(0,e.ref(17),e.ge(1),1),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.ps(5,t),e.ge(2),2),6048e5),e.tw(e.cb(0,e.os(e.cx,6,r),e.ge(2),2),6048e5)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.ps(5,t),e.ge(2),2),6048e5),e.tw(e.cb(0,e.pc_(6,r),e.ge(2),2),6048e5)])),(t,r,n,i,s,o,a)=>e.q(e.ocqs([e.vq(e.cb(0,t,r,n)),e.vq(e.cb(i,s,o,a))])),(t,r)=>e.q(e.ocqs([e.vq(e.cb(0,e.ref(t),e.ge(1),1)),e.vq(e.cb(0,e.ref(r),e.ge(1),1))])),t=>e.q(e.scq(e.tw(e.cw(4,e.pg(7,30)),6048e5),e.vq(e.sw(3,e.t,["properties","engaged_time"],e.g(30))),e.ge(t))),t=>e.q(e.scq(e.tw(e.sw(4,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),6048e5),e.vq(e.sw(3,e.t,["properties","engaged_time"])),e.g(t))),(t,r,n,i)=>e.q(e.tw(e.cb(t,e.ref(i),e.ge(n),r),6048e5)),(t,r,n,i)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,121),e.y_(0,120),e.y_(0,116),e.y_(0,115),e.y_(0,114),e.y_(0,113),e.y_(0,112),e.y_(0,111),e.y_(0,110),e.y_(0,109),e.y_(0,108),e.y_(0,107),e.y_(0,106),e.y_(0,105),e.y_(0,104),e.y_(0,103),e.y_(0,102),e.y_(0,101),e.y_(0,100),e.y_(0,99),e.y_(0,98),e.y_(0,97),e.y_(0,96),e.y_(0,95),e.y_(0,93),e.y_(0,158),e.y_(0,n),e.y_(0,i),e.y_(0,59)]),e.y_(1,400)),e.ge(r),t),6048e5)),(t,r,n,i,s)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,n),e.y_(0,i),e.y_(0,s)]),e.y_(1,400)),e.ref(14)]),e.ge(r),t),6048e5)),(t,r,n,i,s,o,a,c,u,l,f,p,d)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,n),e.y_(0,i),e.y_(0,s),e.y_(0,o),e.y_(0,a),e.y_(0,c),e.y_(0,u),e.y_(0,l),e.y_(0,f),e.y_(0,p),e.y_(0,d),e.y_(0,61),e.y_(0,60)]),e.y_(1,400)),e.ref(44),e.ref(69)]),e.ge(r),t),6048e5)),(t,r,n,i,s,o)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,s),e.y_(0,o)]),e.y_(1,400)),e.ref(n),e.ref(i)]),e.ge(r),t),6048e5)),(t,r,n,i,s,o,a)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,s),e.y_(0,o),e.y_(0,a)]),e.y_(1,400)),e.ref(n),e.ref(i)]),e.ge(r),t),6048e5)),(t,r,n,i,s,o)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,163),e.y_(0,162),e.y_(0,157),e.y_(0,n),e.y_(0,i),e.y_(0,s),e.y_(0,o)]),e.y_(1,400)),e.ref(72),e.ref(29)]),e.ge(r),t),6048e5)),(t,r,n)=>e.q(e.tw(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,226),e.y_(0,215),e.y_(0,203),e.y_(0,195),e.y_(0,191),n])),e.ref(2)]),e.ge(r),t),6048e5)),(t,r,n,i,s,o,a,c,u)=>e.q(e.tw(e.cb(0,e.o([e.ref(67),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,a),n,i,s,e.e_(0,c),o,e.y_(0,u)])),e.ref(34)]),e.ge(r),t),6048e5)),(t,r,n,i)=>e.q(e.tw(e.cb(1,e.os(e.w,n,i),e.ge(r),t),6048e5)),t=>e.q(e.tw(e.cb(1,e.bsc_(3,t),e.ge(2),2),6048e5)),(t,r)=>e.q(e.tw(e.cb(1,e.y(t,r),e.ge(2),2),6048e5)),t=>e.q(e.tw(e.cb(1,e.pe(3,t),e.ge(2),2),6048e5)),t=>e.q(e.tw(e.cb(5,e.os(e.e,8,t),e.ge(1),1),2592e6)),t=>e.q(e.vq(e.cb(0,t,e.ge(1),1))),t=>e.q(e.vq(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o(t),e.y_(1,400)),e.ge(1),1))),t=>e.q(e.vq(e.cb(0,e.ref(t),e.ge(1),1))),(t,r)=>e.q(e.vq(e.cb(0,e.o([t,r]),e.ge(1),1))),(t,r,n,i,s)=>e.q(e.vq(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o(n),e.y_(i,s)),e.ref(t),e.ref(r)]),e.ge(1),1))),(t,r,n,i,s)=>e.q(e.vq(e.cb(0,e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,n),e.y_(0,i),e.y_(0,s)]),e.y_(1,400)),e.ref(t),e.ref(r)]),e.ge(1),1))),(t,r)=>e.q(e.vq(e.cb(0,e.o([e.ref(t),e.ref(r)]),e.ge(1),1))),t=>e.q(e.vq(e.mxw(3,e.t,["properties","completion"],e.g(t))))],stateSyncReplays:e=>[],subexpressionsLookup:e=>[e.o([e.s_(0,515),e.s_(0,551),e.s_(0,586)]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,227),e.s_(0,335),e.s_(0,350),e.s_(0,353),e.s_(0,406),e.s_(0,436),e.s_(0,562),e.s_(0,563)])),e.af_u(["properties","contextual","classifications","entities"],e.ref(25)),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,80),e.y_(0,165),e.y_(0,77)]),e.y_(1,400)),e.ref(47),e.ref(93)]),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,125),e.y_(0,64)]),e.y_(1,400)),e.ref(82),e.ref(50)]),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,236),e.s_(0,245),e.s_(0,327),e.s_(0,344),e.s_(0,378),e.s_(0,398),e.s_(0,479),e.s_(0,502),e.s_(0,503),e.s_(0,598)])),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,161),e.y_(0,159),e.y_(0,156),e.y_(0,155),e.y_(0,152),e.y_(0,141),e.y_(0,139),e.y_(0,136),e.y_(0,134),e.y_(0,132),e.y_(0,92),e.y_(0,90),e.y_(0,72),e.y_(0,70),e.y_(0,57)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,230),e.s_(0,242),e.s_(0,250),e.s_(0,266),e.s_(0,272),e.s_(0,291),e.s_(0,334),e.s_(0,342),e.s_(0,364),e.s_(0,365),e.s_(0,366),e.s_(0,458),e.s_(0,491),e.s_(0,498),e.s_(0,511),e.s_(0,533),e.s_(0,534),e.s_(0,536),e.s_(0,605)])),e.af_u(["properties","contextual","classifications","concepts"],e.ref(49)),e.os(e.e,4,[5270790901,4897714945,19580072,5255949102,5244011744,4931248314,5264463751,4860761739,5261163969,5253129723,5285387004,19566752,4866706202]),e.o([e.s_(0,338),e.s_(0,383),e.s_(0,589)]),e.o([e.ref(61),e.ref(27)]),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,168),e.y_(0,148),e.y_(0,50)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,181),e.y_(0,180)]))]),e.bsc_(3,["1c1TB0NA","1sAVFbWH","Nwthg1b2"]),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,208)),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,379)),e.o([e.ref(95),e.af_u(["properties","contextual","classifications","concepts"],e.s_(0,280))]),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,142),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,124),e.y_(0,122),e.y_(0,91)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,149),e.y_(0,128)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,85),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.ref(87)),e.os(e.e,4,[4945451964,4448350751,5069450055,19577312,20301872,64346912,93419552,95083832,20687072,4997339518,4399463207,4524941894,4539604054,5184313845,4653069772,19584752,59402072,19569632,19566032,19579952,71008112,19555112,5341541475,4401646925,20615312]),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,171),e.y_(0,80),e.y_(0,73)]),e.y_(1,400)),e.ref(62),e.ref(32)]),e.o([e.y_(0,164),e.y_(0,119),e.y_(0,169),e.y_(0,55)]),e.o([e.s_(0,58),e.s_(0,62),e.s_(0,63),e.s_(0,68),e.s_(0,71),e.s_(0,264),e.s_(0,288),e.s_(0,295),e.s_(0,299),e.s_(0,301),e.s_(0,320),e.s_(0,340),e.s_(0,384),e.s_(0,385),e.s_(0,386),e.s_(0,439),e.s_(0,450),e.s_(0,453),e.s_(0,456),e.s_(0,570),e.s_(0,596),e.s_(0,601)]),e.af_u(["properties","contextual","classifications","concepts"],e.s_(0,379)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,234),e.s_(0,235),e.s_(0,244),e.s_(0,281),e.s_(0,290),e.s_(0,313),e.s_(0,317),e.s_(0,349),e.s_(0,370),e.s_(0,405),e.s_(0,457),e.s_(0,461),e.s_(0,493),e.s_(0,547),e.s_(0,564),e.s_(0,571)])),e.bsc_(3,["7+eu2UVn","Kjk5YJMu","rg0ItxeA"]),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,515)),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,172),e.y_(0,88),e.y_(0,81),e.y_(0,53)]),e.y_(1,400)),e.ref(73)]),e.o([e.s_(0,305),e.s_(0,336),e.s_(0,357)]),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,188)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,328),e.s_(0,382),e.s_(0,388),e.s_(0,437)])),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,488)),e.o([e.ref(68),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,248),e.s_(0,321)])),e.af_u(["properties","contextual","classifications","entities"],e.y_(0,174)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,231),e.s_(0,241),e.s_(0,290),e.s_(0,321),e.s_(0,477),e.s_(0,493)]))]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,294),e.s_(0,325),e.s_(0,392),e.s_(0,402),e.s_(0,463),e.s_(0,521)])),e.o([e.y_(0,597),e.y_(0,569),e.y_(0,568),e.y_(0,535),e.y_(0,507),e.y_(0,495),e.y_(0,464),e.y_(0,333)]),e.o([e.s_(0,348),e.s_(0,489),e.s_(0,509)]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,265),e.s_(0,351),e.s_(0,455),e.s_(0,487)])),e.af_u(["properties","contextual","classifications","categories"],e.ref(56),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.ref(24),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,125),e.y_(1,400)),e.o([e.ref(36),e.ref(48)]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,225),e.y_(0,223),e.y_(0,222),e.y_(0,218),e.y_(0,217),e.y_(0,211),e.y_(0,209),e.y_(0,205),e.y_(0,202),e.y_(0,201),e.y_(0,200),e.y_(0,199),e.y_(0,196),e.y_(0,189),e.y_(0,185),e.y_(0,184),e.y_(0,179),e.y_(0,177),e.y_(0,175)])),e.af_u(["properties","content","parents"],e.bsc([],["4qx3AwsL","7bQOoIF/","LEj1Js+4","MjChCltw","Nivczxb5","Q8MbqXox","TVc7mkd0","f2zYBSZh","hlTTCSip","yh6SSyNI"])),e.o([e.ref(98),e.ref(65)]),e.af_u(["properties","contextual","classifications","concepts"],e.ref(38)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,270),e.s_(0,316),e.s_(0,326),e.s_(0,392),e.s_(0,402),e.s_(0,463),e.s_(0,521),e.s_(0,553)])),e.o([e.y_(0,212),e.y_(0,210)]),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,263),e.s_(0,297),e.s_(0,323),e.s_(0,330),e.s_(0,371),e.s_(0,442),e.s_(0,490),e.s_(0,522),e.s_(0,555),e.s_(0,579),e.s_(0,599)])),e.o([e.s_(0,237),e.s_(0,249),e.s_(0,464),e.s_(0,472),e.s_(0,494),e.s_(0,506),e.s_(0,508),e.s_(0,568)]),e.bsc_(3,["MxU1XHPM","f/nj47kv"]),e.o([e.ref(40),e.ref(70)]),e.af_u(["properties","contextual","classifications","entities"],e.ref(31)),e.bsc_(3,["8JPTeDRr","WHMni1eR","pn83rpC5"]),e.o([e.y_(0,159),e.y_(0,137),e.y_(0,132),e.y_(0,128),e.y_(0,94),e.y_(0,89),e.y_(0,76),e.y_(0,75),e.y_(0,74),e.y_(0,70),e.y_(0,55)]),e.o([e.y_(0,67),e.y_(0,118),e.y_(0,149)]),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,152),e.y_(0,83),e.y_(0,133),e.y_(0,72)]),e.y_(1,400)),e.ref(86),e.ref(76)]),e.o([e.ref(90),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,135),e.y_(0,131),e.y_(0,129)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,207),e.y_(0,194),e.y_(0,193)]))]),e.af_u(["properties","contextual","classifications","categories"],e.ref(84),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,248),e.s_(0,303),e.s_(0,311),e.s_(0,318),e.s_(0,407),e.s_(0,545),e.s_(0,546),e.s_(0,547)])),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,356),e.s_(0,523)])),e.af_u(["properties","contextual","classifications","concepts"],e.ref(10)),e.o([e.ref(18),e.ref(89)]),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,309),e.s_(0,319),e.s_(0,565),e.s_(0,578)])),e.bsc_(3,["EUrJaWAX","fZbi3mFM","uvmg6iTv"]),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,140),e.y_(1,400)),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,154),e.y_(1,400)),e.af_u(["properties","contextual","classifications","entities"],e.o([e.s_(0,475),e.s_(0,575)])),e.af_u(["properties","contextual","classifications","entities"],e.ref(81)),e.af_u(["properties","contextual","classifications","entities"],e.s_(0,221)),e.af_u(["properties","contextual","classifications","concepts"],e.ref(0)),e.af_u(["properties","contextual","classifications","concepts"],e.s_(0,454)),e.o([e.os(e.s,5,[265,269,455,487]),e.ref(102)]),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,55),e.y_(1,400)),e.af_u(["properties","contextual","classifications","entities"],e.ref(51)),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,153),e.y_(1,400)),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,88),e.y_(0,76)]),e.y_(1,400)),e.ref(26),e.ref(15)]),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,56),e.y_(1,400)),e.os(e.e,4,[5267904932,5244011744,4931248314,4860761739,5286476846,5042514146,4537794659,5253163678,5248735104,5285387004,19566752,5093333736,4866706202,4897714945,5248311757,498823552]),e.o([e.s_(0,433),e.s_(0,434),e.s_(0,566)]),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,380),e.s_(0,402),e.s_(0,428),e.s_(0,513),e.s_(0,562),e.s_(0,563)])),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,70),e.y_(1,400)),e.o([e.y_(0,128),e.y_(0,167)]),e.af_u(["properties","contextual","classifications","categories"],e.ref(99),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.ref(37)),e.o([e.s_(0,229),e.s_(0,296),e.s_(0,305),e.s_(0,322),e.s_(0,355),e.s_(0,520),e.s_(0,600)]),e.o([e.ref(91),e.ref(5)]),e.af_u(["properties","contextual","classifications","concepts"],e.y_(0,197)),e.os(e.s,5,[387,389,390,391,393,395,396,397]),e.o([e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(0,156),e.y_(0,90)]),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,220),e.y_(0,187)]))]),e.o([e.ref(74),e.ref(39)]),e.af_u(["properties","contextual","classifications","entities"],e.ref(101)),e.o([e.ref(97),e.ref(33)]),e.af_u(["properties","contextual","classifications","categories"],e.ref(57),e.y_(1,400)),e.bsc_(3,["Mv4Zkvka","p4gDYvqI"]),e.o([e.ref(20),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.y_(0,194),e.y_(0,192)]))]),e.o([e.ps(5,578),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,91),e.y_(1,400)),e.af_u(["properties","contextual","classifications","concepts"],e.o([e.s_(0,298),e.s_(0,471),e.s_(0,539),e.s_(0,578)]))]),e.o([e.y_(0,173),e.y_(0,166),e.y_(0,52),e.y_(0,153)]),e.o([e.ref(12),e.ref(71)]),e.o([e.s_(0,251),e.s_(0,510)]),e.af_u(["properties","contextual","classifications","categories"],e.y_(0,132),e.y_(1,400)),e.bsc_(3,["27RoIsGu","4TRm1iZe","V1WL3pWB","ZFYWORzz"])]}})})));var we=__webpack_require__(215),Se=__webpack_require__(229);async function Ie(f){let{contextsInitTimestampPerformance:p,master:d}=f;const _=await d.next(),g=performance.now();Object.entries(_.globals??{}).forEach((e=>{let[t,r]=e;Object.defineProperty(self,t,{value:r})}));const h=new J(_.permutiveConfig);h.measureBetween("waiting_worker_high_priority_config",p,g);const m=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.RP;return t.loggingEnabled&&void 0!==self.console?.log?new C(r):new A}(_.permutiveConfig,_.sdkInitTimestampDate),v=_.metricsEnabled?new U(_.sdkInitTimestampPerformance,_.timeOriginMainContext,m):new E;v.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_evaluated",time_origin:"sdk_init"},p),v.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_high_priority_config",time_origin:"sdk_init"},g);const b=(0,r.zG)(d.next,h.traceTask("waiting_worker_low_priority_config"))();b.then((()=>v.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_low_priority_config",time_origin:"sdk_init"})));const y=(0,r.zG)((()=>d.read()),function(e,n){const i=e=>(0,r.zG)(e,R.Hd((e=>e in n)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return s=>{const{buffers:o,nonBuffers:a}=i(e),[c,u]=t.Ue({...a,...(0,r.zG)(o,R.Su((e=>()=>{const t=o[e];return o[e]=n[e].empty,t})))});return(async()=>{for(;;){const e=(0,r.zG)(await s(),F.UI(i),F.ur({concat:(e,t)=>({nonBuffers:{...e.nonBuffers,...t.nonBuffers},buffers:(()=>{const r={...e.buffers};for(const e in t.buffers)r[e]=e in r?n[e].concat(r[e],t.buffers[e]):t.buffers[e];return r})()})})),t=(0,r.zG)(e.buffers,R.Su(((e,t)=>(o[e]=n[e].concat(o[e],t),()=>{const t=o[e];return o[e]=n[e].empty,t}))));u({...c.current,...e.nonBuffers,...t})}})(),(0,r.zG)(e,R.Su((e=>(0,r.zG)(c,t.UI((t=>t[e]))))))}}({contextualCohorts:i.YP,consent:_.consent,enrichmentReplacementMap:i.YP,eventSourceId:_.eventSourceId,identities:i.YP,newEvents:s.cS,pageviewState:_.pageviewState,priorCachedEventsResponses:s.cS,sessionId:_.sessionId,userId:_.userId,userIdIsNewlyGenerated:_.userIdIsNewlyGenerated,viewId:_.pageviewState.viewId,webClient:i.G(_.webClient)},{newEvents:s.uZ(),priorCachedEventsResponses:s.uZ()}),(0,o.rO)({newEvents:(0,we.F)(v,"pageview_received_by_worker")}),(e=>({...e,currentTimestampSecs:ke((0,r.zG)(_.initialTimestampSecs,i.EQ((()=>0),(e=>e-Date.now()/1e3))))}))),{eventsCachedInWorker:w,coreService:S}=await function(o,f,p,d,_,g){d.debug("SDK core started",o);const h=500,m=new I(d,g),v=new k(o.permutiveConfig),b=new re(v,o.permutiveConfig,m,g,d,(()=>p.webClient.current)),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b.reportError(e,t?.userId,t?.timestamp)},w=(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,45)).then((e=>e.watson))),(()=>"Failed to import watson.")),a.UI((e=>(0,r.zG)(p.webClient,t.UI(i.UI((e=>e.url))),t.D8(i.Eh(Se.Eq)),(n=>e({config:o.permutiveConfig,metrics:g,permutiveApi:m,permutiveUrls:v,pageUrl:n,trace:_,watsonEnabled:(0,r.zG)(p.pageviewState,t.UI((e=>e.watsonEnabled)))})))))),S=(0,r.zG)(W.initialise(o.permutiveConfig,d,y,_,g,p.userId,(()=>(0,r.zG)(ee.connect(new T(o.permutiveConfig),g,new O,o.organizationId,`events_${p.userId.current}`,`keys_${p.userId.current}`,"events",d,p.consent,o.isSecureContext),_.traceTask("connect_idb_events_cache")))),_.traceTask("initialise_events_cache"),a.At((()=>()=>g.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"events_cache_initialised",time_origin:"sdk_init"},performance.now()))),a.EQ((e=>{d.error(`Worker failed to initialise IndexedDB event cache: ${e}`);const n={},[i,o]=t.gS(s.uZ()),a=()=>new Promise((e=>{const t=String(Math.random());n[t]=r=>{delete n[t],e(r)},o([[t,void 0]])}));return(0,r.zG)(p.priorCachedEventsResponses,t.UI((e=>(0,r.zG)(e(),s.UI((e=>{let[t,r]=e;return n[t]?.(r)})))))),{eventsCachedInWorker:!1,coreOutput:{priorCachedEventsRequests:i},coreConfig:{eventsCache:l.t$(a)}}}),(e=>({eventsCachedInWorker:!0,coreOutput:{priorCachedEventsRequests:t.a9(j.of(s.bM()))},coreConfig:{eventsCache:l.F2(e)}})))),U=(0,r.zG)(!0,a.DT(r.yR,(()=>"IndexedDB disabled.")),a.tS((()=>(0,r.zG)(G.K.initialise(new T(o.permutiveConfig),g,d,new O,`worker_${o.organizationId}`,"core_service_state","keys","core_service_state",4,o.isSecureContext),_.traceTask("initialise-core-idb")))),a.tS((e=>(0,z.Yt)(a.Hi)({persistCoreState:c(e,"core"),persistLalState:c(e,"lal")})))),E=()=>new Promise((e=>(0,r.zG)(p.consent,t.YP((t=>{t&&e()}))))),x=s=>(0,r.zG)(a.fF(U),a.YO("servicePersistence"),a.Qt("eventsCache",a.fF((()=>s))),a.Qt("coreService",(0,r.zG)(a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,854)).then((e=>e.service))),(e=>`Failed to import core service: ${e}`)),_.traceTask("import-core-service"))),a.Qt("lookalikeModelsService",a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,710)).then((e=>e.lookalikeModelsService))),(()=>"Failed to import lookalike models."))),a.Qt("optimisedActivationsConfig",a.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,159)).then((e=>e.optimisedActivationsConfig))),(()=>"Failed to import lookalike models."))),a.Qt("watson",w),M.mU((()=>E)),a.UI((s=>{let{coreService:a,eventsCache:c,lookalikeModelsService:b,optimisedActivationsConfig:w,servicePersistence:S,watson:I}=s;const k={config:o.permutiveConfig,customQueries:ye(),logger:d,metrics:g,optimisedActivationsConfig:w,permutiveApi:m,permutiveUrls:v,reportError:y,trackPageviewComplete:o.trackPageviewComplete,migratedStateMaps:(0,r.zG)(i.lo(!o.isFirstPageview),i.EQ((()=>M.of({external:i.bM(),internal:i.bM()})),(()=>j.of(f.then((e=>e.migratedStateMaps)))))),trace:_,watson:i.G(I),performance:i.ij(self.performance)};return(0,r.zG)(S,l.UI((s=>{let{persistCoreState:o,persistLalState:l}=s;return(0,r.zG)(b({...k,...p}),l,n.VS((s=>{let[l,f]=s;return(0,r.zG)(p,a({...k,...c.coreConfig,lookalikeModels:i.G(f)}),(d=h,_=t.a9(!1),n=>i=>{const{value:s,state:o}=n(i),[a,c]=t.Ue(o.current),u=(0,e.UM)((()=>c(o.current)),d),l=(0,r.zG)(t.vP(o,a),t.UI((e=>{let[t,r]=e;return t===r})));return(0,r.zG)(_,t.bw((e=>e&&u()))),{value:(0,r.bc)(l,s),state:(0,r.zG)(t.vP(_,o,a),t.UI((e=>{let[t,r,n]=e;return t?r:n})))}}),u(p.consent),o,n.UI((e=>{let[n,[i,s]]=e;return{...s,stateFlushed:(0,r.zG)(t.vP(l,n,i),t.UI((e=>{let[t,r,n]=e;return t&&r&&n})))}})));var d,_})),(e=>{const{value:r}=e({stopped:t.a9(!1),previousState:{}});return e=>({value:r,state:t.a9(void 0)})}))})),l.fS((e=>(d.warn("Worker running in non-persistent mode.",e),(0,r.zG)(p,a({...k,...c.coreConfig,lookalikeModels:i.YP}),n.Hr("stateFlushed",(()=>t.a9(!0))),u(p.consent))))),n.UI((e=>({...e,...c.coreOutput}))))})));return async()=>{const e=S(),t=x(e)(),{eventsCachedInWorker:r}=await e;return{eventsCachedInWorker:r,coreService:t}}}(_,b,y,m,h,v)();d.send({eventsCachedInWorker:w});const x=await S;if(l.nM(x))return m.error(`Failed to start worker: ${x.left}`),void self.close?.();const P=x.right,q=await b,D=(await P)({stopped:t.a9(!1),previousState:q.previousState}),[Q,Y]=t.Ue(v.getNoMetricsTracked());(0,e.UM)((()=>Y(v.getNoMetricsTracked())),100),function(e,n,s){const o=(0,r.zG)(t.vP(n),t.UI((0,r.ls)(R.UI((e=>"function"==typeof e?e:j.of(e))),(0,z.Yt)(j.G5))));let a=o.current();e(a),(0,r.zG)(o,t.YP((t=>{const n=t(),o=(0,r.zG)(n,R.z7(((e,t)=>t!==a[e]&&!s[e]?.isEmpty(t))),i.DT((0,L.ff)(R.xb)));i.pC(o)&&(a={...a,...o.value},e(o.value))})))}(d.send,{activations:D.value.activations,cohorts:t.vP(D.value.cohorts),context:D.value.context,eventsToPublish:D.value.eventsToPublish,eventsToPublishOnPageUnload:D.value.eventsToPublishOnPageUnload,externalData:D.value.externalData,geoIP:D.value.geoIP,metrics:(0,r.zG)(Q,t.UI((()=>()=>v.consume()))),priorCachedEventsRequests:D.value.priorCachedEventsRequests,realtime:D.value.realtime,state:D.state,transitionsSinceInit:D.value.transitionsSinceInit,workerStateFlushed:D.value.stateFlushed,stateMigratedThisInitialisation:D.value.stateMigratedThisInitialisation,secureSignal:D.value.secureSignal},{eventsToPublish:{isEmpty:s.xb},metrics:{isEmpty:s.xb}})}function ke(r){const n=()=>Math.floor(Date.now()/1e3)+r,[i,s]=t.Ue(n());return(0,e.UM)((()=>s(n())),1e3),i}!async function(){const t=self,r=await new Promise((e=>{const r=n=>{const i=function(e){return e&&"object"==typeof e&&"port"in e?e:void 0}(n.data);i&&(t.removeEventListener("message",r),e(i.port))};t.addEventListener("message",r)})),n=(t=>{const r=[],n=[],i=()=>{for(;r.length>0&&n.length>0;)n.shift()()},s=t=>new Promise((r=>{n.push((()=>r(t()))),(0,e.HJ)(i)}));return t.onmessage=(0,e.GL)((t=>{null!==t.data&&(r.push(t.data),(0,e.HJ)(i))})),{next:()=>s((()=>r.shift())),read:()=>s((()=>r.splice(0)))}})(r);Ie({contextsInitTimestampPerformance:e.NC,master:{...n,send:e=>r.postMessage(e)}})}()})()})();',"Worker",void 0,void 0)}},1005:e=>{e.exports=function(e,t,r,n){var i=self||window;try{try{var s;try{s=new i.Blob([e])}catch(t){(s=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),s=s.getBlob()}var o=i.URL||i.webkitURL,a=o.createObjectURL(s),c=new i[t](a,r);return o.revokeObjectURL(a),c}catch(n){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[t](n,r)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(1844);const t=(()=>{try{return self.document.currentScript}catch{return null}})();(()=>{(0,e.ho)(!0);const r="permutive.main.import_runWebSdk",n=`${r}_start`;performance?.mark?.(n),(0,e.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,304))))().then((i=>{performance?.measure?.(r,n),i.runSdk({contextsInitTimestampPerformance:e.NC,contextsInitTimestamp:e.RP,currentScript:t})})).catch(console.error)})()})()})();