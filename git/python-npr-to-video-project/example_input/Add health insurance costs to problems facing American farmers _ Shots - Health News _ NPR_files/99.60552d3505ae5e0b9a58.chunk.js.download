(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),i=g(a),r=(g(n(4)),g(n(91))),s=g(n(107)),l=g(n(1341)),u=g(n(1349)),p=g(n(109)),d=g(n(5)),c=n(246),h=n(145),f=n(89),y=_(n(34)),m=g(n(500)),v=g(n(344)),b=_(n(150));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.shouldRenderStoryUrl=function(e){if(!e||(0,p.default)(e)||!e.storyUrl)return!1;var t=(0,d.default)(n.props,"player.env.breakpoint","");return!!t&&!!(t!==y.SMALL||t===y.SMALL&&n.props.player.isExpanded)},n.trackRef=i.default.createRef(),n.audioTitleRef=i.default.createRef(),(0,r.default)(n,["_onRewind","_onFastForward","_onScrubBegin","_onSeek","_onScrubMove","_onScrubEnd","_getVisualProgress","_onTogglePlay","_onSkip","_onPreviousAudioPlayRequested","_getPosition","_getPercentage","_keyboardShortcutExpandCollapse","_keyboardShortcutPrevious"]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){s.default.bind(["mod+shift+left"],this._onRewind),s.default.bind(["mod+shift+space"],this._onTogglePlay),s.default.bind(["mod+shift+right"],this._onFastForward),s.default.bind(["mod+shift+up","mod+shift+down"],this._keyboardShortcutExpandCollapse),s.default.bind(["mod+shift+."],this._onSkip),s.default.bind(["mod+shift+,"],this._keyboardShortcutPrevious),this.clampText()}},{key:"componentDidUpdate",value:function(){this.clampText()}},{key:"componentWillUnmount",value:function(){s.default.unbind(["mod+shift+left"],this._onRewind),s.default.unbind(["mod+shift+space"],this._onTogglePlay),s.default.unbind(["mod+shift+right"],this._onFastForward),s.default.unbind(["mod+shift+up","mod+shift+down"],this._keyboardShortcutExpandCollapse),s.default.unbind(["mod+shift+."],this._onSkip),s.default.unbind(["mod+shift+,"],this._keyboardShortcutPrevious)}},{key:"_onRewind",value:function(e){e.preventDefault(),this.props.handlers.onRewind(this.props.audio)}},{key:"_onFastForward",value:function(e){e.preventDefault(),this.props.handlers.onFastForward(this.props.audio)}},{key:"_onScrubBegin",value:function(e){e.preventDefault(),this.props.handlers.onScrubBegin(this.props.audio),this._onSeek(e)}},{key:"_onSeek",value:function(e){e.preventDefault();var t=void 0;t=e.nativeEvent.touches&&e.nativeEvent.touches.length?e.nativeEvent.touches[0].clientX:e.nativeEvent.pageX,this.props.handlers.onSeek(this._getVisualProgress(t)*this.props.audio.duration,this.props.audio)}},{key:"_onScrubMove",value:function(e){e.preventDefault(),this.props.player.isScrubbing&&this._onSeek(e)}},{key:"_onScrubEnd",value:function(e){e.preventDefault(),this.props.handlers.onScrubEnd(this.props.audio)}},{key:"_getPosition",value:function(e,t){return Math.max(0,Math.min(e,t))}},{key:"_getPercentage",value:function(e,t){return Math.max(0,Math.min(e/t,1))}},{key:"_getVisualProgress",value:function(e){var t=this.trackRef.current.getBoundingClientRect(),n=t.left,o=t.width;return this._getPercentage(e-n,o)}},{key:"_onTogglePlay",value:function(){this.props.handlers.onPlayPauseRequested(this.props.audio,{playedFrom:"from player controls"})}},{key:"_onPreviousAudioPlayRequested",value:function(){this.props.handlers.onPreviousAudioPlayRequested()}},{key:"_onSkip",value:function(){this.props.handlers.onSkip(this.props.audio)}},{key:"_keyboardShortcutExpandCollapse",value:function(){(0,c.canCollapse)(this.props.player.env.breakpoint,this.props.player.env.hasRightRail)&&this.props.handlers.onToggleExpanded()}},{key:"_keyboardShortcutPrevious",value:function(){this.props.isHistoryEmpty||this._onPreviousAudioPlayRequested()}},{key:"clampText",value:function(){var e=this.audioTitleRef.current,t=this.props.audio.program?2:3;(0,l.default)(e,{clamp:t})}},{key:"render",value:function(){if(!this.props.audio.isAudioReady)return i.default.createElement(v.default,{player:this.props.player,handlers:this.props.handlers});var e=this.props.audio.isPlaying?"is-playing":"",t={width:100*this._getPercentage(this.props.player.position,this.props.audio.duration)+"%"},n=["player-play-pause-stop",(0,f.getSegmentPlayButtonIconClass)(this.props.audio.isLoading,this.props.audio.isPlaying,this.props.audio.isAwaitingData,this.props.audio.isPlayRequested)],o=(0,f.getPlayButtonAriaLabel)(this.props.audio.isLoading,this.props.audio.isPlaying,this.props.audio.isAwaitingData,this.props.audio.isPlayRequested),a=this.props.audio.program,r=!0,s=!0;return(this.props.isHistoryEmpty||this.props.isMobileDevice||this.props.playMode===b.IN_PLAYLIST_PLAY_MODE)&&(r=!1),(!this.props.isAutoplayEnabled&&this.props.playMode!==b.IN_PLAYLIST_PLAY_MODE||this.props.isQueueEmpty||this.props.isMobileDevice)&&(s=!1),i.default.createElement("div",{className:"player-basic-wrap"}," ",i.default.createElement("div",{className:"player-basic "+e},(0,c.canCollapse)(this.props.player.env.breakpoint,this.props.player.env.hasRightRail)&&i.default.createElement("button",{className:"toggle-expanded-engaged-player",onClick:this.props.handlers.onToggleExpanded,"aria-expanded":this.props.player.isExpanded,"aria-label":"Toggle more player options"},!this.props.player.isExpanded&&"Open",this.props.player.isExpanded&&"Close"),this.props.player.env.breakpoint!==y.SMALL&&i.default.createElement("button",{className:n.join(" "),onClick:this._onTogglePlay,"aria-label":o},o),i.default.createElement("div",{className:"player-controls"},!r&&i.default.createElement("b",{className:"player-previous previous-inactive","aria-hidden":"true"},"Inactive control: Previous"),r&&i.default.createElement("button",{className:"player-previous",onClick:this._onPreviousAudioPlayRequested,disabled:this.props.isAwaitingData},"Previous"),i.default.createElement("button",{className:"player-rewind",onClick:this._onRewind,disabled:this.props.isAwaitingData},"Rewind"),this.props.player.env.breakpoint===y.SMALL&&i.default.createElement("button",{className:n.join(" "),onClick:this._onTogglePlay,"aria-label":o},o),i.default.createElement("button",{className:"player-fast-forward",onClick:this._onFastForward,disabled:this.props.isAwaitingData},"Fast Forward"),!s&&i.default.createElement("b",{className:"player-skip skip-inactive","aria-hidden":"true"},"Inactive control: Skip"),s&&i.default.createElement("button",{className:"player-skip",onClick:this._onSkip,disabled:this.props.isAwaitingData},"Skip"),i.default.createElement(u.default,{handlers:this.props.handlers,player:this.props.player})),i.default.createElement("div",{className:"audio-info"},a&&i.default.createElement("b",{className:"audio-program-label"},a),i.default.createElement("b",{className:"audio-title",ref:this.audioTitleRef},this.shouldRenderStoryUrl(this.props.audio)&&i.default.createElement(m.default,{linkClass:"",href:this.props.audio.storyUrl,onLinkClick:this.props.handlers.onLinkClick,metricsGA4:{action:"player_click_audio_title",title:this.props.audio.title,clickUrl:this.props.audio.storyUrl}},this.props.audio.title),!this.shouldRenderStoryUrl(this.props.audio)&&this.props.audio.title),i.default.createElement("time",{className:"time-elapsed"},(0,h.secondsAsHMMSS)(this._getPosition(this.props.player.position,this.props.audio.duration)))),i.default.createElement("b",{className:"track"},i.default.createElement("b",{className:"track-scrubber",ref:this.trackRef,onMouseDown:this._onScrubBegin,onTouchStart:this._onScrubBegin,onMouseMove:this._onScrubMove,onTouchMove:this._onScrubMove,onDrag:this._onScrubMove,onMouseUp:this._onScrubEnd,onTouchEnd:this._onScrubEnd,onDragEnd:this._onScrubEnd,onMouseLeave:this._onScrubEnd,onTouchCancel:this._onScrubEnd}),i.default.createElement("time",{className:"time-elapsed"},(0,h.secondsAsHMMSS)(this._getPosition(this.props.player.position,this.props.audio.duration))),i.default.createElement("b",{className:"track-inner",ref:this.trackRef,onMouseDown:this._onScrubBegin,onTouchStart:this._onScrubBegin,onMouseMove:this._onScrubMove,onTouchMove:this._onScrubMove,onDrag:this._onScrubMove,onMouseUp:this._onScrubEnd,onTouchEnd:this._onScrubEnd,onDragEnd:this._onScrubEnd,onMouseLeave:this._onScrubEnd,onTouchCancel:this._onScrubEnd},i.default.createElement("b",{className:"progress-bar",style:t})),i.default.createElement("time",{className:"time-total"},(0,h.secondsAsHMMSS)(this.props.audio.duration)))))}}]),t}(a.Component);t.default=k},1341:function(e,t,n){var o,a,i;
/*!
 * Clamp.js 0.11.4
 *
 * Now Maintained by Josh English http://joshengish.com
 * Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 */a=[],void 0===(i="function"==typeof(o=function(){return function(e,t){t=t||{};var n,o=window,a={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},i=e.style,r=e.innerHTML,s=void 0!==e.style.webkitLineClamp,l=a.clamp,u=l.indexOf&&(l.indexOf("px")>-1||l.indexOf("em")>-1);function p(e,t){return o.getComputedStyle||(o.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,(function(){return arguments[2].toUpperCase()}))),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),o.getComputedStyle(e,null).getPropertyValue(t)}function d(t){var n=t||e.clientHeight,o=c(e);return Math.max(Math.floor(n/o),0)}function c(e){var t=p(e,"line-height");return"normal"==t&&(t=1.187*parseInt(p(e,"font-size"))),Math.ceil(parseFloat(t))}a.truncationHTML&&((n=document.createElement("span")).innerHTML=a.truncationHTML);var h,f,y,m,v=a.splitOnChars.slice(0),b=v[0];function _(t){if(t.lastChild)return t.lastChild.childNodes&&t.lastChild.childNodes.length>0?_(Array.prototype.slice.call(t.childNodes).pop()):t.lastChild&&t.lastChild.nodeValue&&""!==t.lastChild.nodeValue&&t.lastChild.nodeValue!=a.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),_(e))}function g(e,t){e.nodeValue=t+a.truncationChar}if("auto"==l?l=d():u&&(l=d(parseInt(l))),s&&a.useNativeClamp)i.overflow="hidden",i.textOverflow="ellipsis",i.webkitBoxOrient="vertical",i.display="-webkit-box",i.webkitLineClamp=l,u&&(i.height=a.clamp+"px");else{var k=(m=l,c(e)*m);k<e.clientHeight&&(y=function t(o,i){if(o&&i){var r=o.nodeValue.replace(a.truncationChar,"");if(h||(b=v.length>0?v.shift():"",h=r.split(b)),h.length>1?(f=h.pop(),g(o,h.join(b))):h=null,n&&(o.nodeValue=o.nodeValue.replace(a.truncationChar,""),e.innerHTML=o.nodeValue+" "+n.innerHTML+a.truncationChar),h){if(e.clientHeight<=i){if(!(v.length>=0&&""!==b))return e.innerHTML;g(o,h.join(b)+b+f),h=null}}else""===b&&(g(o,""),o=_(e),v=a.splitOnChars.slice(0),b=v[0],h=null,f=null);if(!a.animate)return t(o,i);setTimeout((function(){t(o,i)}),!0===a.animate?10:a.animate)}}(_(e),k))}return{original:r,clamped:y}}})?o.apply(t,a):o)||(e.exports=i)},1349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),i=s(a),r=(s(n(4)),s(n(1402)));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){n.setState({sliderValue:e});var t=e/100;n.props.handlers.onSetAudioPlayerVolume(t)},n.state={sliderValue:100*n.props.player.volume},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"volume-controls","aria-label":"audio player volume control"},i.default.createElement("div",{className:"player-volume"}),i.default.createElement("div",{className:"volume-bar"},i.default.createElement(r.default,{min:0,max:100,defaultValue:this.state.sliderValue,value:this.state.sliderValue,onChange:this.onChange})))}}]),t}(a.Component);t.default=l}}]);